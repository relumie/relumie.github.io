(this["webpackJsonprelumie-client-web"]=this["webpackJsonprelumie-client-web"]||[]).push([[0],{144:function(e,t,n){},181:function(e,t){},271:function(e,t,n){},272:function(e,t,n){},280:function(e,t){},282:function(e,t){},292:function(e,t){},293:function(e,t){},431:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(83),o=n.n(c),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,441)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},i=(n(240),n(144)),l=n.n(i),u=n(14),d=n.n(u),b=n(23),j=n(11),h=n(15),p=n(26),f=n(36),m=n(37),x=function(){function e(){Object(f.a)(this,e)}return Object(m.a)(e,null,[{key:"delay",value:function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"makeRandomColor",value:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)}},{key:"lightenDarkenColor",value:function(e,t){return"#"+e.replace(/^#/,"").replace(/../g,(function(e){return("0"+Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2)}))}}]),e}(),O=function(){function e(){Object(f.a)(this,e)}return Object(m.a)(e,null,[{key:"searchEnter",value:function(e,t){return e||(e=window.event),13!==(e.keyCode?e.keyCode:e.which)||(t(),!1)}}]),e}(),g=function(){function e(){Object(f.a)(this,e)}return Object(m.a)(e,null,[{key:"number2commadStringWithIntl",value:function(e){try{return new Intl.NumberFormat("en-US").format(e)}catch(t){return e}}}]),e}(),v={isWideMode:!1},y=r.a.createContext(v),k=n(22),w=n(213),C=n.n(w).a.bind(l.a),S=n(1),N=function(e){var t=r.a.useState(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],s=r.a.useState(!1),i=Object(j.a)(s,2),l=i[0],u=i[1],h=r.a.useState([]),p=Object(j.a)(h,2),f=p[0],m=p[1];return Object(a.useEffect)((function(){function t(){return(t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!1),o(!0),m(e.modals),t.next=5,x.delay(n);case 5:u(!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(){return(n=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!1),t.next=3,x.delay(n);case 3:o(!1),m(e.modals);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.modals.length>f.length?function(e){t.apply(this,arguments)}(100):e.modals.length<f.length&&function(e){n.apply(this,arguments)}(200)}),[e.modals,f]),f.length?Object(S.jsxs)("div",{className:C({"modal-wrapper":!0,visible:c,opacity:l}),children:[Object(S.jsx)("div",{className:"modal-wrapper-backdrop",onClick:e.closeCurrentModal}),Object(S.jsx)("div",{className:"modal-wrapper-container",children:f[0]})]}):null};N.defaultProps={modals:[],closeCurrentModal:function(){return console.log("closeCurrentModal() is not defined.")}};var T=N,M=function(e){return Object(S.jsxs)("div",{style:{maxHeight:"".concat(80,"vh"),overflow:"auto"},children:[Object(S.jsx)("div",{className:"text-end pt-2 pe-2",children:Object(S.jsx)("button",{type:"button",className:"btn-close",onClick:e.onCancel})}),Object(S.jsx)("div",{className:"py-3",style:{whiteSpace:"pre-wrap",lineBreak:"anywhere",width:"".concat(480,"px"),maxWidth:"".concat(90,"vw")},children:e.message}),Object(S.jsx)("div",{className:"text-end",children:Object(S.jsx)("button",{type:"button",className:"btn btn-primary text-light fw-bold rounded",onClick:e.onConfirm,children:"\ud655\uc778"})})]})};M.defaultProps={message:"NO MESSAGE",onConfirm:function(){},onCancel:function(){}};var I=M,D=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:"Here's main"}),Object(S.jsx)("br",{}),Object(S.jsx)(y.Consumer,{children:function(e){return Object(S.jsxs)("div",{style:{whiteSpace:"pre-wrap"},children:[Object(S.jsx)("div",{children:Object(S.jsx)("button",{type:"button",onClick:function(){var t=Object(b.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pushMessageModal({Modal:I,props:{message:"\ud14c\uc2a4\ud2b8 \uba54\uc138\uc9c0\uc785\ub2c8\ub2e4."},onConfirm:function(){console.log("CONFIRM")},onCancel:function(){console.log("CANCEL 73473")}});case 2:if(a=t.sent,console.log("MODAL_CONFIRMED? : "+a),!1!==a){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.pushMessageModal({Modal:I,props:{message:"\ud14c\uc2a4\ud2b8 \uba54\uc138\uc9c0\uc785\ub2c8\ub2e4. 2"},onConfirm:function(){console.log("CONFIRM")},onCancel:function(){console.log("CANCEL 52374")}});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"PUSH MODAL"})}),Object(S.jsx)("div",{children:JSON.stringify(e,"",2)})]})}})]})},R=n(48),E=n(49),A=n.n(E),_=A.a.create({baseURL:"".concat("https://1.233.86.212","/api"),timeout:3e3,headers:{"content-type":"application/json"}});_.interceptors.request.use((function(e){return e})),_.interceptors.response.use((function(e){return e}),(function(e){return e.response?Promise.reject(Object(h.a)({status:e.response.status,headers:e.config.headers,url:e.config.baseURL+e.config.url,params:e.config.data},e.response.data)):e.request?Promise.reject({status:e.request.status,headers:e.config.headers,url:e.config.baseURL+e.config.url,params:e.config.data,message:e.message}):Promise.reject(e)}));var B=_,F=function(e){var t=A.a.CancelToken.source();Object(a.useEffect)((function(){return function(){return t.cancel()}}),[t]);var n=Object(a.useContext)(y),c=r.a.useState({login_id:"",password:"",password_confirm:"",email:""}),o=Object(j.a)(c,2),s=o[0],i=o[1],l=function(e){var t=e.target.name;i((function(n){return Object(h.a)(Object(h.a)({},n),{},Object(R.a)({},t,e.target.value))}))},u=function(){var e=Object(b.a)(d.a.mark((function e(a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,B.post("/auth/register",{login_id:s.login_id,password:s.password,"#email":s.email},{cancelToken:t.token});case 4:return r=e.sent,e.next=7,n.pushMessageModal({Modal:I,props:{message:"\uac00\uc785\ub418\uc5c8\uc2b5\ub2c8\ub2e4"},onConfirm:function(){console.log("CONFIRM")},onCancel:function(){console.log("CANCEL 52374")}});case 7:console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("form",{onSubmit:u,children:Object(S.jsxs)("div",{className:"mx-auto w-100p",style:{width:"".concat(100,"%"),maxWidth:"".concat(20,"em")},children:[Object(S.jsx)("input",{type:"text",name:"login_id",value:s.login_id,onChange:l,placeholder:"ID"}),Object(S.jsx)("input",{type:"password",name:"password",value:s.password,onChange:l,placeholder:"PASSWORD"}),Object(S.jsx)("input",{type:"password",name:"password_confirm",value:s.password_confirm,onChange:l,placeholder:"CONFIRM PASSWORD"}),Object(S.jsx)("input",{type:"email",name:"email",value:s.email,onChange:l,placeholder:"EMAIL"}),Object(S.jsx)("div",{children:Object(S.jsx)("input",{type:"submit",value:"REGISTER"})})]})})},L=function(){function e(){Object(f.a)(this,e)}return Object(m.a)(e,null,[{key:"translateErrorMessages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e||void 0===e?void 0:e.message){var n={SequelizeDatabaseError:"DB \uad6c\ubb38 \uc5d0\ub7ec.\n\uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud574\uc8fc\uc138\uc694","timeout of":"\uc11c\ubc84 \uc751\ub2f5\uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."};t=Object.assign(n,t);for(var a=e.message.toLowerCase(),r=Object.keys(t),c=0;c<r.length;++c){var o=r[c];if(a.indexOf(o.toLowerCase())>=0)return t[o]}}}}]),e}(),P=function(e){var t=A.a.CancelToken.source();Object(a.useEffect)((function(){return function(){return t.cancel()}}),[t]);var n=Object(a.useContext)(y),c=r.a.useState({login_id:"",password:"",password_confirm:"",email:""}),o=Object(j.a)(c,2),s=o[0],i=o[1],l=function(e){var t=e.target.name;i((function(n){return Object(h.a)(Object(h.a)({},n),{},Object(R.a)({},t,e.target.value))}))},u=function(){var e=Object(b.a)(d.a.mark((function e(a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,B.post("/auth/login",{login_id:s.login_id,password:s.password},{cancelToken:t.token}).then((function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.content}));case 4:return r=e.sent,console.log(r),e.next=8,n.pushMessageModal({Modal:I,props:{message:"\ub85c\uadf8\uc778 \uc131\uacf5"},onConfirm:function(){console.log("CONFIRM")},onCancel:function(){console.log("CANCEL 52374")}});case 8:e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(1),!A.a.isCancel(e.t0)){e.next=15;break}return console.log("Canceled."),e.abrupt("return");case 15:return c=L.translateErrorMessages(e.t0,{"no user":"\ud574\ub2f9\ud558\ub294 \uc720\uc800\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),e.next=18,n.pushMessageModal({Modal:I,props:{message:c},onConfirm:function(){console.log("CONFIRM")},onCancel:function(){console.log("CANCEL 52374")}});case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("form",{onSubmit:u,children:Object(S.jsxs)("div",{className:"mx-auto w-100p py-3",style:{width:"".concat(100,"%"),maxWidth:"".concat(20,"em")},children:[Object(S.jsx)("input",{type:"text",className:"form-control",name:"login_id",value:s.login_id,onChange:l,placeholder:"ID"}),Object(S.jsx)("input",{type:"password",className:"form-control",name:"password",value:s.password,onChange:l,placeholder:"PASSWORD"}),Object(S.jsx)("div",{children:Object(S.jsx)("input",{type:"submit",value:"LOGIN",className:"btn btn-primary w-100"})})]})})},K=n(21),W=n(85),Y=n(106),z=n(117);n(271);var U=function(e,t){var n=K.select("body").append("div").attr("class","tooltip").attr("id",e).style("pointer-events","none");function a(){n.style("opacity",0)}function r(e){var t=n.style("width"),a=n.style("height"),r=window.scrollX,c=window.scrollY,o=document.getElementById?e.clientX+r:e.pageX,s=document.getElementById?e.clientY+c:e.pageY,i=o-r+40+t>window.innerWidth?o-t-40:o+20;i<r+20&&(i=r+20);var l=s-c+20+a>window.innerWidth?s-a-20:s+10;l<c+10&&(l=c+10),n.style("top","".concat(l,"px")).style("left","".concat(i,"px"))}return t&&n.style("width",t),a(),{showTooltip:function(e,t){n.style("opacity",1).html(e),r(t)},hideTooltip:a,updatePosition:r}}("gates_tooltip",240),q=K.scaleOrdinal().domain(["low","medium","high"]).range(["#525b7a","#beccde","#5aa2bc"]),H=function(e){Object(Y.a)(n,e);var t=Object(z.a)(n);function n(e){var a;Object(f.a)(this,n),(a=t.call(this,e)).shouldComponentUpdate=function(){return!1},a.state={g:null};var r=a.props,c=r.forceStrength,o=r.center;return a.simulation=K.forceSimulation().velocityDecay(.2).force("x",K.forceX().strength(c).x(o.x)).force("y",K.forceY().strength(c).y(o.y)).force("charge",K.forceManyBody(a.charge.bind(Object(W.a)(a)))).on("tick",a.ticked.bind(Object(W.a)(a))).stop(),a}return Object(m.a)(n,[{key:"charge",value:function(e){return-this.props.forceStrength*Math.pow(e.radius,2)}},{key:"ticked",value:function(){this.state.g.selectAll(".bubble").attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y}))}},{key:"componentWillReceiveProps",value:function(e){e.data!==this.props.data&&this.renderBubbles(e.data),e.groupByYear!==this.props.groupByYear&&this.regroupBubbles(e.groupByYear)}},{key:"renderBubbles",value:function(e){var t=this,n=this.state.g.selectAll(".bubble").data(e,(function(e){return e.id}));n.exit().remove(),n.enter().append("circle").classed("bubble",!0).attr("r",0).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("fill",(function(e){return q(e.group)})).attr("stroke",(function(e){return K.rgb(q(e.group)).darker()})).attr("stroke-width",2).on("mouseover",G).on("mouseout",X).transition().duration(2e3).attr("r",(function(e){return e.radius})).on("end",(function(){t.simulation.nodes(e).alpha(1).restart()}))}},{key:"regroupBubbles",value:function(e){var t=this.props,n=t.forceStrength,a=t.yearCenters,r=t.center;e?this.simulation.force("x",K.forceX().strength(n).x((function(e){return a[e.year].x}))).force("y",K.forceY().strength(n).y((function(e){return a[e.year].y}))):this.simulation.force("x",K.forceX().strength(n).x(r.x)).force("y",K.forceY().strength(n).y(r.y)),this.simulation.alpha(1).restart()}},{key:"onRef",value:function(e){var t=this;this.setState({g:K.select(e)},(function(){return t.renderBubbles(t.props.data)}))}},{key:"render",value:function(){return Object(S.jsx)("g",{ref:this.onRef.bind(this),className:"bubbles"})}}]),n}(r.a.Component);function G(e){K.select(this).attr("stroke","black");var t='<span class="name">Title: </span><span class="value">'.concat(e.name,"</span><br/>")+'<span class="name">Amount: </span><span class="value">$'.concat(e.value,"</span><br/>")+'<span class="name">Year: </span><span class="value">'.concat(e.year,"</span>");U.showTooltip(t,K.event)}function X(e){K.select(this).attr("stroke",K.rgb(q(e.group)).darker()),U.hideTooltip()}n(272);var J=function(e){Object(Y.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onBtnClick=function(t){e.props.onChanged(t.target.name)},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.active;return Object(S.jsxs)("div",{className:"GroupingPicker",children:[Object(S.jsx)("button",{className:"button ".concat("all"===e&&"active"),name:"all",onClick:this.onBtnClick,children:"All Grants"}),Object(S.jsx)("button",{className:"button ".concat("year"===e&&"active"),name:"year",onClick:this.onBtnClick,children:"Grants By Year"})]})}}]),n}(r.a.Component);function Q(e){var t=e.yearCenters;return Object(S.jsx)("g",{className:"yearsTitles",children:Object.keys(t).map((function(e){return Object(S.jsx)("text",{x:t[e].x,y:50,fontSize:"35",textAnchor:"middle",alignmentBaseline:"middle",children:e},e)}))})}var V=function(e){var t=e.width,n=e.height,a=e.children;return Object(S.jsx)("svg",{className:"bubbleChart",width:t,height:n,children:a})},Z=function(){var e=r.a.useState([]),t=Object(j.a)(e,2),n=t[0],a=t[1],c=r.a.useState("all"),o=Object(j.a)(c,2),s=o[0],i=o[1],l=r.a.useState({}),u=Object(j.a)(l,2),d=u[0],b=u[1];return r.a.useEffect((function(){var e=document.getElementById("main").clientWidth,t=document.getElementById("main").clientHeight-49;b({width:e,height:t,center:{x:e/2,y:t/2},yearCenters:{2008:{x:e/4,y:t/2},2009:{x:e/2,y:t/2},2010:{x:3/4*e,y:t/2}}});K.csv("/data/gates_money.csv",(function(n,r){if(n)console.log("error",n);else{var c=function(n){if(e&&t){var a=K.max(n,(function(e){return+e.total_amount})),r=K.scalePow().exponent(.5).range([2,85]).domain([0,a]),c=n.map((function(n){return{id:n.id,radius:r(+n.total_amount),value:+n.total_amount,name:n.grant_title,org:n.organization,group:n.group,year:n.start_year,x:Math.random()*e,y:Math.random()*t}}));return c.sort((function(e,t){return t.value-e.value})),c}}(r);a(c)}}))}),[]),Object(S.jsxs)("div",{style:{whiteSpace:"pre-wrap",lineBreak:"anywhere",height:"".concat(100,"%"),overflow:"auto"},children:[Object(S.jsx)(J,{onChanged:function(e){return i(e)},active:s}),d.width&&d.height&&Object(S.jsxs)(V,{width:d.width,height:d.height,children:[Object(S.jsx)(H,{data:n,forceStrength:.08,center:d.center,yearCenters:d.yearCenters,groupByYear:"year"===s}),"year"===s&&Object(S.jsx)(Q,{width:d.width,yearCenters:d.yearCenters})]})]})},$=n(216),ee=n.n($),te=function(){var e=r.a.useState({query:"",pageToken:"",bannedChannels:""}),t=Object(j.a)(e,2),n=t[0],a=t[1],c=r.a.useState([]),o=Object(j.a)(c,2),s=o[0],i=o[1],l=r.a.useState([]),u=Object(j.a)(l,2),p=u[0],f=u[1],m=function(){var e=Object(b.a)(d.a.mark((function e(t){var r,c,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.pageToken,p.length&&((c=p.slice().pop()).query===n.query&&c.bannedChannels===n.bannedChannels||(r="")),e.prev=2,e.next=5,A.a.get("https://www.googleapis.com/youtube/v3/search",{params:{pageToken:r,key:"AIzaSyA7zpvNp8vqxTGeGCu57iywRBTru-0s0Zo",q:n.query,part:"snippet",maxResults:50,order:"date",type:"video"}});case 5:o=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return");case 12:l=n.bannedChannels.split(",").map((function(e){return e.trim()})),(u=p.slice()).push(n),f(u),a(Object(h.a)(Object(h.a)({},n),{},{pageToken:o.data.nextPageToken})),b=s.map((function(e){return e.id.videoId})),j=o.data.items.filter((function(e){return!(l.indexOf(e.snippet.channelTitle)>=0)&&(!r||!(r&&b.indexOf(e.id.videoId)>=0))})).map((function(e){var t=ee.a.decode(e.snippet.title);return Object(h.a)(Object(h.a)({},e),{},{snippet:Object(h.a)(Object(h.a)({},e.snippet),{},{title:t})})})),i(r?s.concat(j):j);case 20:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"d-flex",children:[Object(S.jsx)("div",{className:"flex-shrink-0 d-none d-sm-block overflow-auto bg-gray text-light",style:{width:"".concat(16,"em"),height:"".concat(100,"vh")},children:Object(S.jsx)("nav",{children:Object(S.jsx)("ul",{className:"nav nav-pills flex-column mb-auto fw-bold",children:p.map((function(e,t){return Object(S.jsx)("li",{children:Object(S.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:function(t){return a(e)},children:e.query})},t)}))})})}),Object(S.jsxs)("div",{className:"container-fluid overflow-scroll",style:{height:"100vh"},children:[Object(S.jsxs)("div",{className:"position-sticky",style:{top:0},children:[Object(S.jsxs)("div",{className:"d-flex",children:[Object(S.jsx)("div",{children:Object(S.jsx)("input",{type:"text",className:"form-control",value:n.query,onChange:function(e){return a(Object(h.a)(Object(h.a)({},n),{},{query:e.target.value}))},onKeyDown:function(e){return O.searchEnter(e,m)}})}),Object(S.jsx)("button",{type:"button",className:"btn btn-primary",onClick:m,children:s.length?"More":"Search"})]}),Object(S.jsx)("div",{className:"d-flex",children:Object(S.jsx)("div",{children:Object(S.jsx)("input",{type:"text",className:"form-control",value:n.bannedChannels,onChange:function(e){return a(Object(h.a)(Object(h.a)({},n),{},{bannedChannels:e.target.value}))}})})})]}),Object(S.jsx)("div",{className:"row mt-5",children:s.map((function(e,t,n){var a=e.id.videoId;return Object(S.jsxs)("div",{className:"col-3",children:[Object(S.jsx)("div",{children:Object(S.jsx)("a",{href:"https://www.youtube.com/watch?v=".concat(a),target:"_blank",rel:"noreferrer",children:Object(S.jsx)("img",{src:e.snippet.thumbnails.medium.url,alt:"tmb_".concat(t)})})}),Object(S.jsx)("div",{children:e.snippet.title}),Object(S.jsx)("div",{children:e.snippet.channelTitle}),Object(S.jsx)("div",{children:e.snippet.publishTime})]},a)}))})]})]})},ne=n(90),ae=n.n(ne),re=n(149),ce=n.n(re),oe=n(150),se=n.n(oe),ie=n(435),le=n(440),ue=n(438),de=n(92),be=n(89),je=n(113),he=n(114),pe=n(112),fe=n(230),me=n(232),xe=n(439),Oe=n(110),ge=n(56),ve=function(){new Date("2021-03-01 09:00").getTime(),new Date("2021-03-01 09:03").getTime(),new Date("2021-03-01 09:06").getTime(),new Date("2021-03-01 09:03").getTime(),new Date("2021-03-01 09:06").getTime(),new Date("2021-03-01 09:00").getTime(),new Date("2021-03-01 09:06").getTime();var e=r.a.useState([]),t=Object(j.a)(e,2),n=t[0],a=t[1],c=r.a.useState([]),o=Object(j.a)(c,2),s=o[0],i=(o[1],r.a.useState([])),l=Object(j.a)(i,2),u=l[0],d=l[1],b=r.a.useRef(),p=r.a.useRef(),f=r.a.useCallback((function(e){var t=[];return Object.keys(e).forEach((function(n){"Total"===n&&(t=e[n].map((function(e){var t,n=(t=e["\uc77c\uc790"],new Date(Date.UTC(0,0,t-1,-9)));return delete e["\uc77c\uc790"],Object(h.a)({date:n},e)})))})),[t]}),[]);r.a.useEffect((function(){var e=localStorage.getItem("last_finance_data");if(e){var t=JSON.parse(e),n=f(t),a=Object(j.a)(n,1)[0];d(a)}}),[f]);var m=function(e){var t=e.active,n=e.payload,a=e.label;if(t&&n&&n.length){var r,c=ae()(a).format("YY-MM-DD HH:mm"),o=n[0].name,s=n[0].value,i=n[0].payload.ea;return"SELL"===o?r="blue":"BUY"===o&&(r="red"),Object(S.jsxs)("div",{className:"bg-light p-2 border rounded",children:[Object(S.jsx)("p",{style:{fontSize:"8px"},children:c}),Object(S.jsx)("table",{children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:r},children:"".concat(o)})}),Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:r},children:" : "})}),Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:r},children:"".concat(s)})})]}),i&&Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)("p",{children:"VOLUME"})}),Object(S.jsx)("td",{children:Object(S.jsx)("p",{children:" : "})}),Object(S.jsx)("td",{children:Object(S.jsx)("p",{children:"".concat(i)})})]})]})})]})}return null},O=function(e){var t=e.active,n=e.payload,a=e.label;if(!t||!n||!n.length)return null;var r=ae()(a).format("YY.MM.DD");return Object(S.jsxs)("div",{className:"bg-light p-2 border rounded bg-light",style:{fontSize:"".concat(12,"px"),whiteSpace:"pre"},children:[Object(S.jsx)("p",{className:"fw-bold",children:r}),Object(S.jsx)("table",{children:Object(S.jsxs)("tbody",{children:[n.map((function(e){var t=(100*e.value/e.payload.Total).toFixed(2).padStart(5," ");return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:e.color},children:"".concat(e.name)})}),Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:e.color},children:" :  "})}),Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:e.color,textAlign:"end",fontFamily:"monospace"},children:"".concat(g.number2commadStringWithIntl(e.value)," (").concat(t,"%)")})})]},e.name)})),Object(S.jsx)("tr",{children:Object(S.jsx)("td",{colSpan:3,children:Object(S.jsx)("hr",{className:"my-2"})})}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:"black"},children:"Total"})}),Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:"black"},children:" :  "})}),Object(S.jsx)("td",{children:Object(S.jsx)("p",{style:{color:"black",textAlign:"end",fontFamily:"monospace"},children:"\uffe6 ".concat(g.number2commadStringWithIntl(n[0].payload.Total))})})]})]})})]})},v={KOSPI:x.lightenDarkenColor(x.makeRandomColor(),-30),Won:x.lightenDarkenColor(x.makeRandomColor(),-30),Dollar:x.lightenDarkenColor(x.makeRandomColor(),-30),Luxuary:x.lightenDarkenColor(x.makeRandomColor(),-30),NASDAQ:x.lightenDarkenColor(x.makeRandomColor(),-30),Reits:x.lightenDarkenColor(x.makeRandomColor(),-30),"S&P500":x.lightenDarkenColor(x.makeRandomColor(),-30),"Stocks-KR":x.lightenDarkenColor(x.makeRandomColor(),-30),"Stocks-US":x.lightenDarkenColor(x.makeRandomColor(),-30),"T-bond_I":x.lightenDarkenColor(x.makeRandomColor(),-30)};return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:Object(S.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(e){return console.log(n)},children:"Prices \ud14c\uc2a4\ud2b8"})}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(e){return console.log(s)},children:"Trades \ud14c\uc2a4\ud2b8"})}),Object(S.jsxs)("div",{children:[Object(S.jsx)("form",{ref:b,children:Object(S.jsx)("input",{type:"file",accept:".csv,.xlsx",id:"pricesFileInput",className:"d-none",onClick:function(e){return e.target.key="prices"+(new Date).getMilliseconds()},name:"pricesFile",onChange:function(e){var t=e.target,n=new FileReader;n.onload=function(){var e=n.result,t=se.a.read(e,{type:"binary"}),a={};t.SheetNames.forEach((function(e){var n=se.a.utils.sheet_to_json(t.Sheets[e]);a[e]=n})),b.current.reset(),localStorage.setItem("last_finance_data",JSON.stringify(a));var r=f(a),c=Object(j.a)(r,1)[0];d(c)},n.readAsBinaryString(t.files[0])}})}),Object(S.jsx)("label",{type:"button",htmlFor:"pricesFileInput",className:"btn btn-primary",children:"\uac00\uaca9 \ud30c\uc77c \uc5c5\ub85c\ub4dc"})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("form",{ref:p,children:Object(S.jsx)("input",{type:"file",accept:".csv",id:"tradesFileInput",className:"d-none",onClick:function(e){return e.target.key="trade"+(new Date).getMilliseconds()},name:"tradesFile",onChange:function(e){if(!e.target.files||!e.target.files.length)return b.current.reset(),void a([]);var t=new FileReader;t.onload=function(e){ce()(t.result,{},(function(e,t){a(n.concat(t.map((function(e,t){var n,a=e[3],r=e[2].padStart(5,"0"),c=parseFloat(e[1]);return n={dateTime:new Date("".concat(a," ").concat(r)).getTime()},Object(R.a)(n,c>=0?"buy":"sell",parseInt(e[0])),Object(R.a)(n,"ea",Math.abs(c)),n}))))}))},t.readAsText(e.target.files[0])}})}),Object(S.jsx)("label",{type:"button",htmlFor:"tradesFileInput",className:"btn btn-primary",children:"\ub9e4\ub9e4 \ud30c\uc77c \uc5c5\ub85c\ub4dc"})]}),Object(S.jsx)("div",{style:{height:"".concat(400,"px")},children:Object(S.jsx)(ie.a,{width:"100%",height:"100%",children:Object(S.jsxs)(le.a,{width:500,height:400,data:n,margin:{top:20,right:80,bottom:20,left:20},children:[Object(S.jsx)(ue.a,{stroke:"#f5f5f5"}),Object(S.jsx)(de.a,{content:Object(S.jsx)(m,{})}),Object(S.jsx)(be.a,{}),Object(S.jsx)(je.a,{dataKey:"dateTime",domain:["auto","auto"],type:"number",tickFormatter:function(e){return ae()(e).format("HH:mm Do")},label:{value:"TIME",position:"insideBottomRight",offset:0}}),Object(S.jsx)(he.a,{domain:["auto","auto"],unit:"",type:"number",label:{value:"WON",angle:-90,position:"insideLeft"}}),Object(S.jsx)(pe.a,{dataKey:"ea",name:"ea",range:[32,288],unit:"ea"}),Object(S.jsx)(fe.a,{name:"PRICE",dataKey:"price",stroke:"black",dot:!1,activeDot:!1,legendType:"none"}),Object(S.jsx)(me.a,{name:"BUY",dataKey:"buy",fill:"red"}),Object(S.jsx)(me.a,{name:"SELL",dataKey:"sell",fill:"blue"})]})})}),Object(S.jsx)("div",{className:"mt-5 mb-3 px-4 py-4 bg-dark text-light",children:Object(S.jsx)("h1",{children:Object(S.jsx)("b",{children:"TOTAL ASSET RATIO"})})}),Object(S.jsx)("div",{style:{height:"".concat(800,"px")},children:Object(S.jsx)(ie.a,{width:"100%",height:"100%",children:Object(S.jsxs)(xe.a,{width:500,height:400,data:u,defaultShowTooltip:!0,margin:{top:10,right:30,left:30,bottom:50},children:[Object(S.jsx)(ue.a,{strokeDasharray:"1 2"}),Object(S.jsx)(je.a,{dataKey:"date",fontSize:10,angle:-40,textAnchor:"end",tickSize:4,tickMargin:8,padding:{left:50,right:50},tickFormatter:function(e){return e instanceof Date?ae()(e).format("YY.MM.DD"):e}}),Object(S.jsx)(he.a,{fontSize:10,tickFormatter:function(e){return g.number2commadStringWithIntl(e)}}),Object(S.jsx)(de.a,{content:Object(S.jsx)(O,{})}),Object(S.jsx)(be.a,{align:"left",verticalAlign:"top",height:48,iconSize:20}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"Won",stackId:"1",stroke:v.Won,strokeWidth:4,fill:v.Won}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"KOSPI",stackId:"1",stroke:v.KOSPI,fill:v.KOSPI}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"S&P500",stackId:"1",stroke:v["S&P500"],fill:v["S&P500"]}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"NASDAQ",stackId:"1",stroke:v.NASDAQ,fill:v.NASDAQ}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"Luxuary",stackId:"1",stroke:v.Luxuary,fill:v.Luxuary}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"Stocks-KR",stackId:"1",stroke:v["Stocks-KR"],fill:v["Stocks-KR"]}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"Stocks-US",stackId:"1",stroke:v["Stocks-US"],fill:v["Stocks-US"]}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"Reits",stackId:"1",stroke:v.Reits,fill:v.Reits}),Object(S.jsx)(Oe.a,{type:"monotone",dataKey:"T-bond_I",stackId:"1",stroke:v["T-bond_I"],fill:v["T-bond_I"],children:Object(S.jsx)(ge.a,{dataKey:"Total",position:"top",fontSize:10,formatter:function(e){return g.number2commadStringWithIntl(e)}})})]})})})]})},ye=function(e){return Object(S.jsxs)(k.d,{children:[Object(S.jsx)(k.b,{path:"/auth/register",render:function(e){return Object(S.jsx)(F,Object(h.a)({},e))}}),Object(S.jsx)(k.b,{path:"/auth/login",render:function(e){return Object(S.jsx)(P,Object(h.a)({},e))}}),Object(S.jsx)(k.b,{path:"/d3/bubbles",render:function(e){return Object(S.jsx)(Z,Object(h.a)({},e))}}),Object(S.jsx)(k.b,{path:"/youtube-search",render:function(e){return Object(S.jsx)(te,Object(h.a)({},e))}}),Object(S.jsx)(k.b,{path:"/trade-history",render:function(e){return Object(S.jsx)(ve,Object(h.a)({},e))}}),Object(S.jsx)(k.b,{exact:!0,path:"/",render:function(e){return Object(S.jsx)(D,Object(h.a)({},e))}}),Object(S.jsx)(k.b,{render:function(e){return Object(S.jsx)(k.a,{to:"/"})}})]})};var ke=function(){var e=r.a.useReducer((function(e,t){return Object(h.a)(Object(h.a)({},e),t)}),v),t=Object(j.a)(e,2),n=t[0],a=t[1],c=r.a.useState([]),o=Object(j.a)(c,2),s=o[0],i=o[1],l=r.a.useState(!1),u=Object(j.a)(l,2),f=u[0],m=u[1];function O(){return(O=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("/util/check");case 3:m(!0),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("App.checkServer",e.t0),m(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(e){return k.apply(this,arguments)}function k(){return(k=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i((function(e){if(!e.length)return e;var t=e.slice();return t.shift(),t})),s.length){e.next=5;break}return e.next=4,x.delay(200);case 4:document.getElementsByTagName("body")[0].classList.remove("overflow-hidden");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(b.a)(d.a.mark((function e(t){var n,a,r,c,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Modal,a=t.props,r=void 0===a?{}:a,c=t.onConfirm,o=void 0===c?function(){}:c,l=t.onCancel,u=void 0===l?function(){}:l,e.abrupt("return",new Promise((function(e,t){s.length||document.getElementsByTagName("body")[0].classList.add("overflow-hidden");i((function(t){var a=t.slice();return a.push(Object(S.jsx)(n,Object(h.a)(Object(h.a)({},r),{},{onConfirm:function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:return t.next=4,g();case 4:e(!0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onCancel:function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u();case 2:return t.next=4,g();case 4:e(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}))),a}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){!function(){O.apply(this,arguments)}()}),[]),Object(S.jsx)(p.a,{children:Object(S.jsx)(y.Provider,{value:Object.assign({},n,{setState:a,pushMessageModal:function(e){return w.apply(this,arguments)}}),children:Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)(T,{modals:s,closeCurrentModal:g}),Object(S.jsxs)("nav",{className:"d-block d-sm-none position-fixed w-100",children:[Object(S.jsx)("div",{className:"navbar navbar-dark bg-dark",children:Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarToggleExternalContent","aria-controls":"navbarToggleExternalContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(S.jsx)("span",{className:"navbar-toggler-icon"})})})}),Object(S.jsx)("div",{className:"collapse bg-dark",id:"navbarToggleExternalContent",children:Object(S.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto fw-bold",style:{minHeight:"".concat(100,"vh")},children:[f&&Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/auth/login",className:"nav-link fw-bold",children:"\ub85c\uadf8\uc778"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/auth/register",className:"nav-link fw-bold",children:"\ud68c\uc6d0\uac00\uc785"})})]}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/d3/bubbles",className:"nav-link fw-bold",children:"D3"})}),Object(S.jsx)("li",{className:"ps-2",children:Object(S.jsx)(p.b,{to:"/d3/bubbles",className:"nav-link fw-bold",style:{fontSize:"".concat(.875,"rem")},children:"Bubbles"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/youtube-search",className:"nav-link fw-bold",children:"Youtube Search"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/trade-history",className:"nav-link fw-bold",children:"Trade History"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/",className:"nav-link fw-bold",children:"TEST"})})]})})]}),Object(S.jsx)("div",{className:"d-block d-sm-none",style:{height:"".concat(48.5,"px")}}),Object(S.jsxs)("div",{className:"d-flex",children:[Object(S.jsx)("aside",{className:"flex-shrink-0 d-none d-sm-block overflow-auto bg-dark",style:{width:"".concat(16,"em"),height:"".concat(100,"vh")},children:Object(S.jsx)("nav",{children:Object(S.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto fw-bold",children:[f&&Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/auth/login",className:"nav-link fw-bold",children:"\ub85c\uadf8\uc778"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/auth/register",className:"nav-link fw-bold",children:"\ud68c\uc6d0\uac00\uc785"})})]}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/d3/bubbles",className:"nav-link fw-bold",children:"D3"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/d3/bubbles",className:"nav-link fw-bold ps-4",style:{fontSize:"".concat(.875,"rem")},children:"Bubbles"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/youtube-search",className:"nav-link fw-bold",children:"Youtube Search"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{to:"/trade-history",className:"nav-link fw-bold",children:"Trade History"})}),Object(S.jsx)("li",{children:Object(S.jsx)(p.b,{exact:!0,to:"/",className:"nav-link fw-bold",children:"TEST"})})]})})}),Object(S.jsxs)("main",{id:"main",className:"flex-fill overflow-auto",style:{height:"".concat(100,"vh")},children:[Object(S.jsx)(ye,{}),Object(S.jsx)("div",{style:{height:"".concat(20,"vh")}})]})]})]})})})};o.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ke,{})}),document.getElementById("root")),s()}},[[431,1,2]]]);
//# sourceMappingURL=main.c1415e9a.chunk.js.map
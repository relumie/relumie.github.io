{"version":3,"sources":["reportWebVitals.js","utils/util_common.js","utils/util_html.js","utils/util_converter.js","utils/util_sheet.js","components/contexts.js","styles/cs.js","components/modals/modal_wrapper.js","components/modals/modal_alert.js","components/views/v_main.js","api/api.js","components/views/auth/v_register.js","utils/util_api.js","components/views/auth/v_login.js","components/fragments/bubbles/tooltip.js","components/fragments/bubbles/bubbles.js","components/fragments/bubbles/grouping_picker.js","components/fragments/bubbles/year_titles.js","components/views/d3/v_bubbles.js","components/views/v_youtube_search.js","utils/util_validator.js","components/views/recharts/rechart_alpha.js","components/views/recharts/rechart_total_asset.js","components/views/v_trade_history.js","components/views/recharts/rechart_alpha_v1.js","components/views/recharts/rechart_arbitrage.js","components/views/recharts/rechart_day_trade.js","components/views/recharts/rechart_total_asset_v1.js","components/views/v_trade_history_v1.js","components/views/recharts/rechart_day_trade_3min.js","components/views/v_day_trades.js","components/routers/main_routes.js","components/app.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","UtilCommon","ms","Promise","resolve","setTimeout","Math","floor","random","toString","padStart","col","amt","replace","color","min","max","parseInt","substr","UtilHtml","e","callback","window","event","keyCode","which","UtilConverter","number","minimumFractionDigits","options","formatter","Intl","NumberFormat","format","toFixed","UtilSheet","excelSerialDate","excelSerialTime","Date","UTC","app_state_default","isWideMode","AppState","React","createContext","cs","classNames","bind","styles","ModalWrapper","props","useState","visible","setVisible","opacity","setOpacity","modals","setModals","useEffect","animation_duration","a","delay","length","showModal","hideModal","className","onClick","closeCurrentModal","defaultProps","console","log","ModalAlert","style","maxHeight","overflow","type","onCancel","whiteSpace","lineBreak","width","maxWidth","message","onConfirm","VMain","Consumer","state","pushMessageModal","Modal","modal_result","JSON","stringify","api","axios","create","baseURL","process","timeout","headers","interceptors","request","use","config","response","error","reject","status","url","params","data","VRegister","axios_cancel_source","CancelToken","source","cancel","app_state","useContext","login_id","password","password_confirm","email","form_data","setFormData","handleInput","name","target","value","submit","preventDefault","post","cancelToken","token","result","onSubmit","onChange","placeholder","UtilApi","errorMessageMap","defaultErrorMessageMap","Object","assign","input","toLowerCase","errors","keys","i","key","indexOf","VLogin","res","content","auth","isCancel","translateErrorMessages","tooltip","tooltipId","tt","d3","append","attr","hideTooltip","updatePosition","ttw","tth","wscrX","scrollX","wscrY","scrollY","curX","document","getElementById","clientX","pageX","curY","clientY","pageY","ttleft","xOffset","innerWidth","tttop","yOffset","showTooltip","html","floatingTooltip","fillColor","domain","range","Bubbles","shouldComponentUpdate","g","forceStrength","center","simulation","velocityDecay","force","strength","x","y","charge","on","ticked","stop","d","this","radius","selectAll","nextProps","renderBubbles","groupByYear","regroupBubbles","bubbles","id","exit","remove","enter","classed","group","darker","showDetail","hideDetail","transition","duration","nodes","alpha","restart","yearCenters","year","ref","setState","onRef","Component","GroupingPicker","onBtnClick","onChanged","active","YearsTitles","map","fontSize","textAnchor","alignmentBaseline","BubbleChart","height","children","VBubbles","setData","grouping","setGrouping","d3Params","setD3Params","documentElement","scrollWidth","scrollHeight","2008","2009","2010","rawData","max_amount","total_amount","findRadius","exponent","grant_title","org","organization","start_year","sort","b","createNodes","n_grouping","VYoutubeSearch","query","pageToken","bannedChannels","searchInfo","setSearchInfo","list","setList","history","setHistory","last_history","localStorage","getItem","parse","requestSearch","lastHistory","slice","pop","get","q","part","fields","maxResults","order","result_list","bannedChannelsList","split","channelTitle","trim","nHistory","push","setItem","nextPageToken","datum","nList","items","filter","item","title","he","decode","snippet","concat","h","top","onKeyDown","searchEnter","arr","videoId","href","rel","src","alt","nBannedChannels","moment","UtilValidator","hasAnyValue","_colors_map","lightenDarkenColor","makeRandomColor","RechartAlpha","bottom","_domain","setDomain","left","right","_refArea","setRefArea","_hoverIndex","setHoverIndex","_purified_data","setPurifiedData","_strokeWidths","setStrokeWidths","_reviseData","useCallback","from","to","initial_values","purified_data","return_of_portfolio","is_selected_range","date","parseFloat","background","_zoom","ceil","getAxisYDomain","AlphaTooltip","payload","label","payload_return_of_portfolio","colSpan","textAlign","number2commadStringWithIntl","renderIntermittentLabel","offset","index","fontWeight","userSelect","ResponsiveContainer","ComposedChart","onMouseDown","activeLabel","onMouseMove","activeTooltipIndex","onMouseUp","_zoomOut","onMouseLeave","margin","CartesianGrid","strokeDasharray","Tooltip","Legend","align","verticalAlign","iconSize","wrapperStyle","onMouseEnter","o","dataKey","XAxis","allowDataOverflow","angle","tickSize","tickMargin","padding","YAxis","yAxisId","tickFormatter","orientation","position","ticks","Line","stroke","strokeWidth","animationDuration","LabelList","dot","x1","y1","x2","y2","stopColor","stopOpacity","Area","fillOpacity","fill","ReferenceLine","ReferenceArea","strokeOpacity","wordBreak","RechartTotalAsset","_viewPort","_setViewPort","_setPurifiedData","AssetRatioTooltip","percent","reverse","number2shortenString","AreaChart","defaultShowTooltip","dataMax","price","stackId","v","VTradeHistory","_total_asset_data","setTotalAssetData","_alpha_data","setAlphaData","_refPricesFileForm","useRef","_parseData","total_asset_data","alpha_data","note_data","forEach","sheetName","row","serialDateToJSDate","date_string","assets","percentages","local_data","removeItem","location","reload","open","accept","getMilliseconds","reader","FileReader","onload","fdata","read_buffer","xlsx","read","SheetNames","data_rows","utils","sheet_to_json","Sheets","current","reset","readAsBinaryString","files","htmlFor","RechartAlphaV1","initial_return_of_asset","initial_return_of_day_trade","payload_return_of_asset","payload_return_of_daytrade","RechartArbitrage","accumulation","min_traded_volume","max_trade_volume","min_count","max_count","ArbitrageTooltip","payloads","total_arbitrage","total_color","payload_accumulation","Bar","RechartDayTrade","payload_price","payload_avg_price","payload_buy","payload_sell","full_payload","Fragment","CountDot","cx","cy","count","size","viewBox","r","dataMin","ZAxis","unit","zAxisId","Scatter","shape","legendType","RechartTotalAssetV1","VTradeHistoryV1","_algorithm_trade_data","setAlgorithmTradeData","_selected_algorithm_trade_data_name","setSelectedAlgorithmTradeDataName","_arbitrage_data","setArbitrageData","_selected_algorithm_trade_data","algorithm_trade_data","arbitrage_data_pre","arbitrage_data","alpha_data_pre","safety_asset_ratio","getPercentage","arbitrage","buy_price","sell_price","buy_volume","sell_volume","a_price","checked","RechartDayTrade3min","payload_rsi","isAnimationActive","VDayTrades","_data","_setData","_refDayTradeFileForm","raw_data","data_pre","getMinutes","setMinutes","date_keys","date_key","date_time","last_price","last_rsi","rsi","MainRoutes","path","render","exact","App","useReducer","prev_state","new_state","message_modals","setMessageModals","isServerOn","setIsServerOn","closeMessageModal","p_message_modals","n_message_modals","shift","getElementsByTagName","classList","add","checkServer","Provider","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","minHeight","zIndex","borderRadius","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.4d23e584.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","class UtilCommon {\r\n  static async delay(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n\r\n  static makeRandomColor() {\r\n    return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');\r\n  }\r\n\r\n  static lightenDarkenColor(col, amt) {\r\n    return '#' + col.replace(/^#/, '').replace(/../g, color => ('0'+Math.min(255, Math.max(0, parseInt(color, 16) + amt)).toString(16)).substr(-2));\r\n  }\r\n}\r\nexport default UtilCommon;","class UtilHtml {\r\n  static searchEnter(e, callback) {\r\n    if (!e)\r\n      e = window.event;\r\n    const key = e.keyCode ? e.keyCode : e.which;\r\n    if (key === 13) {\r\n      callback();\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n}\r\nexport default UtilHtml;","class UtilConverter {\r\n  static number2commadStringWithIntl(number, minimumFractionDigits = null) {\r\n    try {\r\n      var options = {};\r\n      if (minimumFractionDigits !== void 0 || minimumFractionDigits !== null) {\r\n        options[\"minimumFractionDigits\"] = minimumFractionDigits;\r\n      }\r\n      var formatter = new Intl.NumberFormat(\"en-US\", options);\r\n      return formatter.format(number);\r\n    } catch (e) {\r\n      return number;\r\n    }\r\n  }\r\n\r\n  static number2shortenString(number) {\r\n    if (number >= 1000000000)\r\n      return (Math.floor(number * 0.0000001) * 0.01).toFixed(2) + 'B';\r\n\r\n    if (number >= 1000000)\r\n      return (Math.floor(number * 0.0001) * 0.01).toFixed(2) + 'M';\r\n  }\r\n}\r\nexport default UtilConverter;","class UtilSheet {\r\n  static serialDateToJSDate(excelSerialDate, excelSerialTime = 0) {\r\n    return new Date(Date.UTC(0, 0, excelSerialDate - 1, -9, 0, 24 * excelSerialTime * 60 * 60)); // time-zone -9\r\n  }\r\n}\r\nexport default UtilSheet;","import React from 'react';\r\n\r\nconst app_state_default = {\r\n  isWideMode: false,\r\n};\r\nconst AppState = React.createContext(app_state_default);\r\n\r\nexport {\r\n  AppState, app_state_default,  \r\n};","import classNames from 'classnames/bind';\r\nimport styles from './_styles.scss';\r\nconst cs = classNames.bind(styles);\r\nexport default cs;","import React, { useEffect } from 'react';\r\nimport cs from '../../styles/cs';\r\nimport UtilCommon from '../../utils/util_common';\r\n\r\nconst ModalWrapper = (props) => {\r\n  const [visible, setVisible] = React.useState(false);\r\n  const [opacity, setOpacity] = React.useState(false);\r\n  const [modals, setModals] = React.useState([]);\r\n\r\n  useEffect(() => {\r\n    async function showModal(animation_duration) {\r\n      setOpacity(false);\r\n      setVisible(true);\r\n      setModals(props.modals);\r\n      await UtilCommon.delay(animation_duration);\r\n      setOpacity(true);\r\n    };\r\n\r\n    async function hideModal(animation_duration) {\r\n      setOpacity(false);\r\n      await UtilCommon.delay(animation_duration);\r\n      setVisible(false);\r\n      setModals(props.modals);\r\n    }\r\n\r\n    if (props.modals.length > modals.length)\r\n      showModal(100);\r\n    else if (props.modals.length < modals.length)\r\n      hideModal(200);\r\n\r\n  }, [props.modals, modals]);\r\n\r\n  if (!modals.length)\r\n    return null;\r\n\r\n  return ( \r\n    <div className={cs({ 'modal-wrapper': true, visible, opacity })}>\r\n      <div className=\"modal-wrapper-backdrop\" onClick={props.closeCurrentModal}/>\r\n      <div className=\"modal-wrapper-container\">\r\n        {modals[0]}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nModalWrapper.defaultProps = {\r\n  modals: [],\r\n  closeCurrentModal: () => console.log('closeCurrentModal() is not defined.')  \r\n}\r\n \r\nexport default ModalWrapper;","const ModalAlert = (props) => {\r\n  return ( \r\n    <div style={{ maxHeight: `${80}vh`, overflow: 'auto' }}>\r\n      <div className=\"text-end pt-2 pe-2\">\r\n        <button type='button' className=\"btn-close\" onClick={props.onCancel} />\r\n      </div>\r\n      <div className=\"py-3\" style={{whiteSpace: 'pre-wrap', lineBreak: \"anywhere\", width: `${480}px`, maxWidth: `${90}vw`}}>\r\n        {props.message}\r\n      </div>\r\n      <div className=\"text-end\">\r\n        <button type='button' className=\"btn btn-primary text-light fw-bold rounded\" onClick={props.onConfirm}>확인</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nModalAlert.defaultProps = {\r\n  message: 'NO MESSAGE',\r\n  onConfirm: () => {},\r\n  onCancel : () => {},\r\n}\r\n \r\nexport default ModalAlert;","import { AppState } from \"../contexts\";\r\nimport { ModalAlert } from \"../modals\";\r\n\r\nconst VMain = () => {\r\n  return (\r\n    <div>\r\n      <div>\r\n        Here's main\r\n      </div>\r\n      <br/>\r\n\r\n      <AppState.Consumer>\r\n        {state => (\r\n          <div style={{ whiteSpace: 'pre-wrap' }}>\r\n            <div>\r\n              <button type='button' onClick={async e => {\r\n                const modal_result = await state.pushMessageModal({\r\n                  Modal: ModalAlert,\r\n                  props: {\r\n                    message: '테스트 메세지입니다.'\r\n                  },\r\n                  onConfirm: () => { console.log('CONFIRM'); },\r\n                  onCancel: () => { console.log('CANCEL 73473'); }\r\n                });\r\n                console.log('MODAL_CONFIRMED? : ' + modal_result);\r\n                if (modal_result === false)\r\n                  return;\r\n                await state.pushMessageModal({\r\n                  Modal: ModalAlert,\r\n                  props: {\r\n                    message: '테스트 메세지입니다. 2'\r\n                  },\r\n                  onConfirm: () => { console.log('CONFIRM'); },\r\n                  onCancel: () => { console.log('CANCEL 52374'); }\r\n                });\r\n              }}>\r\n                PUSH MODAL\r\n              </button>\r\n            </div>\r\n            <div>\r\n              {JSON.stringify(state, '', 2)}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </AppState.Consumer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VMain;","import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: `${process.env.REACT_APP_SERVER_API}/api`,\r\n  timeout: 3000,\r\n  headers: {\r\n    'content-type': 'application/json'\r\n  },\r\n});\r\n\r\n\r\napi.interceptors.request.use(function (config) {\r\n  // var auth = DataAuth.get();\r\n  // if (!auth?.value?.token)\r\n  //   return config;\r\n  \r\n  // config.headers['x-api-key'] = auth.value.token;\r\n  return config;\r\n});\r\n\r\napi.interceptors.response.use(response => {\r\n  return response;\r\n}, error => {\r\n  /* pattern_reference: Axios Handle Errors (https://www.npmjs.com/package/axios#handling-errors) */\r\n  if (error.response) {\r\n    // The request was made and the server responded with a status code\r\n    // that falls out of the range of 2xx\r\n    // console.log(error.response.data);\r\n    // console.log(error.response.status);\r\n    // console.log(error.response.headers);\r\n    return Promise.reject({\r\n      status : error.response.status,\r\n      headers: error.config.headers,\r\n      url    : error.config.baseURL + error.config.url,\r\n      params : error.config.data,\r\n      ...error.response.data // contain message on general\r\n    });\r\n  } else if (error.request) {\r\n    // The request was made but no response was received\r\n    // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\r\n    // http.ClientRequest in node.js\r\n    // console.log(error.request);\r\n    return Promise.reject({\r\n      status : error.request.status,\r\n      headers: error.config.headers,\r\n      url    : error.config.baseURL + error.config.url,\r\n      params : error.config.data,\r\n      message: error.message\r\n    });\r\n  } else {\r\n    // Something happened in setting up the request that triggered an Error\r\n    return Promise.reject(error);\r\n  }\r\n});\r\n\r\nexport default api;","import axios from 'axios';\r\nimport React, { useContext, useEffect } from 'react';\r\nimport api from '../../../api/api';\r\nimport { AppState } from '../../../components/contexts';\r\nimport { ModalAlert } from '../../modals';\r\n\r\nconst VRegister = (props) => {\r\n  let axios_cancel_source = axios.CancelToken.source();\r\n  useEffect(() => () => axios_cancel_source.cancel(), [ axios_cancel_source ]);\r\n\r\n  const app_state = useContext(AppState);\r\n\r\n  const [form_data, setFormData] = React.useState({login_id: '', password: '', password_confirm: '', email: ''});\r\n\r\n  \r\n  const handleInput = (e) => {\r\n    let name = e.target.name;\r\n\r\n    setFormData(state => {\r\n      return {\r\n        ...state,\r\n        [name]: e.target.value\r\n      };\r\n    });\r\n  };\r\n\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      let result = await api.post('/auth/register', {\r\n        login_id: form_data['login_id'],\r\n        password: form_data['password'],\r\n        '#email': form_data['email'],\r\n      }, {\r\n        cancelToken: axios_cancel_source.token\r\n      })\r\n      \r\n      await app_state.pushMessageModal({\r\n        Modal: ModalAlert,\r\n        props: {\r\n          message: '가입되었습니다'\r\n        },\r\n        onConfirm: () => { console.log('CONFIRM'); },\r\n        onCancel: () => { console.log('CANCEL 52374'); }\r\n      })\r\n\r\n      console.log(result)\r\n    } catch (e) {\r\n      console.log(e);      \r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={submit}>\r\n      <div className=\"mx-auto w-100p\" style={{width: `${100}%`, maxWidth: `${20}em`}}>\r\n        <input type=\"text\"     name=\"login_id\"         value={form_data['login_id']}         onChange={handleInput} placeholder=\"ID\"/>\r\n        <input type=\"password\" name=\"password\"         value={form_data['password']}         onChange={handleInput} placeholder=\"PASSWORD\"/>\r\n        <input type=\"password\" name=\"password_confirm\" value={form_data['password_confirm']} onChange={handleInput} placeholder=\"CONFIRM PASSWORD\"/>\r\n        <input type=\"email\"    name=\"email\"            value={form_data['email']}            onChange={handleInput} placeholder=\"EMAIL\"/>\r\n        <div>\r\n          <input type=\"submit\" value=\"REGISTER\"/>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\n \r\nexport default VRegister;","class UtilApi {\r\n  /**\r\n   * \r\n   * @param {{message: string}} error API error\r\n   * @param {{error_message: string}} errorMessageMap The value is translated message.\r\n   */\r\n  static translateErrorMessages(error = {}, errorMessageMap = {}) {\r\n    if (!error?.message)\r\n      return;\r\n\r\n    const defaultErrorMessageMap = {\r\n      'SequelizeDatabaseError': 'DB 구문 에러.\\n관리자에게 문의해주세요',\r\n      'timeout of': '서버 응답시간이 초과되었습니다.\\n다시 시도해주세요.'\r\n    };\r\n    \r\n    errorMessageMap = Object.assign(defaultErrorMessageMap, errorMessageMap);\r\n\r\n    const input = error.message.toLowerCase();\r\n    const errors = Object.keys(errorMessageMap);\r\n    for (let i = 0; i < errors.length; ++i) {\r\n      const key = errors[i];\r\n      if (input.indexOf(key.toLowerCase()) >= 0)\r\n        return errorMessageMap[key];\r\n    }\r\n    return;\r\n  }\r\n}\r\nexport default UtilApi;","import axios from 'axios';\r\nimport React, { useContext, useEffect } from 'react';\r\nimport api from '../../../api/api';\r\nimport { AppState } from '../../../components/contexts';\r\nimport UtilApi from '../../../utils/util_api';\r\nimport { ModalAlert } from '../../modals';\r\n\r\nconst VLogin = (props) => {\r\n  let axios_cancel_source = axios.CancelToken.source();\r\n  useEffect(() => () => axios_cancel_source.cancel(), [ axios_cancel_source ]);\r\n\r\n  const app_state = useContext(AppState);\r\n\r\n  const [form_data, setFormData] = React.useState({login_id: '', password: '', password_confirm: '', email: ''});\r\n\r\n  \r\n  const handleInput = (e) => {\r\n    let name = e.target.name;\r\n\r\n    setFormData(state => {\r\n      return {\r\n        ...state,\r\n        [name]: e.target.value\r\n      };\r\n    });\r\n  };\r\n\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      const auth = await api.post('/auth/login', {\r\n        login_id: form_data['login_id'],\r\n        password: form_data['password']\r\n      }, {\r\n        cancelToken: axios_cancel_source.token\r\n      })\r\n        .then(res => res?.data?.content)\r\n      \r\n      console.log(auth)\r\n      \r\n      await app_state.pushMessageModal({\r\n        Modal: ModalAlert,\r\n        props: {\r\n          message: '로그인 성공'\r\n        },\r\n        onConfirm: () => { console.log('CONFIRM'); },\r\n        onCancel: () => { console.log('CANCEL 52374'); }\r\n      })\r\n    } catch (e) {\r\n      if (axios.isCancel(e)) {\r\n        console.log('Canceled.');\r\n        return;\r\n      }\r\n\r\n      const message = UtilApi.translateErrorMessages(e, {\r\n        'no user': '해당하는 유저가 없습니다.'\r\n      });\r\n      await app_state.pushMessageModal({\r\n        Modal: ModalAlert,\r\n        props: {\r\n          message\r\n        },\r\n        onConfirm: () => { console.log('CONFIRM'); },\r\n        onCancel: () => { console.log('CANCEL 52374'); }\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={submit}>\r\n      <div className=\"mx-auto w-100p py-3\" style={{width: `${100}%`, maxWidth: `${20}em`}}>\r\n        <input type=\"text\"     className=\"form-control\"  name=\"login_id\" value={form_data['login_id']} onChange={handleInput} placeholder=\"ID\"/>\r\n        <input type=\"password\" className=\"form-control\"  name=\"password\" value={form_data['password']} onChange={handleInput} placeholder=\"PASSWORD\"/>\r\n        <div>\r\n          <input type=\"submit\" value=\"LOGIN\" className=\"btn btn-primary w-100\" />\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\n \r\nexport default VLogin;","import * as d3 from 'd3';\r\nimport './tooltip.scss';\r\n\r\n\r\nfunction floatingTooltip(tooltipId, width) {\r\n  // Local variable to hold tooltip div for manipulation in other functions.\r\n  const tt = d3.select('body').append('div')\r\n    .attr('class', 'bubble-tooltip')\r\n    .attr('id', tooltipId)\r\n    .style('pointer-events', 'none');\r\n\r\n  if (width)\r\n    tt.style('width', width)\r\n\r\n  hideTooltip(); // initially hide\r\n    \r\n  function hideTooltip () {\r\n    tt.style('opacity', 0.0);\r\n  }\r\n\r\n  function showTooltip (content, event) {\r\n    tt.style('opacity', 1.0)\r\n      .html(content)\r\n\r\n    updatePosition(event);\r\n  }\r\n\r\n  function updatePosition(event) {\r\n    const xOffset = 20;\r\n    const yOffset = 10;\r\n\r\n    const ttw = tt.style('width');\r\n    const tth = tt.style('height');\r\n\r\n    const wscrX = window.scrollX;\r\n    const wscrY = window.scrollY;\r\n\r\n    const curX = (document.getElementById) ? event.clientX + wscrX : event.pageX;\r\n    const curY = (document.getElementById) ? event.clientY + wscrY : event.pageY;\r\n\r\n    let ttleft = ((curX - wscrX + xOffset * 2 + ttw) > window.innerWidth)\r\n      ? curX - ttw - xOffset * 2 \r\n      : curX + xOffset;\r\n    if (ttleft < wscrX + xOffset)\r\n      ttleft = wscrX + xOffset;\r\n\r\n    let tttop = ((curY - wscrY + yOffset * 2 + tth) > window.innerWidth)\r\n      ? curY - tth - yOffset * 2 \r\n      : curY + yOffset;\r\n    if (tttop < wscrY + yOffset)\r\n      tttop = wscrY + yOffset;\r\n\r\n    tt\r\n      .style('top', `${tttop}px`)\r\n      .style('left', `${ttleft}px`);    \r\n  }\r\n\r\n  return {\r\n    showTooltip,\r\n    hideTooltip,\r\n    updatePosition,\r\n  };\r\n}\r\n\r\nconst tooltip = floatingTooltip('gates_tooltip', 240);\r\nexport default tooltip;","import React from 'react'\r\nimport * as d3 from 'd3';\r\nimport tooltip from './tooltip';\r\n\r\nconst fillColor = d3.scaleOrdinal().domain(['low', 'medium', 'high']).range(['#525b7a', '#beccde', '#5aa2bc']);\r\n\r\nclass Bubbles extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { \r\n      g: null\r\n    }\r\n\r\n    const { forceStrength, center } = this.props\r\n    this.simulation = d3.forceSimulation()\r\n      .velocityDecay(0.2)\r\n      .force('x', d3.forceX().strength(forceStrength).x(center.x))\r\n      .force('y', d3.forceY().strength(forceStrength).y(center.y))\r\n      .force('charge', d3.forceManyBody(this.charge.bind(this)))\r\n      .on('tick', this.ticked.bind(this))\r\n      .stop()\r\n  }\r\n\r\n  charge(d) {\r\n    return -this.props.forceStrength * (d.radius ** 2.0)\r\n  }\r\n\r\n  ticked() {\r\n    this.state.g.selectAll('.bubble')\r\n      .attr('cx', d => d.x)\r\n      .attr('cy', d => d.y)\r\n  }\r\n\r\n\r\n  \r\n  shouldComponentUpdate = () => false\r\n\r\n  // TODO: replace it with other method (deprecated)\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.data !== this.props.data)\r\n      this.renderBubbles(nextProps.data)\r\n    if (nextProps.groupByYear !== this.props.groupByYear)\r\n      this.regroupBubbles(nextProps.groupByYear)\r\n  }\r\n  \r\n\r\n\r\n  renderBubbles(data) {\r\n    const bubbles = this.state.g.selectAll('.bubble')\r\n      .data(data, d => d.id)\r\n\r\n    // EXIT\r\n    bubbles.exit().remove()\r\n\r\n    // ENTER\r\n    const bubblesE = bubbles.enter().append('circle')\r\n      .classed('bubble', true)\r\n      .attr('r', 0)\r\n      .attr('cx', d => d.x)\r\n      .attr('cy', d => d.y)\r\n      .attr('fill', d => fillColor(d.group))\r\n      .attr('stroke', d => d3.rgb(fillColor(d.group)).darker())\r\n      .attr('stroke-width', 2)\r\n      // TODO: ADD TOOLTIP\r\n      .on('mouseover', showDetail)\r\n      .on('mouseout', hideDetail)\r\n\r\n      bubblesE.transition().duration(2000)\r\n        .attr('r', d => d.radius)\r\n        .on('end', () => {\r\n          this.simulation.nodes(data)\r\n            .alpha(1)\r\n            .restart()\r\n        })\r\n  }\r\n  \r\n  regroupBubbles (groupByYear) {\r\n    const { forceStrength, yearCenters, center } = this.props;\r\n    if (groupByYear)\r\n      this.simulation\r\n        .force('x', d3.forceX().strength(forceStrength).x(d => yearCenters[d.year].x))\r\n        .force('y', d3.forceY().strength(forceStrength).y(d => yearCenters[d.year].y));        \r\n    else\r\n      this.simulation\r\n        .force('x', d3.forceX().strength(forceStrength).x(center.x))\r\n        .force('y', d3.forceY().strength(forceStrength).y(center.y));\r\n    \r\n    this.simulation.alpha(1).restart();\r\n  }\r\n\r\n\r\n  onRef (ref) {\r\n    this.setState({ g: d3.select(ref) }, () => this.renderBubbles(this.props.data))\r\n  }\r\n\r\n  render() {\r\n    return ( \r\n      <g ref={this.onRef.bind(this)} className=\"bubbles\" />\r\n    )\r\n  }\r\n}\r\n \r\nexport default Bubbles;\r\n\r\nexport function showDetail(d) {\r\n  d3.select(this).attr('stroke', 'black');\r\n\r\n  const content = `<span class=\"name\">Title: </span><span class=\"value\">${d.name}</span><br/>`\r\n    + `<span class=\"name\">Amount: </span><span class=\"value\">$${d.value}</span><br/>`\r\n    + `<span class=\"name\">Year: </span><span class=\"value\">${d.year}</span>`;\r\n\r\n  tooltip.showTooltip(content, d3.event);\r\n}\r\n\r\n\r\nexport function hideDetail(d) {\r\n  d3.select(this).attr('stroke', d3.rgb(fillColor(d.group)).darker());\r\n  \r\n  tooltip.hideTooltip();\r\n}","  \r\nimport React from 'react';\r\nimport './grouping_picker.scss';\r\n\r\nexport default class GroupingPicker extends React.Component {\r\n  onBtnClick = (event) => {\r\n    this.props.onChanged(event.target.name)\r\n  }\r\n  render() {\r\n    const { active } = this.props\r\n    return (\r\n      <div className=\"GroupingPicker\">\r\n        <button className={`button ${active === 'all' && 'active'}`} name=\"all\" onClick={this.onBtnClick}>All Grants</button>\r\n        <button className={`button ${active === 'year' && 'active'}`} name=\"year\" onClick={this.onBtnClick}>Grants By Year</button>\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default function YearsTitles({ yearCenters }) {\r\n  return (\r\n    <g className=\"yearsTitles\">\r\n      {\r\n        Object.keys(yearCenters).map(year =>\r\n          <text\r\n            key={year}\r\n            x={yearCenters[year].x}\r\n            y={50}\r\n            fontSize=\"35\"\r\n            textAnchor=\"middle\"\r\n            alignmentBaseline=\"middle\"\r\n          >\r\n            {\r\n              year\r\n            }\r\n          </text>)\r\n      }\r\n    </g>\r\n  )\r\n}","import React from 'react';\r\nimport * as d3 from 'd3';\r\nimport { Bubbles, GroupingPicker, YearsTitles } from '../../fragments';\r\n\r\n\r\n\r\n\r\n\r\nconst VBubbles = () => {\r\n  const [data, setData] = React.useState([]);\r\n  const [grouping, setGrouping] = React.useState('all');\r\n  const [d3Params, setD3Params] = React.useState({})\r\n\r\n  \r\n\r\n  const onGroupingChanged = (n_grouping) => setGrouping(n_grouping)\r\n  \r\n  React.useEffect(() => {\r\n    const width  = document.documentElement.scrollWidth // 960\r\n    const height = document.documentElement.scrollHeight - 49 // 640\r\n    const center = { x: width / 2, y: height / 2 }\r\n    const yearCenters = {\r\n      2008: { x: width / 4, y: height / 2 },\r\n      2009: { x: width / 2, y: height / 2 },\r\n      2010: { x: (3 / 4) * width, y: height / 2 },\r\n    }\r\n    setD3Params({ width, height, center, yearCenters })\r\n    \r\n    const createNodes = (rawData) => {\r\n      if (!width || !height)\r\n        return;\r\n  \r\n      const max_amount = d3.max(rawData, d => +d.total_amount);\r\n      const findRadius = d3.scalePow()\r\n        .exponent(0.5)\r\n        .range([2, 85])\r\n        .domain([0, max_amount]);\r\n  \r\n      let nodes = rawData.map(d => ({\r\n        id: d.id,\r\n        radius: findRadius(+d.total_amount),\r\n        value: +d.total_amount,\r\n        name: d.grant_title,\r\n        org: d.organization,\r\n        group: d.group,\r\n        year: d.start_year,\r\n        x: Math.random() * width,\r\n        y: Math.random() * height\r\n      }));\r\n  \r\n      // prevent occlusion of smaller nodes.\r\n      nodes.sort((a, b) => b.value - a.value);\r\n      \r\n      return nodes\r\n    }\r\n\r\n    d3.csv('/data/gates_money.csv', function (error, data) {\r\n      if (error) {\r\n        console.log('error', error);\r\n        return\r\n      }\r\n      let nodes = createNodes(data);\r\n      setData(nodes);\r\n    })\r\n      // .then((arr) => {\r\n      //   console.log(arr);\r\n      //   // setData(createNodes(arr));\r\n      // });\r\n  }, []);\r\n\r\n  return ( \r\n    <div id=\"view_bubble\" style={{ whiteSpace: 'pre-wrap', lineBreak: 'anywhere', height: `${100}%`, overflow: 'auto' }}>\r\n      <GroupingPicker onChanged={onGroupingChanged} active={grouping} />\r\n      {(d3Params.width && d3Params.height) && (\r\n        <BubbleChart width={d3Params.width} height={d3Params.height}>\r\n          <Bubbles data={data} forceStrength={0.08} center={d3Params.center} yearCenters={d3Params.yearCenters} groupByYear={grouping === 'year'} />\r\n          {grouping === 'year' && (\r\n            <YearsTitles width={d3Params.width} yearCenters={d3Params.yearCenters} />\r\n          )}\r\n        </BubbleChart>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nconst BubbleChart = ({width, height, children}) => {\r\n  return ( \r\n    <svg className=\"bubbleChart\" width={width} height={height}>\r\n      {children}\r\n    </svg>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default VBubbles;","import React from 'react';\r\nimport axios from 'axios';\r\nimport he from 'he';\r\nimport { UtilHtml } from '../../utils';\r\nimport moment from 'moment';\r\n\r\nconst VYoutubeSearch = () => {\r\n  const [searchInfo, setSearchInfo] = React.useState({query: '', pageToken: '', bannedChannels: ''});\r\n  const [list, setList] = React.useState([]);\r\n  const [history, setHistory] = React.useState([]); // {query: '', pageToken: '', bannedChannels: ''}\r\n\r\n  React.useEffect(() => {\r\n    let last_history = localStorage.getItem('youtube_history');\r\n    if (!last_history)\r\n      return;\r\n    \r\n    setHistory(JSON.parse(last_history));\r\n  }, [setHistory]);\r\n\r\n\r\n  const requestSearch = async (e) => {\r\n    let pageToken = searchInfo.pageToken;\r\n    if (history.length) {\r\n      const lastHistory = history.slice().pop();\r\n      if (\r\n        (lastHistory.query !== searchInfo.query) ||\r\n        (lastHistory.bannedChannels !== searchInfo.bannedChannels)\r\n      ) {\r\n        pageToken = '';\r\n      }\r\n    }\r\n\r\n    let result_list;\r\n    try {\r\n      // https://developers.google.com/youtube/v3/getting-started#quota\r\n      result_list = await axios.get('https://www.googleapis.com/youtube/v3/search', {\r\n        params: {\r\n          pageToken,\r\n          key: process.env.REACT_APP_GOOGLE_API_KEY,\r\n          q: searchInfo.query,\r\n          part: 'snippet',\r\n          fields: 'nextPageToken,items(id(videoId),snippet(channelTitle,title,publishTime,thumbnails(medium(url))))',\r\n          maxResults: 50,\r\n          order: 'date',\r\n          type: 'video'\r\n        }            \r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      return;\r\n    }\r\n\r\n    const bannedChannelsList = searchInfo.bannedChannels.split(',').map(channelTitle => channelTitle.trim());\r\n    \r\n    const nHistory = history.slice();\r\n    nHistory.push(searchInfo);\r\n    setHistory(nHistory);\r\n    localStorage.setItem('youtube_history', JSON.stringify(nHistory));\r\n    setSearchInfo({...searchInfo, pageToken: result_list.data.nextPageToken});\r\n\r\n    const keys = list.map(datum => datum['id']['videoId']);\r\n\r\n    const nList = result_list.data.items\r\n      .filter(item => {\r\n        if (bannedChannelsList.indexOf(item['snippet']['channelTitle']) >= 0)\r\n          return false;\r\n\r\n        if (!pageToken)\r\n          return true;\r\n\r\n        if (pageToken && keys.indexOf(item['id']['videoId']) >= 0)\r\n          return false;\r\n\r\n        return true;\r\n      })\r\n      .map(item => {\r\n        const title = he.decode(item['snippet']['title']);\r\n        return {\r\n          ...item,\r\n          snippet: {\r\n            ...item.snippet,\r\n            title\r\n          }\r\n        };\r\n      });\r\n    if (pageToken)\r\n      setList(list.concat(nList));\r\n    else\r\n      setList(nList);\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex\">\r\n      <div className=\"flex-shrink-0 d-none d-sm-block overflow-auto bg-gray text-light\" style={{ width: `${16}em`, height: `${100}vh` }}>\r\n        <nav>\r\n          <ul className=\"nav nav-pills flex-column mb-auto fw-bold\">\r\n            {history.map((h, i) => {\r\n              return (\r\n                <li key={i}>\r\n                  <button type=\"button\" className=\"btn btn-primary w-100\" onClick={e => setSearchInfo(h)}>\r\n                    {h.query}\r\n                  </button>\r\n                </li>\r\n              );\r\n            })}            \r\n          </ul>\r\n        </nav>\r\n      </div>\r\n      <div className=\"container-fluid overflow-scroll\" style={{height: \"100vh\"}}>\r\n        <div className=\"position-sticky\" style={{top: 0}}>\r\n          <div className=\"d-flex\">\r\n            <div>\r\n              <input type=\"text\" className=\"form-control\" \r\n                value={searchInfo.query} \r\n                onChange={e => setSearchInfo({...searchInfo, query: e.target.value})} \r\n                onKeyDown={e => UtilHtml.searchEnter(e, requestSearch)}\r\n              />\r\n            </div>\r\n            <button type=\"button\" className=\"btn btn-primary\"\r\n              onClick={requestSearch}\r\n            >\r\n              {list.length ? 'More' : 'Search'}\r\n            </button>\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            <div>\r\n              <input type=\"text\" className=\"form-control\"\r\n                value={searchInfo.bannedChannels}\r\n                onChange={e => setSearchInfo({ ...searchInfo, bannedChannels: e.target.value })}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* <div style={{height: \"64px\"}}></div> */}\r\n        <div className=\"row mt-5\">\r\n          {list.map((datum, i, arr) => {\r\n            const videoId = datum['id']['videoId'];\r\n            return (\r\n              <div key={videoId} className=\"col-3\">\r\n                  <div>\r\n                    <a href={`https://www.youtube.com/watch?v=${videoId}`} target=\"_blank\" rel=\"noreferrer\">\r\n                      <img src={datum['snippet']['thumbnails']['medium']['url']} alt={`tmb_${i}`} />\r\n                    </a>\r\n                  </div>\r\n                <div>{datum['snippet']['title']}</div>\r\n                <div className=\"text-end\">\r\n                  <span className=\"text-danger selectable tooltip\" onClick={e => {\r\n                    var nBannedChannels = (searchInfo['bannedChannels']) \r\n                      ? datum['snippet']['channelTitle'] + ','  + searchInfo['bannedChannels']\r\n                      : datum['snippet']['channelTitle']\r\n                    setSearchInfo({...searchInfo, bannedChannels: nBannedChannels})\r\n                  }}>\r\n                    {datum['snippet']['channelTitle']}\r\n                    <span className=\"tooltiptext\">Ban this Channel</span>\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-gray-500 text-end\" style={{fontSize: `${8}px`}}>\r\n                  {moment(datum['snippet']['publishTime']).format('YY.MM.DD HH:mm')}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n          \r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default VYoutubeSearch;","export default class UtilValidator {\r\n  static hasAnyValue = (value) => (value !== void 0) && (value !== null);\r\n}","import React from \"react\";\r\nimport { CartesianGrid, LabelList, Legend, Line, Area, ComposedChart, ReferenceArea, ReferenceLine, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { UtilCommon, UtilConverter } from \"../../../utils\";\r\nimport UtilValidator from \"../../../utils/util_validator\";\r\n\r\nconst _colors_map = {\r\n  \"return_of_portfolio\"       : '#000',\r\n  \"TQQQ\": UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"QQQ\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"VOO\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"VT\": UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"XRMI\": UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Ratio:Safety\" : \"#5AA8\",\r\n};\r\n\r\nconst RechartAlpha = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_domain, setDomain] = React.useState({top: 'dataMax + 1', bottom: 'dataMin - 1'});\r\n  const [_refArea, setRefArea] = React.useState({left: '', right: ''});\r\n  const [_hoverIndex, setHoverIndex] = React.useState();\r\n\r\n  const [_purified_data, setPurifiedData] = React.useState([]);\r\n  const [_strokeWidths, setStrokeWidths ] = React.useState({});\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let initial_values = {};\r\n    let purified_data = [];\r\n    let return_of_portfolio = 0;\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from) {\r\n        is_selected_range = true;\r\n        initial_values = {\r\n          'price_TQQQ' : datum['price_TQQQ'],\r\n          'price_QQQ'  : datum['price_QQQ'],\r\n          'price_VOO'  : datum['price_VOO'],\r\n          'price_VT'   : datum['price_VT'],\r\n          'price_XRMI' : datum['price_XRMI']\r\n        }\r\n      } else {\r\n        return_of_portfolio = (1 + return_of_portfolio) * (1 + datum['return_of_portfolio']) - 1\r\n      }\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n\r\n      // accumulation_of_return_of_portfolio = (datum['date'] === from) ? 0 : parseFloat((accumulation_of_return_of_portfolio + datum['return_of_portfolio']).toFixed(2));\r\n      purified_data.push({\r\n        date: datum['date'],\r\n        'return_of_portfolio' : parseFloat((return_of_portfolio * 100).toFixed(2)),\r\n        'TQQQ'         : parseFloat(((datum['price_TQQQ'] - initial_values['price_TQQQ']) * 100 / initial_values['price_TQQQ']).toFixed(2)),\r\n        'QQQ'          : parseFloat(((datum['price_QQQ' ] - initial_values['price_QQQ' ]) * 100 / initial_values['price_QQQ' ]).toFixed(2)),\r\n        'VOO'          : parseFloat(((datum['price_VOO' ] - initial_values['price_VOO' ]) * 100 / initial_values['price_VOO' ]).toFixed(2)),\r\n        'VT'           : parseFloat(((datum['price_VT'  ] - initial_values['price_VT'  ]) * 100 / initial_values['price_VT'  ]).toFixed(2)),\r\n        'XRMI'         : parseFloat(((datum['price_XRMI'] - initial_values['price_XRMI']) * 100 / initial_values['price_XRMI']).toFixed(2)),\r\n        'Ratio:Safety' : parseFloat(datum['ratio_safety']).toFixed(2),\r\n        'note': datum['note'],\r\n      });\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n  \r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n  \r\n\r\n  function getAxisYDomain(from, to, data) {\r\n    let [bottom, top] = [data[0]['return_of_portfolio'], data[0]['return_of_portfolio']];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      if (datum['return_of_portfolio'] > top) top = datum['return_of_portfolio'];\r\n      if (datum['return_of_portfolio'] < bottom) bottom = datum['return_of_portfolio'];\r\n\r\n      if (datum['VOO'] > top   ) top = datum['VOO'];\r\n      if (datum['VOO'] < bottom) bottom = datum['VOO'];\r\n\r\n      if (datum['QQQ'] > top) top = datum['QQQ'];\r\n      if (datum['QQQ'] < bottom) bottom = datum['QQQ'];\r\n\r\n      if (datum['TQQQ'] > top) top       = datum['TQQQ'];\r\n      if (datum['TQQQ'] < bottom) bottom = datum['TQQQ'];\r\n\r\n      if (datum['VT'] > top) top = datum['VT'];\r\n      if (datum['VT'] < bottom) bottom = datum['VT'];\r\n\r\n      if (datum['XRMI'] > top) top = datum['XRMI'];\r\n      if (datum['XRMI'] < bottom) bottom = datum['XRMI'];\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n    return [(Math.floor(bottom - 1) | 0), (Math.ceil(top + 1) | 0)];\r\n  };\r\n  \r\n  function _zoom() {\r\n    let { left, right } = _refArea;\r\n\r\n    if (left === right || right === '') {\r\n      setRefArea({\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    // yAxis domain\r\n    const [bottom, top] = getAxisYDomain(left, right, purified_data);\r\n\r\n    setRefArea({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    setDomain({\r\n      bottom,\r\n      top\r\n    });\r\n\r\n    setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    setRefArea({left: '', right: ''});\r\n    setDomain({top: 'dataMax + 1', bottom: 'dataMin - 1'});\r\n    setPurifiedData(purified_data);\r\n  }\r\n  \r\n\r\n  function _handleMouseEnterLegends(o) {\r\n    const { dataKey } = o;\r\n    setStrokeWidths({ ..._strokeWidths, [dataKey]: 3 });\r\n  };\r\n\r\n  function _handleMouseLeaveLegends(o) {\r\n    const { dataKey } = o;    \r\n    setStrokeWidths({ ..._strokeWidths, [dataKey]: 1 });\r\n  };\r\n\r\n\r\n\r\n  const AlphaTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n\r\n    const payload_return_of_portfolio    = payload.filter(payload => payload['name'] === 'Return of Portfolio')[0];\r\n    // const date = moment(label).format('YY.MM.DD');    \r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload_return_of_portfolio && (\r\n              <tr>\r\n                <td><p style={{ color: payload_return_of_portfolio['color'] }}>{`${payload_return_of_portfolio['name']}`}</p></td>\r\n                <td><p style={{ color: payload_return_of_portfolio['color'] }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_return_of_portfolio['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_return_of_portfolio['value'], 2).padStart(8, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload.map((payload, i) => {\r\n              if (payload['name'] === 'Return of Portfolio')\r\n                return null;\r\n\r\n              return (\r\n                <tr key={payload['name']}>\r\n                  <td><p style={{ color: payload['color'] }}>{`${payload['name']}`}</p></td>\r\n                  <td><p style={{ color: payload['color'] }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload['value'], 2).padStart(8, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  \r\n  const renderIntermittentLabel = (props) => {\r\n    const { x, y, offset, value, index, fontSize, fontWeight } = props;\r\n\r\n    if (index % 2 === 0)\r\n      return (\r\n        <g>\r\n          <text x={x} y={y - offset * 2} textAnchor=\"middle\" fontSize={fontSize} fontWeight={fontWeight}>{value}</text>\r\n        </g>\r\n      );\r\n    \r\n    return (\r\n      <g></g>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ userSelect: 'none' }}>\r\n        <ResponsiveContainer width=\"100%\" height={800}>\r\n            <ComposedChart\r\n              width={800}\r\n              height={800}\r\n              data={_purified_data}\r\n              onMouseDown={(e) => e && (_refArea.left !== e.activeLabel) && setRefArea({ left: e.activeLabel, right: _refArea['right'] })}\r\n              onMouseMove={(e) => {\r\n                if (e && UtilValidator.hasAnyValue(e.activeTooltipIndex))\r\n                  setHoverIndex(e.activeTooltipIndex);\r\n\r\n                if (e && _refArea.left && (_refArea.right !== e.activeLabel))\r\n                  setRefArea({ right: e.activeLabel, left: _refArea['left'] });\r\n              }}\r\n              onMouseUp={e => {\r\n                if (_refArea['left'] !== '' && _refArea['right'] === '')\r\n                  _zoomOut();\r\n                else\r\n                  _zoom();\r\n              }}\r\n              onMouseLeave={e => {setHoverIndex(void 0)}}\r\n              margin={{\r\n                top: 40,\r\n                right: 30,\r\n                left: 30,\r\n                bottom: 50,\r\n              }}\r\n            >\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <Tooltip content={<AlphaTooltip />} />\r\n              <Legend align=\"left\" verticalAlign=\"top\" iconSize={20} wrapperStyle={{top: 0}} onMouseEnter={_handleMouseEnterLegends} onMouseLeave={_handleMouseLeaveLegends}/>\r\n              <XAxis\r\n                allowDataOverflow\r\n                dataKey=\"date\"\r\n                fontSize={10}\r\n                angle={-40}\r\n                textAnchor=\"end\"\r\n                // verticalAnchor=\"middle\"\r\n                tickSize={4}\r\n                tickMargin={8}\r\n                padding={{ left: 50, right: 50 }}\r\n                // tickFormatter={(date) => {\r\n                //   if (date instanceof Date)\r\n                //     return moment(date).format('YY.MM.DD');\r\n                //   return date;\r\n                // }} \r\n              />\r\n              <YAxis\r\n                yAxisId=\"left\"\r\n                allowDataOverflow \r\n                domain={[_domain['bottom'], _domain['top'  ]]}\r\n                // padding={{ bottom: 50, top: 50 }}\r\n                tickFormatter={(value) => {\r\n                  return parseFloat(value.toFixed(2));\r\n                }}\r\n              />\r\n              <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: '%', position: 'center' }} fontSize={10} domain={[0, 100]} ticks={[0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]} />\r\n              <Line\r\n                yAxisId=\"left\"\r\n                type=\"natural\" dataKey={'return_of_portfolio'} name=\"Return of Portfolio\"\r\n                stroke={_colors_map['return_of_portfolio']} strokeWidth={2}\r\n                animationDuration={300}\r\n              >\r\n                <LabelList dataKey={'return_of_portfolio'} content={renderIntermittentLabel} fontWeight=\"bold\" />\r\n              </Line>             \r\n              \r\n              <Line yAxisId=\"left\" type=\"natural\" name={'TQQQ'} dataKey={'TQQQ'} stroke={_colors_map['TQQQ']} strokeWidth={_strokeWidths['TQQQ'] || 1} animationDuration={300} dot={false} />\r\n              <Line yAxisId=\"left\" type=\"natural\" name={'QQQ' } dataKey={'QQQ' } stroke={_colors_map['QQQ' ]} strokeWidth={_strokeWidths['QQQ' ] || 1} animationDuration={300} dot={false} />\r\n              <Line yAxisId=\"left\" type=\"natural\" name={'VOO' } dataKey={'VOO' } stroke={_colors_map['VOO' ]} strokeWidth={_strokeWidths['VOO' ] || 1} animationDuration={300} dot={false} />\r\n              <Line yAxisId=\"left\" type=\"natural\" name={'VT'} dataKey={'VT'} stroke={_colors_map['VT']} strokeWidth={_strokeWidths['VT'] || 2} animationDuration={300} dot={false} />\r\n              <Line yAxisId=\"left\" type=\"natural\" name={'XRMI'} dataKey={'XRMI'} stroke={_colors_map['XRMI']} strokeWidth={_strokeWidths['XRMI'] || 2} animationDuration={300} dot={false} />\r\n              \r\n\r\n              <defs>\r\n                <linearGradient id=\"colorSafetyAssetRatio\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <stop offset=\"20%\" stopColor={_colors_map['Ratio:Safety']} stopOpacity={0.8}/>\r\n                  <stop offset=\"75%\" stopColor={_colors_map['Ratio:Safety']} stopOpacity={0}/>\r\n                </linearGradient>\r\n              </defs>\r\n              <Area yAxisId=\"right\" type=\"monotone\" name={'Ratio:Safety'} dataKey={'Ratio:Safety'} stroke={_colors_map['Ratio:Safety']} fillOpacity={1} fill=\"url(#colorSafetyAssetRatio)\">\r\n                <LabelList dataKey={'Ratio:Safety'} fontSize={10} content={renderIntermittentLabel} />\r\n              </Area>\r\n              \r\n              <ReferenceLine yAxisId=\"left\" y={0} stroke=\"#888\" />\r\n\r\n              {_refArea['left'] && _refArea['right'] ? (\r\n                <ReferenceArea yAxisId=\"left\" x1={_refArea['left']} x2={_refArea['right']} strokeOpacity={0.3} />\r\n              ) : null}\r\n            </ComposedChart>\r\n          </ResponsiveContainer>\r\n      </div>\r\n\r\n      {UtilValidator.hasAnyValue(_hoverIndex) && _purified_data[_hoverIndex] && _purified_data[_hoverIndex]['note'] && (\r\n        <div\r\n          className=\"position-fixed p-3 bg-light rounded\" style={{top: 10, left: 10}}\r\n        >\r\n          <div className=\"fw-bold\">{_purified_data[_hoverIndex]['date']}</div>\r\n          <div style={{lineBreak: 'anywhere', whiteSpace: 'pre-wrap', wordBreak: 'break-all'}}>\r\n            {_purified_data[_hoverIndex]['note']}\r\n          </div>          \r\n        </div>\r\n      )}       \r\n    </div>\r\n  );\r\n}\r\n \r\nexport default RechartAlpha;","import React from \"react\";\r\nimport { Area, AreaChart, CartesianGrid, LabelList, Legend, ReferenceArea, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { UtilCommon, UtilConverter } from \"../../../utils\";\r\n\r\nconst _colors_map = {\r\n  \"3x\"       : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"cashlike\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"dividend\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"trade\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50)\r\n};\r\n\r\n\r\nconst RechartTotalAsset = (props) => {\r\n  const { data }  = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push(datum);\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  const AssetRatioTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload.map(datum => {\r\n              let percent = ((100 * datum['value']) / datum['payload']['total']).toFixed(2).padStart(5, ' ');\r\n              return (\r\n                <tr key={datum['name']}>\r\n                  <td><p style={{ color: datum.color }}>{`${datum.name}`}</p></td>\r\n                  <td><p style={{ color: datum.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: datum.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(datum['value']).padStart(14, ' ')} (${percent}%)`}\r\n                  </code></td>\r\n                </tr>\r\n              );                  \r\n            }).reverse()}\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            <tr>\r\n              <td><p className=\"fw-bolder\" style={{ color: 'black' }}>{`Total`}</p></td>\r\n              <td><p style={{ color: 'black' }}>{` :  `}</p></td>\r\n              <td className=\"text-end\"><code className=\"text-dark fw-bolder\" style={{ textAlign: \"end\", fontSize: `${14}px` }}>\r\n                {`￦ ${UtilConverter.number2commadStringWithIntl(payload[0]['payload']['total'])}`}\r\n              </code></td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n  \r\n  const renderIntermittentLabel = (props) => {\r\n    const { x, y, offset, value, index, fontSize, fontWeight } = props;\r\n\r\n    if (index % 2 === 0)\r\n      return (\r\n        <g>\r\n          <text x={x} y={y - offset} textAnchor=\"middle\" fontSize={fontSize} fontWeight={fontWeight}>\r\n            {UtilConverter.number2shortenString(value)}\r\n          </text>\r\n        </g>\r\n      );\r\n    \r\n    return (\r\n      <g></g>\r\n    );\r\n  };\r\n\r\n\r\n  return ( \r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={600}>\r\n        <AreaChart\r\n          width={500}\r\n          height={400}\r\n          data={_purified_data}\r\n          defaultShowTooltip={true}\r\n          margin={{\r\n            top: 20,\r\n            right: 30,\r\n            left: 30,\r\n            bottom: 50,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"1 2\" />\r\n          <XAxis dataKey=\"date\"\r\n            fontSize={10}\r\n            angle={-40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            padding={{ left: 50, right: 50 }}\r\n            // tickFormatter={(date) => {\r\n            //   if (date instanceof Date)\r\n            //     return moment(date).format('YY.MM.DD');\r\n            //   return date;\r\n            // }}\r\n          />\r\n          <YAxis\r\n            allowDataOverflow \r\n            domain={[0, dataMax => parseInt(dataMax * 1.1)]}\r\n            fontSize={10} \r\n            tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)}\r\n          />\r\n          <Tooltip content={<AssetRatioTooltip />} />\r\n          <Legend align=\"left\" verticalAlign=\"top\" iconSize={20} wrapperStyle={{top: 0}} \r\n            payload={[\r\n              { value: '3x'       , type: 'line', id: '1', color: _colors_map[\"3x\"      ] },\r\n              { value: 'Cashlike' , type: 'line', id: '1', color: _colors_map[\"cashlike\"] },\r\n              { value: 'Dividend' , type: 'line', id: '1', color: _colors_map[\"dividend\"] },\r\n              { value: 'Trade'    , type: 'line', id: '1', color: _colors_map[\"trade\"   ] },\r\n            ]}\r\n          />\r\n          <Area type=\"monotone\" name={'Trade'   } dataKey={\"trade\"   } stackId=\"1\" stroke={_colors_map[\"trade\"   ]} fill={_colors_map[\"trade\"   ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"ratio_trade\"   } position=\"insideTopLeft\" offset={5} fontSize={10} />} </Area>\r\n          <Area type=\"monotone\" name={'Dividend'} dataKey={\"dividend\"} stackId=\"1\" stroke={_colors_map[\"dividend\"]} fill={_colors_map[\"dividend\"]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"ratio_dividend\"} position=\"insideTopLeft\" offset={5} fontSize={10} />} </Area>\r\n          <Area type=\"monotone\" name={'Cashlike'} dataKey={\"cashlike\"} stackId=\"1\" stroke={_colors_map[\"cashlike\"]} fill={_colors_map[\"cashlike\"]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"ratio_cashlike\"} position=\"insideTopLeft\" offset={5} fontSize={10} />} </Area>\r\n          <Area type=\"monotone\" name={'3x'      } dataKey={\"3x\"      } stackId=\"1\" stroke={_colors_map[\"3x\"      ]} fill={_colors_map[\"3x\"      ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"ratio_3x\"      } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { /* if (v > 2) return v.toFixed(2) */ return v; }}/>}\r\n            {_purified_data != null && _purified_data.length > 25\r\n              ? (\r\n                  <LabelList name={\"Total\"} dataKey={\"total\"} position=\"top\" offset={14} fontSize={10}\r\n                    formatter={(datum) => {\r\n                      return UtilConverter.number2shortenString(datum);\r\n                    }}\r\n                    content={renderIntermittentLabel}\r\n                  />\r\n                )\r\n              : (\r\n                  <LabelList name={\"Total\"} dataKey={\"total\"} position=\"top\" offset={14} fontSize={10}\r\n                    formatter={(datum) => {\r\n                      return UtilConverter.number2commadStringWithIntl(datum);\r\n                    }}\r\n                    content={renderIntermittentLabel}\r\n                  />  \r\n                )\r\n            }\r\n          </Area>\r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea x1={_viewPort['left']} x2={_viewPort['right']} strokeOpacity={0.3} />\r\n          ) : null}\r\n        </AreaChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default RechartTotalAsset;","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport xlsx from 'xlsx';\r\nimport { UtilSheet } from \"../../utils\";\r\nimport RechartAlpha from \"./recharts/rechart_alpha\";\r\nimport RechartTotalAsset from \"./recharts/rechart_total_asset\";\r\n\r\nconst VTradeHistory = () => {\r\n  const [_total_asset_data, setTotalAssetData] = React.useState([]);\r\n  const [_alpha_data      , setAlphaData     ] = React.useState([]);\r\n  // const [_note_data       , setNoteData      ] = React.useState({});\r\n\r\n  const _refPricesFileForm = React.useRef();\r\n\r\n  const _parseData = React.useCallback((data) => {\r\n    var total_asset_data = [];\r\n    let alpha_data = [];\r\n    let note_data = {};\r\n\r\n\r\n    Object.keys(data).forEach((sheetName) => {\r\n      if (sheetName === 'assets') {\r\n        data[sheetName].forEach((row) => {\r\n          var date = UtilSheet.serialDateToJSDate(row['date']);\r\n          var date_string = moment(date).format('YY.MM.DD');\r\n          delete row['date'];\r\n          \r\n          // ▒▒▒▒ NOTE DATA ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒\r\n          if (row['note'] === void 0)\r\n            note_data[date_string] = '';\r\n          else\r\n            note_data[date_string] = row['note'];\r\n\r\n          // ▒▒▒▒ ALPHA DATA ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒\r\n          alpha_data.push({\r\n            date: date_string,\r\n            'return_of_portfolio': row['p_return'  ],\r\n            'price_TQQQ'         : row['price_TQQQ'],\r\n            'price_QQQ'          : row['price_QQQ' ],\r\n            'price_VOO'          : row['price_VOO' ],\r\n            'price_VT'           : row['price_VT'],\r\n            'price_XRMI'         : row['price_XRMI'],\r\n            'ratio_safety'       : row['ratio_cashlike'] + row['ratio_dividend'] + row['ratio_trade'],\r\n            'note': row['note'] || ''\r\n          });\r\n\r\n          // ▒▒▒▒ TOTAL ASSET DATA ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒\r\n          // var getPercentage = (key) => parseFloat(((100 * row[key]) / row['Total']).toFixed(2));\r\n          var assets = {};\r\n          var percentages = {};\r\n          [\r\n            \"3x\"       ,\r\n            \"cashlike\" ,\r\n            \"dividend\" ,\r\n            \"trade\"\r\n          ].forEach((key) => {\r\n            assets[`${key}`] = row[`${key}`];\r\n            percentages[`ratio_${key}`] = (parseFloat(row[`ratio_${key}`])).toFixed(2);\r\n          });\r\n          total_asset_data.push({\r\n            date: date_string,\r\n            'total': row['total'],\r\n            ...assets,\r\n            ...percentages\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n    return {\r\n      total_asset_data,\r\n      alpha_data,\r\n      note_data\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    let local_data = localStorage.getItem('last_finance_data');\r\n    if (!local_data) \r\n      return;\r\n\r\n    var data = JSON.parse(local_data);\r\n    try {\r\n      const { total_asset_data, alpha_data } = _parseData(data);\r\n      setTotalAssetData(total_asset_data);\r\n      setAlphaData(alpha_data);\r\n      // setNoteData(note_data);\r\n    } catch (e) {\r\n      localStorage.removeItem('last_finance_data');\r\n      window.location.reload();\r\n    }\r\n  }, [_parseData]);\r\n\r\n\r\n  /** CSV parse example ───────────────────────────────────── */\r\n  // function _setPrices(e) {   \r\n  //   var reader = new FileReader();\r\n  //   reader.onload = function(e) {\r\n  //     // Use reader.result\r\n  //     parseCSV(reader.result, {}, function (err, output) {\r\n  //       console.log(output);\r\n  //     });\r\n  //   }\r\n  //   reader.readAsText(e.target.files[0]);\r\n  // }\r\n  /** ───────────────────────────────────────────────────────── */\r\n\r\n  function uploadSheet(event) {\r\n    var input = event.target; \r\n    var reader = new FileReader();\r\n    reader.onload = function() { \r\n      var fdata = reader.result; \r\n      var read_buffer = xlsx.read(fdata, {type : 'binary'}); \r\n\r\n      let data = {};\r\n      read_buffer.SheetNames.forEach(function(sheetName) {\r\n        var data_rows = xlsx.utils.sheet_to_json(read_buffer.Sheets[sheetName]); \r\n        data[sheetName] = data_rows;\r\n      });\r\n      \r\n      _refPricesFileForm.current.reset();      \r\n      localStorage.setItem('last_finance_data', JSON.stringify(data));\r\n      const { total_asset_data, alpha_data } = _parseData(data);\r\n      setTotalAssetData(total_asset_data);\r\n      setAlphaData(alpha_data);\r\n    }; \r\n    reader.readAsBinaryString(input.files[0]); \r\n  }\r\n\r\n  return ( \r\n    <div>\r\n      <div className=\"text-start fw-bold my-5 px-4 w-100\" style={{fontSize: `calc(${2}rem + ${2}vw)`}}>\r\n        TRADE HISTORY\r\n      </div>\r\n      <div className=\"mt-5 d-flex justify-content-center w-100\">\r\n        <div className=\"pe-2\">\r\n          <label type=\"button\" className=\"btn btn-secondary\" \r\n            onClick={e => window.open('https://docs.google.com/uc?export=download&id=YourIndividualID', '_blank')}\r\n          >\r\n            DOWNLOAD SAMPLE\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <form ref={_refPricesFileForm}>\r\n            <input type=\"file\" accept=\".xlsx\" id=\"pricesFileInput\"\r\n              className=\"d-none\"\r\n              onClick={e => e.target.key = 'prices' + new Date().getMilliseconds()}\r\n              // name=\"pricesFile\" onChange={_setPrices}\r\n              name=\"pricesFile\" onChange={uploadSheet}\r\n            />\r\n          </form>\r\n          <label type=\"button\" htmlFor=\"pricesFileInput\" className=\"btn btn-danger\">UPLOAD XLSX</label>\r\n        </div>\r\n      </div>\r\n\r\n   \r\n      \r\n\r\n      <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n        <h1><b>TOTAL ASSET RATIO</b></h1>\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <RechartTotalAsset data={_total_asset_data} />\r\n      </div>\r\n\r\n      <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n        <h1><b>ALPHA</b></h1>\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <RechartAlpha data={_alpha_data} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default VTradeHistory;","import React from \"react\";\r\nimport { CartesianGrid, LabelList, Legend, Line, Area, ComposedChart, ReferenceArea, ReferenceLine, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { UtilCommon, UtilConverter } from \"../../../utils\";\r\nimport UtilValidator from \"../../../utils/util_validator\";\r\n\r\nconst _colors_map = {\r\n  \"KOSPI\"       : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"NASDAQ\"      : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"S&P200\"      : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"LUXUARY\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Global_Index\": UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"return_of_asset\"    : \"#000\",\r\n  \"return_of_day_trade\": \"#F00\",\r\n  \"safety_asset_ratio\" : \"#5AA8\",\r\n};\r\n\r\nconst RechartAlphaV1 = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_domain, setDomain] = React.useState({top: 'dataMax + 1', bottom: 'dataMin - 1'});\r\n  const [_refArea, setRefArea] = React.useState({left: '', right: ''});\r\n  const [_hoverIndex, setHoverIndex] = React.useState();\r\n\r\n  const [_purified_data, setPurifiedData] = React.useState([]);\r\n  const [_strokeWidths, setStrokeWidths ] = React.useState({});\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let initial_values = {};\r\n\r\n    let purified_data = [];\r\n    // let accumulation_of_return_of_asset = 0;\r\n    let initial_return_of_asset = 0;\r\n    let initial_return_of_day_trade = 0;\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from) {\r\n        is_selected_range = true;\r\n        initial_values = {\r\n          'KOSPI'  : datum['KOSPI'],\r\n          'S&P500' : datum['S&P500'],\r\n          'NASDAQ' : datum['NASDAQ'],\r\n          'LUXUARY': datum['LUXUARY'],\r\n          'Global_Index': datum['Global_Index']\r\n        }\r\n        initial_return_of_day_trade = datum['day_trade'] || 0;\r\n        initial_return_of_asset = datum['return_of_asset'] || 0;\r\n      }\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n\r\n      // accumulation_of_return_of_asset = (datum['date'] === from) ? 0 : parseFloat((accumulation_of_return_of_asset + datum['return_of_asset']).toFixed(2));\r\n      purified_data.push({\r\n        date: datum['date'],\r\n        'return_of_asset'    : (datum['return_of_asset'] === void 0) ? 0 : parseFloat((datum['return_of_asset'] - initial_return_of_asset    ).toFixed(2)),\r\n        'return_of_day_trade': (datum['day_trade'      ] === void 0) ? 0 : parseFloat((datum['day_trade'      ] - initial_return_of_day_trade).toFixed(2)),\r\n        'KOSPI'       : parseFloat(((datum['KOSPI'       ] - initial_values['KOSPI'       ]) * 100 / initial_values['KOSPI'       ]).toFixed(2)),\r\n        'S&P500'      : parseFloat(((datum['S&P500'      ] - initial_values['S&P500'      ]) * 100 / initial_values['S&P500'      ]).toFixed(2)),\r\n        'NASDAQ'      : parseFloat(((datum['NASDAQ'      ] - initial_values['NASDAQ'      ]) * 100 / initial_values['NASDAQ'      ]).toFixed(2)),\r\n        'LUXUARY'     : parseFloat(((datum['LUXUARY'     ] - initial_values['LUXUARY'     ]) * 100 / initial_values['LUXUARY'     ]).toFixed(2)),\r\n        'Global_Index': parseFloat(((datum['Global_Index'] - initial_values['Global_Index']) * 100 / initial_values['Global_Index']).toFixed(2)),\r\n        'safety_asset_ratio': datum['safety_asset_ratio'],\r\n        'memo': datum['memo'],\r\n      });\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n  \r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n  \r\n\r\n  function getAxisYDomain(from, to, data) {\r\n    let [bottom, top] = [data[0]['return_of_asset'], data[0]['return_of_asset']];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      if (datum['return_of_asset'] > top) top = datum['return_of_asset'];\r\n      if (datum['return_of_asset'] < bottom) bottom = datum['return_of_asset'];\r\n      \r\n      if (datum['return_of_day_trade'] > top) top = datum['return_of_day_trade'];\r\n      if (datum['return_of_day_trade'] < bottom) bottom = datum['return_of_day_trade'];\r\n\r\n      if (datum['S&P500'] > top) top = datum['S&P500'];\r\n      if (datum['S&P500'] < bottom) bottom = datum['S&P500'];\r\n\r\n      if (datum['NASDAQ'] > top) top = datum['NASDAQ'];\r\n      if (datum['NASDAQ'] < bottom) bottom = datum['NASDAQ'];\r\n\r\n      if (datum['KOSPI'] > top) top = datum['KOSPI'];\r\n      if (datum['KOSPI'] < bottom) bottom = datum['KOSPI'];\r\n\r\n      if (datum['Global_Index'] > top) top = datum['Global_Index'];\r\n      if (datum['Global_Index'] < bottom) bottom = datum['Global_Index'];\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n    return [(Math.floor(bottom - 1) | 0), (Math.ceil(top + 1) | 0)];\r\n  };\r\n  \r\n  function _zoom() {\r\n    let { left, right } = _refArea;\r\n\r\n    if (left === right || right === '') {\r\n      setRefArea({\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    // yAxis domain\r\n    const [bottom, top] = getAxisYDomain(left, right, purified_data);\r\n\r\n    setRefArea({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    setDomain({\r\n      bottom,\r\n      top\r\n    });\r\n\r\n    setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    setRefArea({left: '', right: ''});\r\n    setDomain({top: 'dataMax + 1', bottom: 'dataMin - 1'});\r\n    setPurifiedData(purified_data);\r\n  }\r\n  \r\n\r\n  function _handleMouseEnterLegends(o) {\r\n    const { dataKey } = o;\r\n    setStrokeWidths({ ..._strokeWidths, [dataKey]: 3 });\r\n  };\r\n\r\n  function _handleMouseLeaveLegends(o) {\r\n    const { dataKey } = o;    \r\n    setStrokeWidths({ ..._strokeWidths, [dataKey]: 1 });\r\n  };\r\n\r\n\r\n\r\n  const AlphaTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n\r\n    const payload_return_of_asset    = payload.filter(payload => payload['name'] === 'Return of Asset')[0];\r\n    const payload_return_of_daytrade = payload.filter(payload => payload['name'] === 'Return of DayTrade')[0];\r\n    // const date = moment(label).format('YY.MM.DD');    \r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload_return_of_asset && (\r\n              <tr>\r\n                <td><p style={{ color: payload_return_of_asset['color'] }}>{`${payload_return_of_asset['name']}`}</p></td>\r\n                <td><p style={{ color: payload_return_of_asset['color'] }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_return_of_asset['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_return_of_asset['value']).padStart(8, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n            {payload_return_of_daytrade && (\r\n              <tr>\r\n                <td><p style={{ color: payload_return_of_daytrade['color'] }}>{`${payload_return_of_daytrade['name']}`}</p></td>\r\n                <td><p style={{ color: payload_return_of_daytrade['color'] }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_return_of_daytrade['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_return_of_daytrade['value']).padStart(8, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload.map((payload, i) => {\r\n              if (payload['name'] === 'Return of Asset' || payload['name'] === 'Return of DayTrade')\r\n                return null;\r\n\r\n              return (\r\n                <tr key={payload['name']}>\r\n                  <td><p style={{ color: payload['color'] }}>{`${payload['name']}`}</p></td>\r\n                  <td><p style={{ color: payload['color'] }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload['value']).padStart(8, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              );\r\n            })}            \r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  \r\n  const renderIntermittentLabel = (props) => {\r\n    const { x, y, offset, value, index, fontSize, fontWeight } = props;\r\n\r\n    if (index % 2 === 0)\r\n      return (\r\n        <g>\r\n          <text x={x} y={y - offset * 2} textAnchor=\"middle\" fontSize={fontSize} fontWeight={fontWeight}>{value}</text>\r\n        </g>\r\n      );\r\n    \r\n    return (\r\n      <g></g>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ userSelect: 'none' }}>\r\n        <ResponsiveContainer width=\"100%\" height={800}>\r\n            <ComposedChart\r\n              width={800}\r\n              height={800}\r\n              data={_purified_data}\r\n              onMouseDown={(e) => e && (_refArea.left !== e.activeLabel) && setRefArea({ left: e.activeLabel, right: _refArea['right'] })}\r\n              onMouseMove={(e) => {\r\n                if (e && UtilValidator.hasAnyValue(e.activeTooltipIndex))\r\n                  setHoverIndex(e.activeTooltipIndex);\r\n\r\n                if (e && _refArea.left && (_refArea.right !== e.activeLabel))\r\n                  setRefArea({ right: e.activeLabel, left: _refArea['left'] });\r\n              }}\r\n              onMouseUp={e => {\r\n                if (_refArea['left'] !== '' && _refArea['right'] === '')\r\n                  _zoomOut();\r\n                else\r\n                  _zoom();\r\n              }}\r\n              onMouseLeave={e => {setHoverIndex(void 0)}}\r\n              margin={{\r\n                top: 40,\r\n                right: 30,\r\n                left: 30,\r\n                bottom: 50,\r\n              }}\r\n            >\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <Tooltip content={<AlphaTooltip />} />\r\n              <Legend align=\"left\" verticalAlign=\"top\" iconSize={20} wrapperStyle={{top: 0}} onMouseEnter={_handleMouseEnterLegends} onMouseLeave={_handleMouseLeaveLegends}/>\r\n              <XAxis\r\n                allowDataOverflow\r\n                dataKey=\"date\"\r\n                fontSize={10}\r\n                angle={-40}\r\n                textAnchor=\"end\"\r\n                // verticalAnchor=\"middle\"\r\n                tickSize={4}\r\n                tickMargin={8}\r\n                padding={{ left: 50, right: 50 }}\r\n                // tickFormatter={(date) => {\r\n                //   if (date instanceof Date)\r\n                //     return moment(date).format('YY.MM.DD');\r\n                //   return date;\r\n                // }} \r\n              />\r\n              <YAxis\r\n                yAxisId=\"left\"\r\n                allowDataOverflow \r\n                domain={[_domain['bottom'], _domain['top'  ]]}\r\n                // padding={{ bottom: 50, top: 50 }}\r\n                tickFormatter={(value) => {\r\n                  return parseFloat(value.toFixed(2));\r\n                }}\r\n              />\r\n              <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: '%', position: 'center' }} fontSize={10} domain={[0, 100]} ticks={[0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]} />\r\n              <Line\r\n                yAxisId=\"left\"\r\n                type=\"natural\" dataKey={'return_of_asset'} name=\"Return of Asset\"\r\n                stroke={_colors_map['return_of_asset']} strokeWidth={2}\r\n                animationDuration={300}\r\n              >\r\n                <LabelList dataKey={'return_of_asset'} content={renderIntermittentLabel} fontWeight=\"bold\" />\r\n              </Line>\r\n              \r\n              <Line\r\n                yAxisId=\"left\"\r\n                type=\"natural\" dataKey={'return_of_day_trade'} name=\"Return of DayTrade\"\r\n                stroke={_colors_map['return_of_day_trade']} strokeWidth={2}\r\n                animationDuration={300}\r\n              >\r\n                <LabelList dataKey={'return_of_day_trade'} content={renderIntermittentLabel} fontWeight=\"bold\" />\r\n              </Line>\r\n              \r\n              <Line yAxisId=\"left\" type=\"natural\" name={'KOSPI'  } dataKey={'KOSPI'  } stroke={_colors_map['KOSPI'  ]} strokeWidth={_strokeWidths['KOSPI'  ] || 1} animationDuration={300} dot={false} />\r\n              <Line yAxisId=\"left\" type=\"natural\" name={'S&P500' } dataKey={'S&P500' } stroke={_colors_map['S&P500' ]} strokeWidth={_strokeWidths['S&P500' ] || 1} animationDuration={300} dot={false} />\r\n              <Line yAxisId=\"left\" type=\"natural\" name={'NASDAQ' } dataKey={'NASDAQ' } stroke={_colors_map['NASDAQ' ]} strokeWidth={_strokeWidths['NASDAQ' ] || 1} animationDuration={300} dot={false} />\r\n              <Line yAxisId=\"left\" type=\"natural\" name={'LUXUARY'} dataKey={'LUXUARY'} stroke={_colors_map['LUXUARY']} strokeWidth={_strokeWidths['LUXUARY'] || 1} animationDuration={300} dot={false} />\r\n              <Line yAxisId=\"left\" type=\"natural\" name={'Global_Index'} dataKey={'Global_Index'} stroke={_colors_map['Global_Index']} strokeWidth={_strokeWidths['Global_Index'] || 2} animationDuration={300} dot={false} />\r\n              \r\n\r\n              <defs>\r\n                <linearGradient id=\"colorSafetyAssetRatio\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <stop offset=\"20%\" stopColor={_colors_map['safety_asset_ratio']} stopOpacity={0.8}/>\r\n                  <stop offset=\"75%\" stopColor={_colors_map['safety_asset_ratio']} stopOpacity={0}/>\r\n                </linearGradient>\r\n              </defs>\r\n              <Area yAxisId=\"right\" type=\"monotone\" name={'Safety Asset Ratio'} dataKey={'safety_asset_ratio'} stroke={_colors_map['safety_asset_ratio']} fillOpacity={1} fill=\"url(#colorSafetyAssetRatio)\">\r\n                <LabelList dataKey={'safety_asset_ratio'} fontSize={10} content={renderIntermittentLabel} />\r\n              </Area>\r\n              \r\n              <ReferenceLine yAxisId=\"left\" y={0} stroke=\"#888\" />\r\n\r\n              {_refArea['left'] && _refArea['right'] ? (\r\n                <ReferenceArea yAxisId=\"left\" x1={_refArea['left']} x2={_refArea['right']} strokeOpacity={0.3} />\r\n              ) : null}\r\n            </ComposedChart>\r\n          </ResponsiveContainer>\r\n      </div>\r\n\r\n      {UtilValidator.hasAnyValue(_hoverIndex) && _purified_data[_hoverIndex] && _purified_data[_hoverIndex]['memo'] && (\r\n        <div\r\n          className=\"position-fixed p-3 bg-light rounded\" style={{top: 10, left: 10}}\r\n        >\r\n          <div className=\"fw-bold\">{_purified_data[_hoverIndex]['date']}</div>\r\n          <div style={{lineBreak: 'anywhere', whiteSpace: 'pre-wrap', wordBreak: 'break-all'}}>\r\n            {_purified_data[_hoverIndex]['memo']}\r\n          </div>          \r\n        </div>\r\n      )}       \r\n    </div>\r\n  );\r\n}\r\n \r\nexport default RechartAlphaV1;","import React from \"react\";\r\nimport { Bar, CartesianGrid, ComposedChart, Legend, Line, ReferenceArea, ReferenceLine, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { UtilCommon, UtilConverter } from \"../../../utils\";\r\n\r\n\r\nconst _colors_map = {\r\n  \"KOSPI\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Won\"       : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Dollar\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"LUXUARY\"   : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"NASDAQ\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Reits\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"S&P500\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Stocks-KR\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Stocks-US\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"T-bond_I\"  : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n};\r\n\r\n\r\nconst RechartArbitrage = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    let offset = 0;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from) {\r\n        is_selected_range = true;\r\n        offset = datum['accumulation'] - datum['total'];\r\n      }\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push({\r\n        ...datum,\r\n        accumulation: datum['accumulation'] - offset\r\n      });\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  // set min, max trade volume, count\r\n  let min_traded_volume = data[0]['buy_volume'] || 0,\r\n      max_trade_volume = data[0]['buy_volume'] || 0,\r\n      min_count = data[0]['count'] || 0,\r\n      max_count = data[0]['count'] || 0;\r\n\r\n  data.forEach((datum) => {\r\n    if (datum['buy_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['sell_volume'];\r\n    if (datum['buy_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['sell_volume'];\r\n    if (datum['count'] < min_count)\r\n      min_count = datum['count'];\r\n    if (datum['count'] > max_count)\r\n      max_count = datum['count'];\r\n  });\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n\r\n  const ArbitrageTooltip = ({ active, payload: payloads, label }) => {\r\n    if (!active || !payloads || !payloads.length)\r\n      return null;\r\n    \r\n    const full_payload = payloads[0]['payload'];\r\n    const total_arbitrage = full_payload['total'];\r\n    const total_color = '#555';\r\n\r\n    const payload_accumulation = payloads.filter(payload => payload['name'] === 'Accumulation')[0];\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payloads.map((payload, i) => {\r\n              if (payload['name'] === 'Accumulation')\r\n                return null;\r\n\r\n              return (\r\n                <tr key={payload['name']}>\r\n                  <td><p style={{ color: payload['color'] }}>{`${payload['name']}`}</p></td>\r\n                  <td><p style={{ color: payload['color'] }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              )\r\n            })}\r\n            \r\n            \r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr> \r\n            <tr>\r\n              <td><p style={{ color: total_color }}>{`Total`}</p></td>\r\n              <td><p style={{ color: total_color }}>{` :  `}</p></td>\r\n              <td><code className=\"w-100\" style={{ color: total_color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                {`${UtilConverter.number2commadStringWithIntl(total_arbitrage).padStart(14, ' ')}`}\r\n              </code></td>\r\n            </tr>\r\n            {payload_accumulation && (\r\n              <tr>\r\n                <td><p style={{ color: payload_accumulation['color'] }}>{`${payload_accumulation['name']}`}</p></td>\r\n                <td><p style={{ color: payload_accumulation['color'] }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_accumulation['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_accumulation['value']).padStart(14, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={400}>\r\n        <ComposedChart\r\n          width={500}\r\n          height={300}\r\n          data={_purified_data}\r\n          // stackOffset=\"sign\"\r\n          margin={{\r\n            top: 30,\r\n            right: 30,\r\n            left: 30,\r\n            bottom: 20,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >          \r\n          <Legend align=\"left\" verticalAlign=\"top\" wrapperStyle={{top: 0}} />\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis\r\n            dataKey=\"date\"\r\n            domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            angle={-40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            // tickFormatter={(unixTime) => moment(unixTime).format('YY.MM.DD')}\r\n          />\r\n          <YAxis yAxisId=\"left\" fontSize={10} tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)} />\r\n          <YAxis yAxisId=\"right\" orientation=\"right\" fontSize={10} tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)} />\r\n          <Tooltip content={<ArbitrageTooltip />}/>\r\n          <ReferenceLine yAxisId=\"left\" y={0} stroke=\"#000\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"KOSPI\"   fill={_colors_map[\"KOSPI\"  ]} stackId=\"stack\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"S&P500\"  fill={_colors_map[\"S&P500\" ]} stackId=\"stack\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"NASDAQ\"  fill={_colors_map[\"NASDAQ\" ]} stackId=\"stack\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"LUXUARY\" fill={_colors_map[\"LUXUARY\"]} stackId=\"stack\" />\r\n          \r\n          <Line yAxisId=\"right\" type=\"natural\" name=\"Accumulation\" dataKey=\"accumulation\" stroke=\"#D44\" strokeWidth={2} />\r\n          \r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea x1={_viewPort['left']} x2={_viewPort['right']} yAxisId=\"left\" strokeOpacity={0.3} />\r\n          ) : null}\r\n        </ComposedChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default RechartArbitrage;","// import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { CartesianGrid, ComposedChart, Legend, Line, ReferenceArea, ResponsiveContainer, Scatter, Tooltip, XAxis, YAxis, ZAxis } from \"recharts\";\r\nimport { UtilConverter } from \"../../../utils\";\r\n\r\nconst RechartDayTrade = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push(datum);\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  // set min, max trade volume, count\r\n  let min_traded_volume = data[0]['buy_volume'] || 0,\r\n      max_trade_volume = data[0]['buy_volume'] || 0,\r\n      min_count = data[0]['count'] || 0,\r\n      max_count = data[0]['count'] || 0;\r\n\r\n  data.forEach((datum) => {\r\n    if (datum['buy_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['sell_volume'];\r\n    if (datum['buy_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['sell_volume'];\r\n    if (datum['count'] < min_count)\r\n      min_count = datum['count'];\r\n    if (datum['count'] > max_count)\r\n      max_count = datum['count'];\r\n  });\r\n\r\n\r\n  const AssetRatioTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n    \r\n    const full_payload = payload[0]['payload'];\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n\r\n    let payload_price,\r\n        payload_avg_price,\r\n        payload_buy,\r\n        payload_sell;\r\n\r\n    payload.forEach(datum => {\r\n      switch (datum['name']) {\r\n        case 'price':\r\n          payload_price = datum;\r\n          break;      \r\n        case 'average price':\r\n          payload_avg_price = datum;\r\n          break;      \r\n        case 'buy':\r\n          payload_buy = datum;\r\n          break;      \r\n        case 'sell':\r\n          payload_sell = datum;\r\n          break;      \r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    if (payload_buy)\r\n      payload_buy['buy_volume'] = full_payload['buy_volume'];\r\n    if (payload_sell)\r\n      payload_sell['sell_volume'] = full_payload['sell_volume'];\r\n    if (payload_avg_price)\r\n      payload_avg_price['count'] = full_payload['count'];\r\n\r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload_price && payload_price['value'] && (\r\n              <tr key={payload_price['name']}>\r\n                <td><p style={{ color: payload_price.color }}>{`${payload_price.name}`}</p></td>\r\n                <td><p style={{ color: payload_price.color }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_price.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_price['value']).padStart(14, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n            {payload_avg_price && payload_avg_price['value'] && payload_avg_price['count'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_avg_price['name']}>\r\n                  <td><p style={{ color: payload_avg_price.color }}>{`${payload_avg_price.name}`}</p></td>\r\n                  <td><p style={{ color: payload_avg_price.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_avg_price.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_avg_price['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'count'}>\r\n                  <td><p style={{ color: payload_avg_price.color }}>{'count'}</p></td>\r\n                  <td><p style={{ color: payload_avg_price.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_avg_price.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_avg_price['count']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}\r\n            \r\n            {((payload_buy && payload_buy['value'] && payload_buy['buy_volume']) || (payload_sell && payload_sell['value'] && payload_sell['sell_volume'])) && (\r\n              <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            )}           \r\n\r\n            {payload_buy && payload_buy['value'] && payload_buy['buy_volume'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_buy['name']}>\r\n                  <td><p style={{ color: payload_buy.color }}>{'buy_price'}</p></td>\r\n                  <td><p style={{ color: payload_buy.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_buy.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_buy['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'buy_volume'}>\r\n                  <td><p style={{ color: payload_buy.color }}>{'buy_volume'}</p></td>\r\n                  <td><p style={{ color: payload_buy.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_buy.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_buy['buy_volume']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {payload_sell && payload_sell['value'] && payload_sell['sell_volume'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_sell['name']}>\r\n                  <td><p style={{ color: payload_sell.color }}>{'sell_price'}</p></td>\r\n                  <td><p style={{ color: payload_sell.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_sell.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_sell['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'sell_volume'}>\r\n                  <td><p style={{ color: payload_sell.color }}>{'sell_volume'}</p></td>\r\n                  <td><p style={{ color: payload_sell.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_sell.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_sell['sell_volume']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}            \r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n  const CountDot = (props) => {\r\n    const { cx, cy, stroke, payload /*, value*/ } = props;\r\n    let count = payload['count'];\r\n    if (count < 1)\r\n      return null;\r\n\r\n    let size = count / max_count * 512;\r\n    \r\n    return (\r\n      <svg x={cx - 20} y={cy - 20} width={40} height={40} fill={stroke} fillOpacity={0.2} viewBox=\"0 0 1024 1024\">\r\n        <circle cx={512} cy={512} r={size} />\r\n      </svg>\r\n    );\r\n  };\r\n\r\n\r\n  return (  \r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={400}>\r\n        <ComposedChart\r\n          width={500}\r\n          height={400}\r\n          data={_purified_data}\r\n          margin={{\r\n            top: 10,\r\n            left: 30,\r\n            right: 30,\r\n            bottom: 20,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >\r\n          <CartesianGrid stroke=\"#DDD\" />\r\n          <Tooltip content={<AssetRatioTooltip />} />\r\n          <Legend align=\"left\" verticalAlign=\"top\" height={36} iconSize={12} />\r\n\r\n          <XAxis \r\n            dataKey=\"date\"\r\n            domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            angle={-40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            // tickFormatter={(unixTime) => moment(unixTime).format('YY.MM.DD')}\r\n            // label={{ value: 'DATE', position: 'insideBottomRight', offset: 0 }} \r\n            padding={{ left: 50, right: 50 }}\r\n          />\r\n          <YAxis\r\n            // dataKey=\"price\" \r\n            // domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            domain={[dataMin => parseInt(dataMin * 0.995), dataMax => parseInt(dataMax * 1.005)]}\r\n            // padding={{ top: 20, bottom: 20 }}\r\n            // unit=\"\"\r\n            // type=\"number\"\r\n            // label={{ value: 'WON', angle: -90, position: 'insideLeft' }}\r\n            tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)} \r\n          />\r\n          <ZAxis dataKey=\"sell_volume\" name=\"sell_volume\" domain={[min_traded_volume, max_trade_volume]} range={[50, 500]} unit=\"ea\" zAxisId=\"sell_vol\" />\r\n          <ZAxis dataKey=\"buy_volume\"  name=\"buy_volume\"  domain={[min_traded_volume, max_trade_volume]} range={[50, 500]} unit=\"ea\" zAxisId=\"buy_vol\" />\r\n          \r\n          {/* <Scatter name=\"red\" dataKey=\"red\" fill=\"red\" /> */}\r\n          <Line type=\"natural\" dataKey=\"price\" />\r\n          <Line type=\"natural\" name=\"average price\" dataKey=\"a_price\" stroke=\"#0A0\" dot={<CountDot />} />\r\n\r\n          <Scatter name=\"sell\" dataKey=\"sell_price\" shape=\"circle\" stroke=\"#00F\" fillOpacity={0.5} fill=\"#00F9\" legendType=\"circle\" zAxisId=\"sell_vol\" />\r\n          <Scatter name=\"buy\"  dataKey=\"buy_price\"  shape=\"circle\" stroke=\"#F00\" fillOpacity={0.5} fill=\"#F009\" legendType=\"circle\" zAxisId=\"buy_vol\"  />\r\n          \r\n          {/* <Line dataKey=\"redLine\" stroke=\"red\" dot={false} activeDot={false} legendType=\"none\" /> */}\r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea x1={_viewPort['left']} x2={_viewPort['right']} strokeOpacity={0.3} />\r\n          ) : null}\r\n        </ComposedChart>\r\n      </ResponsiveContainer>\r\n    </div>   \r\n  );\r\n}\r\n \r\nexport default RechartDayTrade;","import React from \"react\";\r\nimport { Area, AreaChart, CartesianGrid, LabelList, Legend, ReferenceArea, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { UtilCommon, UtilConverter } from \"../../../utils\";\r\n\r\nconst _colors_map = {\r\n  \"KOSPI\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Won\"       : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Dollar\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Luxuary\"   : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"NASDAQ\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Reits\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"S&P500\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Stocks-KR\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Stocks-US\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"T-bond_I\"  : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"P-Metal\"   : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n};\r\n\r\n\r\nconst RechartTotalAssetV1 = (props) => {\r\n  const { data }  = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push(datum);\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  const AssetRatioTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload.map(datum => {\r\n              let percent = ((100 * datum['value']) / datum['payload']['Total']).toFixed(2).padStart(5, ' ');\r\n              return (\r\n                <tr key={datum['name']}>\r\n                  <td><p style={{ color: datum.color }}>{`${datum.name}`}</p></td>\r\n                  <td><p style={{ color: datum.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: datum.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(datum['value']).padStart(14, ' ')} (${percent}%)`}\r\n                  </code></td>\r\n                </tr>\r\n              );                  \r\n            }).reverse()}\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            <tr>\r\n              <td><p className=\"fw-bolder\" style={{ color: 'black' }}>{`Total`}</p></td>\r\n              <td><p style={{ color: 'black' }}>{` :  `}</p></td>\r\n              <td className=\"text-end\"><code className=\"text-dark fw-bolder\" style={{ textAlign: \"end\", fontSize: `${14}px` }}>\r\n                {`￦ ${UtilConverter.number2commadStringWithIntl(payload[0]['payload']['Total'])}`}\r\n              </code></td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n  \r\n  const renderIntermittentLabel = (props) => {\r\n    const { x, y, offset, value, index, fontSize, fontWeight } = props;\r\n\r\n    if (index % 2 === 0)\r\n      return (\r\n        <g>\r\n          <text x={x} y={y - offset} textAnchor=\"middle\" fontSize={fontSize} fontWeight={fontWeight}>\r\n            {UtilConverter.number2shortenString(value)}\r\n          </text>\r\n        </g>\r\n      );\r\n    \r\n    return (\r\n      <g></g>\r\n    );\r\n  };\r\n\r\n\r\n  return ( \r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={600}>\r\n        <AreaChart\r\n          width={500}\r\n          height={400}\r\n          data={_purified_data}\r\n          defaultShowTooltip={true}\r\n          margin={{\r\n            top: 20,\r\n            right: 30,\r\n            left: 30,\r\n            bottom: 50,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"1 2\" />\r\n          <XAxis dataKey=\"date\"\r\n            fontSize={10}\r\n            angle={-40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            padding={{ left: 50, right: 50 }}\r\n            // tickFormatter={(date) => {\r\n            //   if (date instanceof Date)\r\n            //     return moment(date).format('YY.MM.DD');\r\n            //   return date;\r\n            // }}\r\n          />\r\n          <YAxis\r\n            allowDataOverflow \r\n            domain={[0, dataMax => parseInt(dataMax * 1.1)]}\r\n            fontSize={10} \r\n            tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)}\r\n          />\r\n          <Tooltip content={<AssetRatioTooltip />} />\r\n          <Legend align=\"left\" verticalAlign=\"top\" iconSize={20} wrapperStyle={{top: 0}} />\r\n          <Area type=\"monotone\" dataKey={\"Won\"      } stackId=\"1\" stroke={_colors_map[\"Won\"      ]} fill={_colors_map[\"Won\"      ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_Won\"      } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"Dollar\"   } stackId=\"1\" stroke={_colors_map[\"Dollar\"   ]} fill={_colors_map[\"Dollar\"   ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_Dollar\"   } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"KOSPI\"    } stackId=\"1\" stroke={_colors_map[\"KOSPI\"    ]} fill={_colors_map[\"KOSPI\"    ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_KOSPI\"    } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"S&P500\"   } stackId=\"1\" stroke={_colors_map[\"S&P500\"   ]} fill={_colors_map[\"S&P500\"   ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_S&P500\"   } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"NASDAQ\"   } stackId=\"1\" stroke={_colors_map[\"NASDAQ\"   ]} fill={_colors_map[\"NASDAQ\"   ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_NASDAQ\"   } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"Luxuary\"  } stackId=\"1\" stroke={_colors_map[\"Luxuary\"  ]} fill={_colors_map[\"Luxuary\"  ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_Luxuary\"  } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"Stocks-KR\"} stackId=\"1\" stroke={_colors_map[\"Stocks-KR\"]} fill={_colors_map[\"Stocks-KR\"]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_Stocks-KR\"} position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"Stocks-US\"} stackId=\"1\" stroke={_colors_map[\"Stocks-US\"]} fill={_colors_map[\"Stocks-US\"]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_Stocks-US\"} position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"Reits\"    } stackId=\"1\" stroke={_colors_map[\"Reits\"    ]} fill={_colors_map[\"Reits\"    ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_Reits\"    } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"T-bond_I\" } stackId=\"1\" stroke={_colors_map[\"T-bond_I\" ]} fill={_colors_map[\"T-bond_I\" ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_T-bond_I\" } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>} </Area>\r\n          <Area type=\"monotone\" dataKey={\"P-Metal\"  } stackId=\"1\" stroke={_colors_map[\"P-Metal\"  ]} fill={_colors_map[\"P-Metal\"  ]} animationDuration={300}>{_purified_data != null && _purified_data.length > 25 ? null : <LabelList dataKey={\"PERCENT_P-Metal\"  } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>}            \r\n            {_purified_data != null && _purified_data.length > 25\r\n              ? (\r\n                  <LabelList dataKey={\"Total\"} position=\"top\" offset={14} fontSize={10}\r\n                    formatter={(datum) => {\r\n                      return UtilConverter.number2shortenString(datum);\r\n                    }}\r\n                    content={renderIntermittentLabel}\r\n                  />\r\n                )\r\n              : (\r\n                  <LabelList dataKey={\"Total\"} position=\"top\" offset={14} fontSize={10}\r\n                    formatter={(datum) => {\r\n                      return UtilConverter.number2commadStringWithIntl(datum);\r\n                    }}\r\n                    content={renderIntermittentLabel}\r\n                  />  \r\n                )\r\n            }            \r\n          </Area>\r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea x1={_viewPort['left']} x2={_viewPort['right']} strokeOpacity={0.3} />\r\n          ) : null}\r\n        </AreaChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default RechartTotalAssetV1;","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport xlsx from 'xlsx';\r\nimport { UtilSheet } from \"../../utils\";\r\nimport RechartAlphaV1 from \"./recharts/rechart_alpha_v1\";\r\nimport RechartArbitrage from \"./recharts/rechart_arbitrage\";\r\nimport RechartDayTrade from \"./recharts/rechart_day_trade\";\r\nimport RechartTotalAssetV1 from \"./recharts/rechart_total_asset_v1\";\r\n\r\nconst VTradeHistoryV1 = () => {\r\n  const [_total_asset_data                  , setTotalAssetData                ] = React.useState([]);  \r\n  const [_algorithm_trade_data              , setAlgorithmTradeData            ] = React.useState({});\r\n  const [_alpha_data                        , setAlphaData                     ] = React.useState({});\r\n  const [_selected_algorithm_trade_data_name, setSelectedAlgorithmTradeDataName] = React.useState('KOSPI');\r\n  const [_arbitrage_data                    , setArbitrageData                 ] = React.useState([]);\r\n  \r\n  let _selected_algorithm_trade_data = _algorithm_trade_data[_selected_algorithm_trade_data_name] || [];\r\n\r\n  const _refPricesFileForm = React.useRef();\r\n\r\n  const _parseData = React.useCallback((data) => {\r\n    var total_asset_data = [];\r\n    var algorithm_trade_data = {};\r\n    let arbitrage_data_pre = {};\r\n    let arbitrage_data = [];\r\n\r\n    let alpha_data_pre = {};\r\n    let alpha_data = [];\r\n\r\n\r\n    Object.keys(data).forEach((sheetName) => {\r\n      if (sheetName === 'Total') {\r\n        data[sheetName].forEach((row) => {\r\n          var date = UtilSheet.serialDateToJSDate(row['일자']);\r\n          var date_string = moment(date).format('YY.MM.DD');\r\n          delete row['일자'];\r\n          \r\n          // for alpha_data_pre          \r\n          if (!alpha_data_pre[date_string])\r\n            alpha_data_pre[date_string] = {};\r\n          alpha_data_pre[date_string]['return_of_asset'] = parseFloat((row['c_return'] || 0).toFixed(2));\r\n          alpha_data_pre[date_string]['memo'] = row['memo'];\r\n\r\n          let safety_asset_ratio = (parseFloat(row['cash_ratio']) * 100).toFixed(2);\r\n          alpha_data_pre[date_string]['safety_asset_ratio'] = safety_asset_ratio;\r\n\r\n\r\n          function getPercentage(key) {\r\n            return parseFloat(((100 * row[key]) / row['Total']).toFixed(2));\r\n          }\r\n          \r\n          var percentages = {};\r\n          [\r\n            \"Won\"      ,\r\n            \"Dollar\"   ,\r\n            \"KOSPI\"    , \r\n            \"S&P500\"   ,\r\n            \"NASDAQ\"   ,\r\n            \"Luxuary\"  ,\r\n            \"Reits\"    ,\r\n            \"Stocks-KR\",\r\n            \"Stocks-US\",\r\n            \"T-bond_I\" ,\r\n            \"P-Metal\"\r\n          ].forEach((key) => {\r\n            percentages[`PERCENT_${key}`] = getPercentage(key)\r\n          });\r\n\r\n          total_asset_data.push({\r\n            ...row,\r\n            ...percentages,\r\n            date: date_string,\r\n          });\r\n        });\r\n\r\n      } else if (sheetName === 'KOSPI' || sheetName === 'S&P500' || sheetName === 'NASDAQ' || sheetName === 'LUXUARY') {\r\n\r\n        algorithm_trade_data[sheetName] = data[sheetName].map((row) => {\r\n          var date = UtilSheet.serialDateToJSDate(row['일자']);\r\n          var date_string = moment(date).format('YY.MM.DD');\r\n\r\n          // for arbitrage_data_pre\r\n          if (!arbitrage_data_pre[date_string])\r\n           arbitrage_data_pre[date_string] = { 'total': 0 };\r\n          if (row['매수량'] && row['매도량']) {\r\n            let min_traded_volume = Math.min(row['매수량'], row['매도량']);\r\n            let arbitrage = (row['매도가격'] - row['매수가격']) * min_traded_volume;\r\n            arbitrage_data_pre[date_string][sheetName] = arbitrage;\r\n            arbitrage_data_pre[date_string]['total'] += arbitrage;\r\n          }\r\n\r\n          // for alpha_data_pre          \r\n          if (sheetName === 'KOSPI' || sheetName === 'S&P500' || sheetName === 'NASDAQ') {\r\n            if (!alpha_data_pre[date_string])\r\n              alpha_data_pre[date_string] = {};\r\n            alpha_data_pre[date_string][sheetName] = row['x1']; // multiple x1 prices\r\n          }\r\n          if (sheetName === 'LUXUARY') {\r\n            if (!alpha_data_pre[date_string])\r\n              alpha_data_pre[date_string] = {};\r\n            alpha_data_pre[date_string][sheetName] = row['가격']; // multiple x1 prices\r\n          }\r\n\r\n          return {\r\n            date: date_string,\r\n            price: row['가격'],\r\n            buy_price: row['매수가격'],\r\n            sell_price: row['매도가격'],\r\n            buy_volume: row['매수량'],\r\n            sell_volume: row['매도량'],\r\n            a_price: row['평균단가'],\r\n            count: row['보유량'],\r\n          };\r\n        });\r\n      } else if (sheetName === 'day_trade') {\r\n        data[sheetName].forEach((row) => {\r\n          var date_string = moment(UtilSheet.serialDateToJSDate(row['date'])).format('YY.MM.DD');\r\n          // for alpha_data_pre\r\n          if (!alpha_data_pre[date_string])\r\n            alpha_data_pre[date_string] = {};\r\n          alpha_data_pre[date_string][sheetName] = parseFloat(row['return'].toFixed(2));\r\n        });\r\n      } else if (sheetName === 'Global_Index') {\r\n        data[sheetName].forEach((row) => {\r\n          var date = UtilSheet.serialDateToJSDate(row['일자']);\r\n          var date_string = moment(date).format('YY.MM.DD');\r\n          if (!alpha_data_pre[date_string])\r\n            alpha_data_pre[date_string] = {};\r\n          alpha_data_pre[date_string][sheetName] = row['가격']; // multiple x1 prices        \r\n        });\r\n      }\r\n    });\r\n\r\n\r\n    // arbitrage_data_pre => arbitrage_data\r\n    let accumulation = 0;\r\n    Object.keys(arbitrage_data_pre).forEach((date, i) => {\r\n      accumulation += arbitrage_data_pre[date]['total'];\r\n      arbitrage_data.push({\r\n        date,\r\n        ...arbitrage_data_pre[date],\r\n        accumulation\r\n      });\r\n    });\r\n\r\n    // alpha_data_pre => alpha_data\r\n    Object.keys(alpha_data_pre).forEach((date, i) => {\r\n      alpha_data.push({\r\n        date,\r\n        ...alpha_data_pre[date]\r\n      });\r\n    });\r\n\r\n    return {\r\n      total_asset_data,\r\n      algorithm_trade_data,\r\n      arbitrage_data,\r\n      alpha_data,\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    let local_data = localStorage.getItem('last_finance_data');\r\n    if (!local_data) \r\n      return;\r\n\r\n    var data = JSON.parse(local_data);\r\n    try {\r\n      const { total_asset_data, algorithm_trade_data, arbitrage_data, alpha_data } = _parseData(data);\r\n      setTotalAssetData(total_asset_data);\r\n      setAlgorithmTradeData(algorithm_trade_data);\r\n      setArbitrageData(arbitrage_data);\r\n      setAlphaData(alpha_data);\r\n    } catch (e) {\r\n      localStorage.removeItem('last_finance_data');\r\n      window.location.reload();\r\n    }\r\n  }, [_parseData]);\r\n\r\n\r\n  /** CSV parse example ───────────────────────────────────── */\r\n  // function _setPrices(e) {   \r\n  //   var reader = new FileReader();\r\n  //   reader.onload = function(e) {\r\n  //     // Use reader.result\r\n  //     parseCSV(reader.result, {}, function (err, output) {\r\n  //       console.log(output);\r\n  //     });\r\n  //   }\r\n  //   reader.readAsText(e.target.files[0]);\r\n  // }\r\n  /** ───────────────────────────────────────────────────────── */\r\n\r\n  function uploadSheet(event) {\r\n    var input = event.target; \r\n    var reader = new FileReader();\r\n    reader.onload = function() { \r\n      var fdata = reader.result; \r\n      var read_buffer = xlsx.read(fdata, {type : 'binary'}); \r\n\r\n      let data = {};\r\n      read_buffer.SheetNames.forEach(function(sheetName) {\r\n        var data_rows = xlsx.utils.sheet_to_json(read_buffer.Sheets[sheetName]); \r\n        data[sheetName] = data_rows;\r\n      });\r\n      \r\n      _refPricesFileForm.current.reset();      \r\n      localStorage.setItem('last_finance_data', JSON.stringify(data));\r\n      const { total_asset_data, algorithm_trade_data, arbitrage_data, alpha_data } = _parseData(data);\r\n      setTotalAssetData(total_asset_data);\r\n      setAlgorithmTradeData(algorithm_trade_data);\r\n      setArbitrageData(arbitrage_data);\r\n      setAlphaData(alpha_data);\r\n    }; \r\n    reader.readAsBinaryString(input.files[0]); \r\n  }\r\n\r\n  return ( \r\n    <div>\r\n      <div className=\"text-start fw-bold my-5 px-4 w-100\" style={{fontSize: `calc(${2}rem + ${2}vw)`}}>\r\n        TRADE HISTORY\r\n      </div>\r\n      <div className=\"mt-5 d-flex justify-content-center w-100\">\r\n        <div className=\"pe-2\">\r\n          <label type=\"button\" className=\"btn btn-secondary\" \r\n            onClick={e => window.open('https://docs.google.com/uc?export=download&id=YourIndividualID', '_blank')}\r\n          >\r\n            DOWNLOAD SAMPLE\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <form ref={_refPricesFileForm}>\r\n            <input type=\"file\" accept=\".xlsx\" id=\"pricesFileInput\"\r\n              className=\"d-none\"\r\n              onClick={e => e.target.key = 'prices' + new Date().getMilliseconds()}\r\n              // name=\"pricesFile\" onChange={_setPrices}\r\n              name=\"pricesFile\" onChange={uploadSheet}\r\n            />\r\n          </form>\r\n          <label type=\"button\" htmlFor=\"pricesFileInput\" className=\"btn btn-danger\">UPLOAD XLSX</label>\r\n        </div>\r\n      </div>\r\n\r\n   \r\n      <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n        <h1><b>ALGORITHM TRADE</b></h1>\r\n      </div>   \r\n      <div className=\"mt-5 px-3 fw-bold\">Select data</div>\r\n      <div className=\"px-3 d-flex flex-wrap\">\r\n        {Object.keys(_algorithm_trade_data).map((key, i) => {\r\n          return (\r\n            <div key={i} className=\"form-check px-3 py-2\">\r\n              <input\r\n                className=\"form-check-input\" type=\"radio\" name={`radio_${key}`} id={`radio_${key}`}\r\n                checked={_selected_algorithm_trade_data_name === key} onChange={e => setSelectedAlgorithmTradeDataName(key)}\r\n              />\r\n              <label className=\"form-check-label\" htmlFor={`radio_${key}`}>\r\n                {key}\r\n              </label>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"mt-4\">\r\n        <RechartDayTrade data={_selected_algorithm_trade_data} />\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <RechartArbitrage data={_arbitrage_data} />\r\n      </div>\r\n\r\n      <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n        <h1><b>TOTAL ASSET RATIO</b></h1>\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <RechartTotalAssetV1 data={_total_asset_data} />\r\n      </div>\r\n\r\n      <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n        <h1><b>ALPHA</b></h1>\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <RechartAlphaV1 data={_alpha_data} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default VTradeHistoryV1;","// import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { CartesianGrid, ComposedChart, Legend, Line, ReferenceArea, ReferenceLine, ResponsiveContainer, Scatter, Tooltip, XAxis, YAxis, ZAxis } from \"recharts\";\r\nimport { UtilConverter } from \"../../../utils\";\r\n\r\nconst RechartDayTrade3min = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date_time'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push(datum);\r\n\r\n      if (datum['date_time'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date_time'], data[data.length - 1]['date_time']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date_time'], data[data.length - 1]['date_time']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  // set min, max trade volume, count\r\n  let min_traded_volume = data[0]['buy_volume'] || 0,\r\n      max_trade_volume = data[0]['buy_volume'] || 0;\r\n\r\n  for (let datum of data) {\r\n    if (!datum['buy_volume'] && !datum['sell_volume'])\r\n      continue;\r\n      \r\n    if (datum['buy_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['sell_volume'];\r\n    if (datum['buy_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['sell_volume'];\r\n  }\r\n\r\n\r\n  const AssetRatioTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n    \r\n    const full_payload = payload[0]['payload'];\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n\r\n    let payload_price,\r\n        payload_buy,\r\n        payload_sell,\r\n        payload_rsi;\r\n\r\n    payload.forEach(datum => {\r\n      switch (datum['name']) {\r\n        case 'price':\r\n          payload_price = datum;\r\n          break;\r\n        case 'buy':\r\n          payload_buy = datum;\r\n          break;      \r\n        case 'sell':\r\n          payload_sell = datum;\r\n          break;\r\n        case 'rsi':\r\n          payload_rsi = datum;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    if (payload_buy)\r\n      payload_buy['buy_volume'] = full_payload['buy_volume'];\r\n    if (payload_sell)\r\n      payload_sell['sell_volume'] = full_payload['sell_volume'];\r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload_price && payload_price['value'] && (\r\n              <tr key={payload_price['name']}>\r\n                <td><p style={{ color: payload_price.color }}>{`${payload_price.name}`}</p></td>\r\n                <td><p style={{ color: payload_price.color }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_price.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_price['value']).padStart(14, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n\r\n            {payload_rsi && payload_rsi['value'] && (\r\n              <tr key={payload_rsi['name']}>\r\n                <td><p style={{ color: payload_rsi.color }}>{`${payload_rsi.name}`}</p></td>\r\n                <td><p style={{ color: payload_rsi.color }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_rsi.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_rsi['value']).padStart(14, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n            \r\n            {((payload_buy && payload_buy['value'] && payload_buy['buy_volume']) || (payload_sell && payload_sell['value'] && payload_sell['sell_volume'])) && (\r\n              <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            )}           \r\n\r\n            {payload_buy && payload_buy['value'] && payload_buy['buy_volume'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_buy['name']}>\r\n                  <td><p style={{ color: payload_buy.color }}>{'buy_price'}</p></td>\r\n                  <td><p style={{ color: payload_buy.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_buy.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_buy['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'buy_volume'}>\r\n                  <td><p style={{ color: payload_buy.color }}>{'buy_volume'}</p></td>\r\n                  <td><p style={{ color: payload_buy.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_buy.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_buy['buy_volume']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {payload_sell && payload_sell['value'] && payload_sell['sell_volume'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_sell['name']}>\r\n                  <td><p style={{ color: payload_sell.color }}>{'sell_price'}</p></td>\r\n                  <td><p style={{ color: payload_sell.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_sell.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_sell['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'sell_volume'}>\r\n                  <td><p style={{ color: payload_sell.color }}>{'sell_volume'}</p></td>\r\n                  <td><p style={{ color: payload_sell.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_sell.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_sell['sell_volume']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}            \r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (  \r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={400}>\r\n        <ComposedChart\r\n          width={500}\r\n          height={400}\r\n          data={_purified_data}\r\n          margin={{\r\n            top: 10,\r\n            left: 30,\r\n            right: 30,\r\n            bottom: 20,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >\r\n          <CartesianGrid stroke=\"#DDD\" />\r\n          <Tooltip content={<AssetRatioTooltip />} />\r\n          <Legend align=\"left\" verticalAlign=\"top\" height={36} iconSize={12} />\r\n\r\n          <XAxis \r\n            dataKey=\"date_time\"\r\n            domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            angle={-40}\r\n            height={40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            // tickFormatter={(unixTime) => moment(unixTime).format('YY.MM.DD')}\r\n            // label={{ value: 'DATE', position: 'insideBottomRight', offset: 0 }} \r\n            padding={{ left: 50, right: 50 }}\r\n          />\r\n          <YAxis\r\n            yAxisId=\"left\"\r\n            // dataKey=\"price\" \r\n            // domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            domain={[dataMin => parseInt(dataMin * 0.995), dataMax => parseInt(dataMax * 1.005)]}\r\n            // padding={{ top: 20, bottom: 20 }}\r\n            // unit=\"\"\r\n            // type=\"number\"\r\n            // label={{ value: 'WON', angle: -90, position: 'insideLeft' }}\r\n            tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)} \r\n          />\r\n          <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: '%', position: 'center' }} fontSize={10} domain={[0, 100]} ticks={[0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]} />\r\n          <ZAxis dataKey=\"sell_volume\" name=\"sell_volume\" domain={[min_traded_volume, max_trade_volume]} range={[0, 100]} unit=\"ea\" zAxisId=\"sell_vol\" />\r\n          <ZAxis dataKey=\"buy_volume\"  name=\"buy_volume\"  domain={[min_traded_volume, max_trade_volume]} range={[0, 100]} unit=\"ea\" zAxisId=\"buy_vol\" />\r\n          \r\n          {/* <Scatter name=\"red\" dataKey=\"red\" fill=\"red\" /> */}\r\n          <Line yAxisId=\"left\"  type=\"monotone\" dataKey=\"price\" dot={null} isAnimationActive={false} />\r\n          <Line yAxisId=\"right\" type=\"natural\"  dataKey=\"rsi\"   dot={null} stroke={\"#CCC\"} isAnimationActive={false} />\r\n\r\n          <Scatter yAxisId=\"left\" name=\"sell\" dataKey=\"sell_price\" shape=\"circle\" stroke=\"#00F\" fillOpacity={0.5} fill=\"#00F9\" legendType=\"circle\" zAxisId=\"sell_vol\" isAnimationActive={false} />\r\n          <Scatter yAxisId=\"left\" name=\"buy\"  dataKey=\"buy_price\"  shape=\"circle\" stroke=\"#F00\" fillOpacity={0.5} fill=\"#F009\" legendType=\"circle\" zAxisId=\"buy_vol\"  isAnimationActive={false} />\r\n          \r\n          {/* <Line dataKey=\"redLine\" stroke=\"red\" dot={false} activeDot={false} legendType=\"none\" /> */}\r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea yAxisId=\"left\" x1={_viewPort['left']} x2={_viewPort['right']} strokeOpacity={0.3} />\r\n          ) : null}\r\n          \r\n          <ReferenceLine yAxisId=\"right\" y={70} stroke=\"#F00\" />          \r\n          <ReferenceLine yAxisId=\"right\" y={30} stroke=\"#00F\" />\r\n        </ComposedChart>\r\n      </ResponsiveContainer>\r\n    </div>   \r\n  );\r\n}\r\n \r\nexport default RechartDayTrade3min;","import React from 'react';\r\nimport moment from 'moment';\r\nimport xlsx from 'xlsx';\r\nimport { UtilSheet } from '../../utils';\r\nimport RechartDayTrade3min from './recharts/rechart_day_trade_3min';\r\n\r\n\r\nconst VDayTrades = () => {\r\n  const [_data, _setData] = React.useState({});\r\n  const _refDayTradeFileForm = React.useRef();\r\n\r\n  const _parseData = React.useCallback((raw_data) => {\r\n    var data = {};\r\n    var data_pre = {};\r\n\r\n    Object.keys(raw_data).forEach((sheetName) => {      \r\n      if (\r\n        sheetName === 'KODEX 레버리지' || \r\n        sheetName === '신한 레버리지 S&P500 선물 ETN' || \r\n        sheetName === 'TRUE 레버리지 나스닥 100 ETN' || \r\n        sheetName === 'HANARO 글로벌럭셔리S&P(합성)'\r\n      ) {\r\n        raw_data[sheetName].forEach((row) => {\r\n          let date = new Date(row['일자']);\r\n          if (date.getMinutes() % 3 > 0)\r\n            date.setMinutes(date.getMinutes() - date.getMinutes() % 3);          \r\n          let date_string = moment(date).format('YY.MM.DD HH:mm');\r\n          let name = sheetName;\r\n\r\n          if (!data_pre[date_string])\r\n            data_pre[date_string] = {};\r\n\r\n          if (!data_pre[date_string][name])\r\n            data_pre[date_string][name] = {};\r\n\r\n          data_pre[date_string][name]['price'] = row['종가'];\r\n          data_pre[date_string][name]['rsi'] = parseFloat((row['RSI'] * 100).toFixed(2));\r\n        });\r\n      } else if (sheetName === '거래내역') {\r\n        raw_data[sheetName].forEach((row) => {\r\n          let date = UtilSheet.serialDateToJSDate(row['일자'], row['주문시각']);          \r\n          if (date.getMinutes() % 3 > 0)\r\n            date.setMinutes(date.getMinutes() - date.getMinutes() % 3);          \r\n          let date_string = moment(date).format('YY.MM.DD HH:mm');\r\n          let name = row['종목명'];\r\n\r\n          if (!data_pre[date_string])\r\n            data_pre[date_string] = {};\r\n\r\n          if (!data_pre[date_string][name])\r\n            data_pre[date_string][name] = {};\r\n\r\n          if (row['주문구분'] === '현금매도') {\r\n            data_pre[date_string][name]['sell_price' ] = row['주문단가'];\r\n            data_pre[date_string][name]['sell_volume'] = row['주문수량'];\r\n          } else if (row['주문구분'] === '현금매수') {\r\n            data_pre[date_string][name]['buy_price' ] = row['주문단가'];\r\n            data_pre[date_string][name]['buy_volume'] = row['주문수량'];\r\n          }\r\n        })\r\n      }\r\n    });\r\n    \r\n    let date_keys = Object.keys(data_pre);\r\n    date_keys.sort();\r\n\r\n    date_keys.forEach((date_key, i, arr) => {\r\n      let names = Object.keys(data_pre[date_key]);\r\n      names.forEach((name) => {\r\n        if (!data[name])\r\n          data[name] = [];\r\n\r\n        data[name].push({\r\n          date_time: date_key,\r\n          ...data_pre[date_key][name],\r\n        });\r\n      });\r\n    });\r\n\r\n    Object.keys(data).forEach((name) => {\r\n      var last_price = 0;\r\n      var last_rsi = 0;\r\n      data[name] = data[name].map((datum, i, arr) => {\r\n        let price = datum['price'] || last_price;\r\n        let rsi = datum['rsi'] || last_rsi;\r\n        last_price = price;\r\n        last_rsi = rsi;\r\n  \r\n        return {\r\n          ...datum,\r\n          price,\r\n          rsi,\r\n        };\r\n      });\r\n    });\r\n\r\n    return data;\r\n  }, []);\r\n\r\n  \r\n  function uploadSheet(event) {\r\n    var input = event.target; \r\n    var reader = new FileReader();\r\n    reader.onload = function() { \r\n      var fdata = reader.result; \r\n      var read_buffer = xlsx.read(fdata, {type : 'binary'}); \r\n\r\n      let data = {};\r\n      read_buffer.SheetNames.forEach(function(sheetName) {\r\n        var data_rows = xlsx.utils.sheet_to_json(read_buffer.Sheets[sheetName]); \r\n        data[sheetName] = data_rows;\r\n      });\r\n      \r\n      _refDayTradeFileForm.current.reset();      \r\n      localStorage.setItem('day_trade_data', JSON.stringify(data));\r\n      \r\n      _setData(_parseData(data));\r\n    }; \r\n    reader.readAsBinaryString(input.files[0]); \r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"text-start fw-bold my-5 px-4\" style={{fontSize: `calc(${2}rem + ${2}vw)`}}>\r\n        DAY TRADES\r\n      </div>\r\n\r\n      <div className=\"mt-5 d-flex justify-content-center\">\r\n        <div className=\"pe-2\">\r\n          <label type=\"button\" className=\"btn btn-secondary\"\r\n            onClick={e => window.open('https://docs.google.com/uc?export=download&id=1odYcI7b41XpWwZUs--q41rjhw7plenW6', '_blank')}\r\n          >\r\n            DOWNLOAD SAMPLE\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <form ref={_refDayTradeFileForm}>\r\n            <input type=\"file\" accept=\".xlsx\" id=\"pricesFileInput\"\r\n              className=\"d-none\"\r\n              onClick={e => e.target.key = 'prices' + new Date().getMilliseconds()}\r\n              // name=\"pricesFile\" onChange={_setPrices}\r\n              name=\"pricesFile\" onChange={uploadSheet}\r\n            />\r\n          </form>\r\n          <label type=\"button\" htmlFor=\"pricesFileInput\" className=\"btn btn-danger\">UPLOAD XLSX</label>\r\n        </div>\r\n      </div>\r\n\r\n      {/* {Object.keys(_data).map((name) => { */}\r\n      { [\r\n          'KODEX 레버리지',\r\n          '신한 레버리지 S&P500 선물 ETN',\r\n          'TRUE 레버리지 나스닥 100 ETN',\r\n          'HANARO 글로벌럭셔리S&P(합성)',\r\n        ].map((name) => {\r\n        return (\r\n          <React.Fragment key={name}>\r\n            <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n              <h1><b>{name}</b></h1>\r\n            </div>\r\n\r\n            <div className=\"mt-4\">\r\n              <RechartDayTrade3min data={_data[name]} />\r\n            </div>\r\n          </React.Fragment>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VDayTrades;","import React from 'react';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport { VLogin, VMain, VRegister, VBubbles, VYoutubeSearch, VTradeHistoryV1, VDayTrades, VTradeHistory } from '../views';\r\n\r\n\r\nconst MainRoutes = (props) => {\r\n  return ( \r\n    <Switch>\r\n      <Route path=\"/auth/register\"    render={(props) => <VRegister       {...props}/>}/>\r\n      <Route path=\"/auth/login\"       render={(props) => <VLogin          {...props}/>}/>\r\n      <Route path=\"/d3/bubbles\"       render={(props) => <VBubbles        {...props}/>}/>\r\n      <Route path=\"/youtube-search\"   render={(props) => <VYoutubeSearch  {...props}/>}/>\r\n      <Route path=\"/trade-history\"    render={(props) => <VTradeHistory   {...props}/>}/>\r\n      <Route path=\"/trade-history-v1\" render={(props) => <VTradeHistoryV1 {...props}/>}/>\r\n      <Route path=\"/day-trades\"       render={(props) => <VDayTrades      {...props}/>}/>\r\n      <Route exact path=\"/\"           render={(props) => <VMain           {...props}/>}/>\r\n      <Route                          render={(props) => <Redirect to=\"/\" />}/>\r\n    </Switch>\r\n  );\r\n}\r\n \r\nexport default MainRoutes;","import React from 'react';\r\nimport { BrowserRouter, NavLink } from 'react-router-dom';\r\nimport { UtilCommon } from '../utils';\r\nimport { AppState, app_state_default } from './contexts';\r\nimport MainRoutes from './routers/main_routes';\r\nimport { ModalWrapper } from './modals';\r\n\r\nimport api from '../api/api';\r\n\r\nfunction App() {\r\n  const reducer = (prev_state, new_state) => ({ ...prev_state, ...new_state });\r\n  const [state, setState] = React.useReducer(reducer, app_state_default);\r\n  const [message_modals, setMessageModals] = React.useState([\r\n    // <ModalAlert />\r\n  ]);\r\n  const [isServerOn, setIsServerOn] = React.useState(false);\r\n\r\n  async function checkServer() {\r\n    try {\r\n      await api.get('/util/check')\r\n\r\n      setIsServerOn(true);\r\n    } catch (e) {\r\n      console.log('App.checkServer', e);\r\n      setIsServerOn(false);\r\n    }\r\n  }\r\n\r\n\r\n  React.useEffect(() => {\r\n    checkServer();\r\n  }, []);\r\n\r\n\r\n  // Functions for message_modals >>>>>>>>>>>>>>>>>>\r\n  async function closeMessageModal(e) {\r\n    setMessageModals(p_message_modals => {\r\n      if (!p_message_modals.length)\r\n        return p_message_modals;\r\n\r\n      let n_message_modals = p_message_modals.slice();\r\n      n_message_modals.shift();      \r\n      return n_message_modals;  \r\n    });\r\n\r\n    if (!message_modals.length) {\r\n      await UtilCommon.delay(200); // close animation time\r\n      (document.getElementsByTagName('body')[0]).classList.remove('overflow-hidden');\r\n    }\r\n  }\r\n\r\n  async function pushMessageModal({Modal, props = {}, onConfirm = () => {}, onCancel = () => {}}) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!message_modals.length) {\r\n        const body = document.getElementsByTagName('body')[0];\r\n        body.classList.add('overflow-hidden');\r\n      }\r\n\r\n      setMessageModals(p_message_modals => {\r\n        let n_message_modals = p_message_modals.slice();\r\n        n_message_modals.push((\r\n          <Modal\r\n            {...props}\r\n            onConfirm={async e => {\r\n              await onConfirm();\r\n              await closeMessageModal();\r\n              resolve(true);\r\n            }}\r\n            onCancel={async e => {\r\n              await onCancel();\r\n              await closeMessageModal();\r\n              resolve(false);\r\n            }}\r\n          />\r\n        ));\r\n        return n_message_modals;\r\n      });\r\n    });    \r\n  }\r\n  // <<<<<<<<<<<<<<<< Functions for message_modals\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <AppState.Provider value={Object.assign({}, state, {      \r\n        setState,\r\n        pushMessageModal,\r\n      })}>\r\n        <React.Fragment>\r\n          <ModalWrapper modals={message_modals} closeCurrentModal={closeMessageModal} />\r\n          <nav className=\"d-block d-sm-none position-fixed sticky-top w-100\">\r\n            <div className=\"navbar navbar-dark bg-dark\">\r\n              <div className=\"container-fluid\">\r\n                <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarToggleExternalContent\" aria-controls=\"navbarToggleExternalContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                  <span className=\"navbar-toggler-icon\"></span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"collapse bg-dark\" id=\"navbarToggleExternalContent\">\r\n              <ul className=\"nav nav-pills flex-column mb-auto fw-bold\" style={{ minHeight: `${100}vh` }}>\r\n                {isServerOn && (\r\n                  <React.Fragment>\r\n                    <li><NavLink to=\"/auth/login\" className=\"nav-link fw-bold\">로그인</NavLink></li>\r\n                    <li><NavLink to=\"/auth/register\" className=\"nav-link fw-bold\">회원가입</NavLink></li>\r\n                  </React.Fragment>\r\n                )}\r\n                \r\n                <li><NavLink to=\"/d3/bubbles\" className=\"nav-link fw-bold\">D3</NavLink></li>\r\n                <li className=\"ps-2\"><NavLink to=\"/d3/bubbles\" className=\"nav-link fw-bold\" style={{ fontSize: `${0.875}rem`}}>Bubbles</NavLink></li>\r\n                <li><NavLink to=\"/youtube-search\" className=\"nav-link fw-bold\">Youtube Search</NavLink></li>\r\n                {/* <li><NavLink to=\"/trade-history\" className=\"nav-link fw-bold\">Trade History</NavLink></li> */}\r\n                {/* <li><NavLink to=\"/day-trades\" className=\"nav-link fw-bold\">Day Trades</NavLink></li> */}\r\n                <li><NavLink to=\"/\" className=\"nav-link fw-bold\">TEST</NavLink></li>\r\n              </ul>\r\n            </div>\r\n          </nav>\r\n          <nav className=\"d-block d-sm-none\" style={{height: 50}}></nav>\r\n\r\n          <nav className=\"d-none d-sm-inline-block position-fixed top-0 end-0 bg-dark\" style={{zIndex: 1030, borderRadius: '0px 0px 0px 16px'}} >\r\n            <ul className=\"nav d-flex justify-content-end fw-bold\">\r\n              {isServerOn && (\r\n                <React.Fragment>\r\n                  <li><NavLink to=\"/auth/login\" className=\"nav-link fw-bold\">로그인</NavLink></li>\r\n                  <li><NavLink to=\"/auth/register\" className=\"nav-link fw-bold\">회원가입</NavLink></li>                  \r\n                </React.Fragment>\r\n              )}                    \r\n              <li><NavLink to=\"/d3/bubbles\" className=\"nav-link fw-bold ps-4\" style={{ fontSize: `${0.875}rem`}}>Bubbles</NavLink></li>\r\n              <li><NavLink to=\"/youtube-search\" className=\"nav-link fw-bold\">Youtube Search</NavLink></li>\r\n              {/* <li><NavLink to=\"/trade-history\" className=\"nav-link fw-bold\">Trade History</NavLink></li> */}\r\n              {/* <li><NavLink to=\"/day-trades\" className=\"nav-link fw-bold\">Day Trades</NavLink></li> */}\r\n              <li><NavLink exact to=\"/\" className=\"nav-link fw-bold\">TEST</NavLink></li>\r\n            </ul>\r\n          </nav>\r\n\r\n          <MainRoutes />\r\n        </React.Fragment>\r\n      </AppState.Provider>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\n// bootstrap dependency\nimport '@popperjs/core';\nimport 'bootstrap/dist/js/bootstrap.js';\n// style\nimport './styles/_styles.scss';\n// components\nimport App from './components/app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
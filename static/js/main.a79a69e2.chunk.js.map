{"version":3,"sources":["reportWebVitals.js","utils/util_common.js","utils/util_html.js","utils/util_converter.js","utils/util_sheet.js","components/contexts.js","styles/cs.js","components/modals/modal_wrapper.js","components/modals/modal_alert.js","components/views/v_main.js","api/api.js","components/views/auth/v_register.js","utils/util_api.js","components/views/auth/v_login.js","components/fragments/bubbles/tooltip.js","components/fragments/bubbles/bubbles.js","components/fragments/bubbles/grouping_picker.js","components/fragments/bubbles/year_titles.js","components/views/d3/v_bubbles.js","components/views/v_youtube_search.js","components/views/recharts/rechart_alpha.js","components/views/recharts/rechart_arbitrage.js","components/views/recharts/rechart_day_trade.js","components/views/recharts/rechart_total_asset.js","components/views/v_trade_history.js","components/views/recharts/rechart_day_trade_3min.js","components/views/v_day_trades.js","components/routers/main_routes.js","components/app.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","UtilCommon","ms","Promise","resolve","setTimeout","Math","floor","random","toString","padStart","col","amt","replace","color","min","max","parseInt","substr","UtilHtml","e","callback","window","event","keyCode","which","UtilConverter","number","Intl","NumberFormat","format","UtilSheet","excelSerialDate","excelSerialTime","Date","UTC","app_state_default","isWideMode","AppState","React","createContext","cs","classNames","bind","styles","ModalWrapper","props","useState","visible","setVisible","opacity","setOpacity","modals","setModals","useEffect","animation_duration","a","delay","length","showModal","hideModal","className","onClick","closeCurrentModal","defaultProps","console","log","ModalAlert","style","maxHeight","overflow","type","onCancel","whiteSpace","lineBreak","width","maxWidth","message","onConfirm","VMain","Consumer","state","pushMessageModal","Modal","modal_result","JSON","stringify","api","axios","create","baseURL","process","timeout","headers","interceptors","request","use","config","response","error","reject","status","url","params","data","VRegister","axios_cancel_source","CancelToken","source","cancel","app_state","useContext","login_id","password","password_confirm","email","form_data","setFormData","handleInput","name","target","value","submit","preventDefault","post","cancelToken","token","result","onSubmit","onChange","placeholder","UtilApi","errorMessageMap","defaultErrorMessageMap","Object","assign","input","toLowerCase","errors","keys","i","key","indexOf","VLogin","res","content","auth","isCancel","translateErrorMessages","tooltip","tooltipId","tt","d3","append","attr","hideTooltip","updatePosition","ttw","tth","wscrX","scrollX","wscrY","scrollY","curX","document","getElementById","clientX","pageX","curY","clientY","pageY","ttleft","xOffset","innerWidth","tttop","yOffset","showTooltip","html","floatingTooltip","fillColor","domain","range","Bubbles","shouldComponentUpdate","g","forceStrength","center","simulation","velocityDecay","force","strength","x","y","charge","on","ticked","stop","d","this","radius","selectAll","nextProps","renderBubbles","groupByYear","regroupBubbles","bubbles","id","exit","remove","enter","classed","group","darker","showDetail","hideDetail","transition","duration","nodes","alpha","restart","yearCenters","year","ref","setState","onRef","Component","GroupingPicker","onBtnClick","onChanged","active","YearsTitles","map","fontSize","textAnchor","alignmentBaseline","BubbleChart","height","children","VBubbles","setData","grouping","setGrouping","d3Params","setD3Params","clientWidth","clientHeight","2008","2009","2010","rawData","max_amount","total_amount","findRadius","exponent","grant_title","org","organization","start_year","sort","b","createNodes","n_grouping","VYoutubeSearch","query","pageToken","bannedChannels","searchInfo","setSearchInfo","list","setList","history","setHistory","last_history","localStorage","getItem","parse","requestSearch","lastHistory","slice","pop","get","q","part","fields","maxResults","order","result_list","bannedChannelsList","split","channelTitle","trim","nHistory","push","setItem","nextPageToken","datum","nList","items","filter","item","title","he","decode","snippet","concat","h","top","onKeyDown","searchEnter","arr","videoId","href","rel","src","alt","nBannedChannels","moment","_colors_map","lightenDarkenColor","makeRandomColor","RechartAlpha","bottom","_domain","setDomain","left","right","_refArea","setRefArea","_purified_data","setPurifiedData","_reviseData","useCallback","from","to","initial_values","purified_data","accumulation_of_return_of_asset","initial_day_trade_return","is_selected_range","parseFloat","toFixed","date","background","_zoom","ceil","getAxisYDomain","AlphaTooltip","payload","label","payload_return_of_asset","colSpan","textAlign","number2commadStringWithIntl","userSelect","ResponsiveContainer","ComposedChart","onMouseDown","activeLabel","onMouseMove","onMouseUp","_zoomOut","margin","CartesianGrid","strokeDasharray","Tooltip","Legend","align","verticalAlign","iconSize","wrapperStyle","XAxis","allowDataOverflow","dataKey","angle","tickSize","tickMargin","padding","YAxis","yAxisId","tickFormatter","orientation","position","ticks","Line","stroke","strokeWidth","animationDuration","LabelList","offset","fontWeight","dot","x1","y1","x2","y2","stopColor","stopOpacity","Area","fillOpacity","fill","ReferenceLine","ReferenceArea","strokeOpacity","RechartArbitrage","_viewPort","_setViewPort","_setPurifiedData","accumulation","min_traded_volume","max_trade_volume","min_count","max_count","forEach","ArbitrageTooltip","payloads","total_arbitrage","total_color","payload_accumulation","price","Bar","stackId","RechartDayTrade","AssetRatioTooltip","payload_price","payload_avg_price","payload_buy","payload_sell","full_payload","Fragment","CountDot","cx","cy","count","size","viewBox","r","dataMin","dataMax","ZAxis","unit","zAxisId","Scatter","shape","legendType","RechartTotalAsstRatio","percent","reverse","AreaChart","defaultShowTooltip","formatter","v","VTradeHistory","_total_asset_data","setTotalAssetData","_algorithm_trade_data","setAlgorithmTradeData","_alpha_data","setAlphaData","_selected_algorithm_trade_data_name","setSelectedAlgorithmTradeDataName","_arbitrage_data","setArbitrageData","_selected_algorithm_trade_data","_refPricesFileForm","useRef","_parseData","total_asset_data","algorithm_trade_data","arbitrage_data_pre","arbitrage_data","alpha_data_pre","alpha_data","sheetName","row","serialDateToJSDate","date_string","safety_asset_ratio","percentages","getPercentage","arbitrage","buy_price","sell_price","buy_volume","sell_volume","a_price","local_data","accept","getMilliseconds","reader","FileReader","onload","fdata","read_buffer","xlsx","read","SheetNames","data_rows","utils","sheet_to_json","Sheets","current","reset","readAsBinaryString","files","htmlFor","checked","RechartDayTrade3min","payload_rsi","isAnimationActive","VDayTrades","_data","_setData","_refDayTradeFileForm","raw_data","data_pre","getMinutes","setMinutes","date_keys","date_key","date_time","last_price","last_rsi","rsi","MainRoutes","path","render","exact","App","useReducer","prev_state","new_state","message_modals","setMessageModals","isServerOn","setIsServerOn","closeMessageModal","p_message_modals","n_message_modals","shift","getElementsByTagName","classList","add","checkServer","Provider","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","minHeight","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.a79a69e2.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","class UtilCommon {\r\n  static async delay(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n  }\r\n\r\n  static makeRandomColor() {\r\n    return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');\r\n  }\r\n\r\n  static lightenDarkenColor(col, amt) {\r\n    return '#' + col.replace(/^#/, '').replace(/../g, color => ('0'+Math.min(255, Math.max(0, parseInt(color, 16) + amt)).toString(16)).substr(-2));\r\n  }\r\n}\r\nexport default UtilCommon;","class UtilHtml {\r\n  static searchEnter(e, callback) {\r\n    if (!e)\r\n      e = window.event;\r\n    const key = e.keyCode ? e.keyCode : e.which;\r\n    if (key === 13) {\r\n      callback();\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n}\r\nexport default UtilHtml;","class UtilConverter {\r\n  static number2commadStringWithIntl(number) {\r\n    try {\r\n      var formatter = new Intl.NumberFormat(\"en-US\");\r\n      return formatter.format(number);\r\n    } catch (e) {\r\n      return number;\r\n    }\r\n  }\r\n}\r\nexport default UtilConverter;","class UtilSheet {\r\n  static serialDateToJSDate(excelSerialDate, excelSerialTime = 0) {\r\n    return new Date(Date.UTC(0, 0, excelSerialDate - 1, -9, 0, 24 * excelSerialTime * 60 * 60)); // time-zone -9\r\n  }\r\n}\r\nexport default UtilSheet;","import React from 'react';\r\n\r\nconst app_state_default = {\r\n  isWideMode: false,\r\n};\r\nconst AppState = React.createContext(app_state_default);\r\n\r\nexport {\r\n  AppState, app_state_default,  \r\n};","import classNames from 'classnames/bind';\r\nimport styles from './_styles.scss';\r\nconst cs = classNames.bind(styles);\r\nexport default cs;","import React, { useEffect } from 'react';\r\nimport cs from '../../styles/cs';\r\nimport UtilCommon from '../../utils/util_common';\r\n\r\nconst ModalWrapper = (props) => {\r\n  const [visible, setVisible] = React.useState(false);\r\n  const [opacity, setOpacity] = React.useState(false);\r\n  const [modals, setModals] = React.useState([]);\r\n\r\n  useEffect(() => {\r\n    async function showModal(animation_duration) {\r\n      setOpacity(false);\r\n      setVisible(true);\r\n      setModals(props.modals);\r\n      await UtilCommon.delay(animation_duration);\r\n      setOpacity(true);\r\n    };\r\n\r\n    async function hideModal(animation_duration) {\r\n      setOpacity(false);\r\n      await UtilCommon.delay(animation_duration);\r\n      setVisible(false);\r\n      setModals(props.modals);\r\n    }\r\n\r\n    if (props.modals.length > modals.length)\r\n      showModal(100);\r\n    else if (props.modals.length < modals.length)\r\n      hideModal(200);\r\n\r\n  }, [props.modals, modals]);\r\n\r\n  if (!modals.length)\r\n    return null;\r\n\r\n  return ( \r\n    <div className={cs({ 'modal-wrapper': true, visible, opacity })}>\r\n      <div className=\"modal-wrapper-backdrop\" onClick={props.closeCurrentModal}/>\r\n      <div className=\"modal-wrapper-container\">\r\n        {modals[0]}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nModalWrapper.defaultProps = {\r\n  modals: [],\r\n  closeCurrentModal: () => console.log('closeCurrentModal() is not defined.')  \r\n}\r\n \r\nexport default ModalWrapper;","const ModalAlert = (props) => {\r\n  return ( \r\n    <div style={{ maxHeight: `${80}vh`, overflow: 'auto' }}>\r\n      <div className=\"text-end pt-2 pe-2\">\r\n        <button type='button' className=\"btn-close\" onClick={props.onCancel} />\r\n      </div>\r\n      <div className=\"py-3\" style={{whiteSpace: 'pre-wrap', lineBreak: \"anywhere\", width: `${480}px`, maxWidth: `${90}vw`}}>\r\n        {props.message}\r\n      </div>\r\n      <div className=\"text-end\">\r\n        <button type='button' className=\"btn btn-primary text-light fw-bold rounded\" onClick={props.onConfirm}>확인</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nModalAlert.defaultProps = {\r\n  message: 'NO MESSAGE',\r\n  onConfirm: () => {},\r\n  onCancel : () => {},\r\n}\r\n \r\nexport default ModalAlert;","import { AppState } from \"../contexts\";\r\nimport { ModalAlert } from \"../modals\";\r\n\r\nconst VMain = () => {\r\n  return (\r\n    <div>\r\n      <div>\r\n        Here's main\r\n      </div>\r\n      <br/>\r\n\r\n      <AppState.Consumer>\r\n        {state => (\r\n          <div style={{ whiteSpace: 'pre-wrap' }}>\r\n            <div>\r\n              <button type='button' onClick={async e => {\r\n                const modal_result = await state.pushMessageModal({\r\n                  Modal: ModalAlert,\r\n                  props: {\r\n                    message: '테스트 메세지입니다.'\r\n                  },\r\n                  onConfirm: () => { console.log('CONFIRM'); },\r\n                  onCancel: () => { console.log('CANCEL 73473'); }\r\n                });\r\n                console.log('MODAL_CONFIRMED? : ' + modal_result);\r\n                if (modal_result === false)\r\n                  return;\r\n                await state.pushMessageModal({\r\n                  Modal: ModalAlert,\r\n                  props: {\r\n                    message: '테스트 메세지입니다. 2'\r\n                  },\r\n                  onConfirm: () => { console.log('CONFIRM'); },\r\n                  onCancel: () => { console.log('CANCEL 52374'); }\r\n                });\r\n              }}>\r\n                PUSH MODAL\r\n              </button>\r\n            </div>\r\n            <div>\r\n              {JSON.stringify(state, '', 2)}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </AppState.Consumer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VMain;","import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: `${process.env.REACT_APP_SERVER_API}/api`,\r\n  timeout: 3000,\r\n  headers: {\r\n    'content-type': 'application/json'\r\n  },\r\n});\r\n\r\n\r\napi.interceptors.request.use(function (config) {\r\n  // var auth = DataAuth.get();\r\n  // if (!auth?.value?.token)\r\n  //   return config;\r\n  \r\n  // config.headers['x-api-key'] = auth.value.token;\r\n  return config;\r\n});\r\n\r\napi.interceptors.response.use(response => {\r\n  return response;\r\n}, error => {\r\n  /* pattern_reference: Axios Handle Errors (https://www.npmjs.com/package/axios#handling-errors) */\r\n  if (error.response) {\r\n    // The request was made and the server responded with a status code\r\n    // that falls out of the range of 2xx\r\n    // console.log(error.response.data);\r\n    // console.log(error.response.status);\r\n    // console.log(error.response.headers);\r\n    return Promise.reject({\r\n      status : error.response.status,\r\n      headers: error.config.headers,\r\n      url    : error.config.baseURL + error.config.url,\r\n      params : error.config.data,\r\n      ...error.response.data // contain message on general\r\n    });\r\n  } else if (error.request) {\r\n    // The request was made but no response was received\r\n    // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\r\n    // http.ClientRequest in node.js\r\n    // console.log(error.request);\r\n    return Promise.reject({\r\n      status : error.request.status,\r\n      headers: error.config.headers,\r\n      url    : error.config.baseURL + error.config.url,\r\n      params : error.config.data,\r\n      message: error.message\r\n    });\r\n  } else {\r\n    // Something happened in setting up the request that triggered an Error\r\n    return Promise.reject(error);\r\n  }\r\n});\r\n\r\nexport default api;","import axios from 'axios';\r\nimport React, { useContext, useEffect } from 'react';\r\nimport api from '../../../api/api';\r\nimport { AppState } from '../../../components/contexts';\r\nimport { ModalAlert } from '../../modals';\r\n\r\nconst VRegister = (props) => {\r\n  let axios_cancel_source = axios.CancelToken.source();\r\n  useEffect(() => () => axios_cancel_source.cancel(), [ axios_cancel_source ]);\r\n\r\n  const app_state = useContext(AppState);\r\n\r\n  const [form_data, setFormData] = React.useState({login_id: '', password: '', password_confirm: '', email: ''});\r\n\r\n  \r\n  const handleInput = (e) => {\r\n    let name = e.target.name;\r\n\r\n    setFormData(state => {\r\n      return {\r\n        ...state,\r\n        [name]: e.target.value\r\n      };\r\n    });\r\n  };\r\n\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      let result = await api.post('/auth/register', {\r\n        login_id: form_data['login_id'],\r\n        password: form_data['password'],\r\n        '#email': form_data['email'],\r\n      }, {\r\n        cancelToken: axios_cancel_source.token\r\n      })\r\n      \r\n      await app_state.pushMessageModal({\r\n        Modal: ModalAlert,\r\n        props: {\r\n          message: '가입되었습니다'\r\n        },\r\n        onConfirm: () => { console.log('CONFIRM'); },\r\n        onCancel: () => { console.log('CANCEL 52374'); }\r\n      })\r\n\r\n      console.log(result)\r\n    } catch (e) {\r\n      console.log(e);      \r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={submit}>\r\n      <div className=\"mx-auto w-100p\" style={{width: `${100}%`, maxWidth: `${20}em`}}>\r\n        <input type=\"text\"     name=\"login_id\"         value={form_data['login_id']}         onChange={handleInput} placeholder=\"ID\"/>\r\n        <input type=\"password\" name=\"password\"         value={form_data['password']}         onChange={handleInput} placeholder=\"PASSWORD\"/>\r\n        <input type=\"password\" name=\"password_confirm\" value={form_data['password_confirm']} onChange={handleInput} placeholder=\"CONFIRM PASSWORD\"/>\r\n        <input type=\"email\"    name=\"email\"            value={form_data['email']}            onChange={handleInput} placeholder=\"EMAIL\"/>\r\n        <div>\r\n          <input type=\"submit\" value=\"REGISTER\"/>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\n \r\nexport default VRegister;","class UtilApi {\r\n  /**\r\n   * \r\n   * @param {{message: string}} error API error\r\n   * @param {{error_message: string}} errorMessageMap The value is translated message.\r\n   */\r\n  static translateErrorMessages(error = {}, errorMessageMap = {}) {\r\n    if (!error?.message)\r\n      return;\r\n\r\n    const defaultErrorMessageMap = {\r\n      'SequelizeDatabaseError': 'DB 구문 에러.\\n관리자에게 문의해주세요',\r\n      'timeout of': '서버 응답시간이 초과되었습니다.\\n다시 시도해주세요.'\r\n    };\r\n    \r\n    errorMessageMap = Object.assign(defaultErrorMessageMap, errorMessageMap);\r\n\r\n    const input = error.message.toLowerCase();\r\n    const errors = Object.keys(errorMessageMap);\r\n    for (let i = 0; i < errors.length; ++i) {\r\n      const key = errors[i];\r\n      if (input.indexOf(key.toLowerCase()) >= 0)\r\n        return errorMessageMap[key];\r\n    }\r\n    return;\r\n  }\r\n}\r\nexport default UtilApi;","import axios from 'axios';\r\nimport React, { useContext, useEffect } from 'react';\r\nimport api from '../../../api/api';\r\nimport { AppState } from '../../../components/contexts';\r\nimport UtilApi from '../../../utils/util_api';\r\nimport { ModalAlert } from '../../modals';\r\n\r\nconst VLogin = (props) => {\r\n  let axios_cancel_source = axios.CancelToken.source();\r\n  useEffect(() => () => axios_cancel_source.cancel(), [ axios_cancel_source ]);\r\n\r\n  const app_state = useContext(AppState);\r\n\r\n  const [form_data, setFormData] = React.useState({login_id: '', password: '', password_confirm: '', email: ''});\r\n\r\n  \r\n  const handleInput = (e) => {\r\n    let name = e.target.name;\r\n\r\n    setFormData(state => {\r\n      return {\r\n        ...state,\r\n        [name]: e.target.value\r\n      };\r\n    });\r\n  };\r\n\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      const auth = await api.post('/auth/login', {\r\n        login_id: form_data['login_id'],\r\n        password: form_data['password']\r\n      }, {\r\n        cancelToken: axios_cancel_source.token\r\n      })\r\n        .then(res => res?.data?.content)\r\n      \r\n      console.log(auth)\r\n      \r\n      await app_state.pushMessageModal({\r\n        Modal: ModalAlert,\r\n        props: {\r\n          message: '로그인 성공'\r\n        },\r\n        onConfirm: () => { console.log('CONFIRM'); },\r\n        onCancel: () => { console.log('CANCEL 52374'); }\r\n      })\r\n    } catch (e) {\r\n      if (axios.isCancel(e)) {\r\n        console.log('Canceled.');\r\n        return;\r\n      }\r\n\r\n      const message = UtilApi.translateErrorMessages(e, {\r\n        'no user': '해당하는 유저가 없습니다.'\r\n      });\r\n      await app_state.pushMessageModal({\r\n        Modal: ModalAlert,\r\n        props: {\r\n          message\r\n        },\r\n        onConfirm: () => { console.log('CONFIRM'); },\r\n        onCancel: () => { console.log('CANCEL 52374'); }\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={submit}>\r\n      <div className=\"mx-auto w-100p py-3\" style={{width: `${100}%`, maxWidth: `${20}em`}}>\r\n        <input type=\"text\"     className=\"form-control\"  name=\"login_id\" value={form_data['login_id']} onChange={handleInput} placeholder=\"ID\"/>\r\n        <input type=\"password\" className=\"form-control\"  name=\"password\" value={form_data['password']} onChange={handleInput} placeholder=\"PASSWORD\"/>\r\n        <div>\r\n          <input type=\"submit\" value=\"LOGIN\" className=\"btn btn-primary w-100\" />\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\n \r\nexport default VLogin;","import * as d3 from 'd3';\r\nimport './tooltip.scss';\r\n\r\n\r\nfunction floatingTooltip(tooltipId, width) {\r\n  // Local variable to hold tooltip div for manipulation in other functions.\r\n  const tt = d3.select('body').append('div')\r\n    .attr('class', 'bubble-tooltip')\r\n    .attr('id', tooltipId)\r\n    .style('pointer-events', 'none');\r\n\r\n  if (width)\r\n    tt.style('width', width)\r\n\r\n  hideTooltip(); // initially hide\r\n    \r\n  function hideTooltip () {\r\n    tt.style('opacity', 0.0);\r\n  }\r\n\r\n  function showTooltip (content, event) {\r\n    tt.style('opacity', 1.0)\r\n      .html(content)\r\n\r\n    updatePosition(event);\r\n  }\r\n\r\n  function updatePosition(event) {\r\n    const xOffset = 20;\r\n    const yOffset = 10;\r\n\r\n    const ttw = tt.style('width');\r\n    const tth = tt.style('height');\r\n\r\n    const wscrX = window.scrollX;\r\n    const wscrY = window.scrollY;\r\n\r\n    const curX = (document.getElementById) ? event.clientX + wscrX : event.pageX;\r\n    const curY = (document.getElementById) ? event.clientY + wscrY : event.pageY;\r\n\r\n    let ttleft = ((curX - wscrX + xOffset * 2 + ttw) > window.innerWidth)\r\n      ? curX - ttw - xOffset * 2 \r\n      : curX + xOffset;\r\n    if (ttleft < wscrX + xOffset)\r\n      ttleft = wscrX + xOffset;\r\n\r\n    let tttop = ((curY - wscrY + yOffset * 2 + tth) > window.innerWidth)\r\n      ? curY - tth - yOffset * 2 \r\n      : curY + yOffset;\r\n    if (tttop < wscrY + yOffset)\r\n      tttop = wscrY + yOffset;\r\n\r\n    tt\r\n      .style('top', `${tttop}px`)\r\n      .style('left', `${ttleft}px`);    \r\n  }\r\n\r\n  return {\r\n    showTooltip,\r\n    hideTooltip,\r\n    updatePosition,\r\n  };\r\n}\r\n\r\nconst tooltip = floatingTooltip('gates_tooltip', 240);\r\nexport default tooltip;","import React from 'react'\r\nimport * as d3 from 'd3';\r\nimport tooltip from './tooltip';\r\n\r\nconst fillColor = d3.scaleOrdinal().domain(['low', 'medium', 'high']).range(['#525b7a', '#beccde', '#5aa2bc']);\r\n\r\nclass Bubbles extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { \r\n      g: null\r\n    }\r\n\r\n    const { forceStrength, center } = this.props\r\n    this.simulation = d3.forceSimulation()\r\n      .velocityDecay(0.2)\r\n      .force('x', d3.forceX().strength(forceStrength).x(center.x))\r\n      .force('y', d3.forceY().strength(forceStrength).y(center.y))\r\n      .force('charge', d3.forceManyBody(this.charge.bind(this)))\r\n      .on('tick', this.ticked.bind(this))\r\n      .stop()\r\n  }\r\n\r\n  charge(d) {\r\n    return -this.props.forceStrength * (d.radius ** 2.0)\r\n  }\r\n\r\n  ticked() {\r\n    this.state.g.selectAll('.bubble')\r\n      .attr('cx', d => d.x)\r\n      .attr('cy', d => d.y)\r\n  }\r\n\r\n\r\n  \r\n  shouldComponentUpdate = () => false\r\n\r\n  // TODO: replace it with other method (deprecated)\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.data !== this.props.data)\r\n      this.renderBubbles(nextProps.data)\r\n    if (nextProps.groupByYear !== this.props.groupByYear)\r\n      this.regroupBubbles(nextProps.groupByYear)\r\n  }\r\n  \r\n\r\n\r\n  renderBubbles(data) {\r\n    const bubbles = this.state.g.selectAll('.bubble')\r\n      .data(data, d => d.id)\r\n\r\n    // EXIT\r\n    bubbles.exit().remove()\r\n\r\n    // ENTER\r\n    const bubblesE = bubbles.enter().append('circle')\r\n      .classed('bubble', true)\r\n      .attr('r', 0)\r\n      .attr('cx', d => d.x)\r\n      .attr('cy', d => d.y)\r\n      .attr('fill', d => fillColor(d.group))\r\n      .attr('stroke', d => d3.rgb(fillColor(d.group)).darker())\r\n      .attr('stroke-width', 2)\r\n      // TODO: ADD TOOLTIP\r\n      .on('mouseover', showDetail)\r\n      .on('mouseout', hideDetail)\r\n\r\n      bubblesE.transition().duration(2000)\r\n        .attr('r', d => d.radius)\r\n        .on('end', () => {\r\n          this.simulation.nodes(data)\r\n            .alpha(1)\r\n            .restart()\r\n        })\r\n  }\r\n  \r\n  regroupBubbles (groupByYear) {\r\n    const { forceStrength, yearCenters, center } = this.props;\r\n    if (groupByYear)\r\n      this.simulation\r\n        .force('x', d3.forceX().strength(forceStrength).x(d => yearCenters[d.year].x))\r\n        .force('y', d3.forceY().strength(forceStrength).y(d => yearCenters[d.year].y));        \r\n    else\r\n      this.simulation\r\n        .force('x', d3.forceX().strength(forceStrength).x(center.x))\r\n        .force('y', d3.forceY().strength(forceStrength).y(center.y));\r\n    \r\n    this.simulation.alpha(1).restart();\r\n  }\r\n\r\n\r\n  onRef (ref) {\r\n    this.setState({ g: d3.select(ref) }, () => this.renderBubbles(this.props.data))\r\n  }\r\n\r\n  render() {\r\n    return ( \r\n      <g ref={this.onRef.bind(this)} className=\"bubbles\" />\r\n    )\r\n  }\r\n}\r\n \r\nexport default Bubbles;\r\n\r\nexport function showDetail(d) {\r\n  d3.select(this).attr('stroke', 'black');\r\n\r\n  const content = `<span class=\"name\">Title: </span><span class=\"value\">${d.name}</span><br/>`\r\n    + `<span class=\"name\">Amount: </span><span class=\"value\">$${d.value}</span><br/>`\r\n    + `<span class=\"name\">Year: </span><span class=\"value\">${d.year}</span>`;\r\n\r\n  tooltip.showTooltip(content, d3.event);\r\n}\r\n\r\n\r\nexport function hideDetail(d) {\r\n  d3.select(this).attr('stroke', d3.rgb(fillColor(d.group)).darker());\r\n  \r\n  tooltip.hideTooltip();\r\n}","  \r\nimport React from 'react';\r\nimport './grouping_picker.scss';\r\n\r\nexport default class GroupingPicker extends React.Component {\r\n  onBtnClick = (event) => {\r\n    this.props.onChanged(event.target.name)\r\n  }\r\n  render() {\r\n    const { active } = this.props\r\n    return (\r\n      <div className=\"GroupingPicker\">\r\n        <button className={`button ${active === 'all' && 'active'}`} name=\"all\" onClick={this.onBtnClick}>All Grants</button>\r\n        <button className={`button ${active === 'year' && 'active'}`} name=\"year\" onClick={this.onBtnClick}>Grants By Year</button>\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default function YearsTitles({ yearCenters }) {\r\n  return (\r\n    <g className=\"yearsTitles\">\r\n      {\r\n        Object.keys(yearCenters).map(year =>\r\n          <text\r\n            key={year}\r\n            x={yearCenters[year].x}\r\n            y={50}\r\n            fontSize=\"35\"\r\n            textAnchor=\"middle\"\r\n            alignmentBaseline=\"middle\"\r\n          >\r\n            {\r\n              year\r\n            }\r\n          </text>)\r\n      }\r\n    </g>\r\n  )\r\n}","import React from 'react';\r\nimport * as d3 from 'd3';\r\nimport { Bubbles, GroupingPicker, YearsTitles } from '../../fragments';\r\n\r\n\r\n\r\n\r\n\r\nconst VBubbles = () => {\r\n  const [data, setData] = React.useState([]);\r\n  const [grouping, setGrouping] = React.useState('all');\r\n  const [d3Params, setD3Params] = React.useState({})\r\n\r\n  \r\n\r\n  const onGroupingChanged = (n_grouping) => setGrouping(n_grouping)\r\n  \r\n  React.useEffect(() => {\r\n    const width  = document.getElementById('main').clientWidth // 960\r\n    const height = document.getElementById('main').clientHeight - 49 // 640\r\n    const center = { x: width / 2, y: height / 2 }\r\n    const yearCenters = {\r\n      2008: { x: width / 4, y: height / 2 },\r\n      2009: { x: width / 2, y: height / 2 },\r\n      2010: { x: (3 / 4) * width, y: height / 2 },\r\n    }\r\n    setD3Params({ width, height, center, yearCenters })\r\n    \r\n    const createNodes = (rawData) => {\r\n      if (!width || !height)\r\n        return;\r\n  \r\n      const max_amount = d3.max(rawData, d => +d.total_amount);\r\n      const findRadius = d3.scalePow()\r\n        .exponent(0.5)\r\n        .range([2, 85])\r\n        .domain([0, max_amount]);\r\n  \r\n      let nodes = rawData.map(d => ({\r\n        id: d.id,\r\n        radius: findRadius(+d.total_amount),\r\n        value: +d.total_amount,\r\n        name: d.grant_title,\r\n        org: d.organization,\r\n        group: d.group,\r\n        year: d.start_year,\r\n        x: Math.random() * width,\r\n        y: Math.random() * height\r\n      }));\r\n  \r\n      // prevent occlusion of smaller nodes.\r\n      nodes.sort((a, b) => b.value - a.value);\r\n      \r\n      return nodes\r\n    }\r\n\r\n    d3.csv('/data/gates_money.csv', function (error, data) {\r\n      if (error) {\r\n        console.log('error', error);\r\n        return\r\n      }\r\n      let nodes = createNodes(data);\r\n      setData(nodes);\r\n    })\r\n      // .then((arr) => {\r\n      //   console.log(arr);\r\n      //   // setData(createNodes(arr));\r\n      // });\r\n  }, []);\r\n\r\n  return ( \r\n    <div style={{ whiteSpace: 'pre-wrap', lineBreak: 'anywhere', height: `${100}%`, overflow: 'auto' }}>\r\n      <GroupingPicker onChanged={onGroupingChanged} active={grouping} />\r\n      {(d3Params.width && d3Params.height) && (\r\n        <BubbleChart width={d3Params.width} height={d3Params.height}>\r\n          <Bubbles data={data} forceStrength={0.08} center={d3Params.center} yearCenters={d3Params.yearCenters} groupByYear={grouping === 'year'} />\r\n          {grouping === 'year' && (\r\n            <YearsTitles width={d3Params.width} yearCenters={d3Params.yearCenters} />\r\n          )}\r\n        </BubbleChart>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nconst BubbleChart = ({width, height, children}) => {\r\n  return ( \r\n    <svg className=\"bubbleChart\" width={width} height={height}>\r\n      {children}\r\n    </svg>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default VBubbles;","import React from 'react';\r\nimport axios from 'axios';\r\nimport he from 'he';\r\nimport { UtilHtml } from '../../utils';\r\nimport moment from 'moment';\r\n\r\nconst VYoutubeSearch = () => {\r\n  const [searchInfo, setSearchInfo] = React.useState({query: '', pageToken: '', bannedChannels: ''});\r\n  const [list, setList] = React.useState([]);\r\n  const [history, setHistory] = React.useState([]); // {query: '', pageToken: '', bannedChannels: ''}\r\n\r\n  React.useEffect(() => {\r\n    let last_history = localStorage.getItem('youtube_history');\r\n    if (!last_history)\r\n      return;\r\n    \r\n    setHistory(JSON.parse(last_history));\r\n  }, [setHistory]);\r\n\r\n\r\n  const requestSearch = async (e) => {\r\n    let pageToken = searchInfo.pageToken;\r\n    if (history.length) {\r\n      const lastHistory = history.slice().pop();\r\n      if (\r\n        (lastHistory.query !== searchInfo.query) ||\r\n        (lastHistory.bannedChannels !== searchInfo.bannedChannels)\r\n      ) {\r\n        pageToken = '';\r\n      }\r\n    }\r\n\r\n    let result_list;\r\n    try {\r\n      // https://developers.google.com/youtube/v3/getting-started#quota\r\n      result_list = await axios.get('https://www.googleapis.com/youtube/v3/search', {\r\n        params: {\r\n          pageToken,\r\n          key: process.env.REACT_APP_GOOGLE_API_KEY,\r\n          q: searchInfo.query,\r\n          part: 'snippet',\r\n          fields: 'nextPageToken,items(id(videoId),snippet(channelTitle,title,publishTime,thumbnails(medium(url))))',\r\n          maxResults: 50,\r\n          order: 'date',\r\n          type: 'video'\r\n        }            \r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      return;\r\n    }\r\n\r\n    const bannedChannelsList = searchInfo.bannedChannels.split(',').map(channelTitle => channelTitle.trim());\r\n    \r\n    const nHistory = history.slice();\r\n    nHistory.push(searchInfo);\r\n    setHistory(nHistory);\r\n    localStorage.setItem('youtube_history', JSON.stringify(nHistory));\r\n    setSearchInfo({...searchInfo, pageToken: result_list.data.nextPageToken});\r\n\r\n    const keys = list.map(datum => datum['id']['videoId']);\r\n\r\n    const nList = result_list.data.items\r\n      .filter(item => {\r\n        if (bannedChannelsList.indexOf(item['snippet']['channelTitle']) >= 0)\r\n          return false;\r\n\r\n        if (!pageToken)\r\n          return true;\r\n\r\n        if (pageToken && keys.indexOf(item['id']['videoId']) >= 0)\r\n          return false;\r\n\r\n        return true;\r\n      })\r\n      .map(item => {\r\n        const title = he.decode(item['snippet']['title']);\r\n        return {\r\n          ...item,\r\n          snippet: {\r\n            ...item.snippet,\r\n            title\r\n          }\r\n        };\r\n      });\r\n    if (pageToken)\r\n      setList(list.concat(nList));\r\n    else\r\n      setList(nList);\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex\">\r\n      <div className=\"flex-shrink-0 d-none d-sm-block overflow-auto bg-gray text-light\" style={{ width: `${16}em`, height: `${100}vh` }}>\r\n        <nav>\r\n          <ul className=\"nav nav-pills flex-column mb-auto fw-bold\">\r\n            {history.map((h, i) => {\r\n              return (\r\n                <li key={i}>\r\n                  <button type=\"button\" className=\"btn btn-primary w-100\" onClick={e => setSearchInfo(h)}>\r\n                    {h.query}\r\n                  </button>\r\n                </li>\r\n              );\r\n            })}            \r\n          </ul>\r\n        </nav>\r\n      </div>\r\n      <div className=\"container-fluid overflow-scroll\" style={{height: \"100vh\"}}>\r\n        <div className=\"position-sticky\" style={{top: 0}}>\r\n          <div className=\"d-flex\">\r\n            <div>\r\n              <input type=\"text\" className=\"form-control\" \r\n                value={searchInfo.query} \r\n                onChange={e => setSearchInfo({...searchInfo, query: e.target.value})} \r\n                onKeyDown={e => UtilHtml.searchEnter(e, requestSearch)}\r\n              />\r\n            </div>\r\n            <button type=\"button\" className=\"btn btn-primary\"\r\n              onClick={requestSearch}\r\n            >\r\n              {list.length ? 'More' : 'Search'}\r\n            </button>\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            <div>\r\n              <input type=\"text\" className=\"form-control\"\r\n                value={searchInfo.bannedChannels}\r\n                onChange={e => setSearchInfo({ ...searchInfo, bannedChannels: e.target.value })}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* <div style={{height: \"64px\"}}></div> */}\r\n        <div className=\"row mt-5\">\r\n          {list.map((datum, i, arr) => {\r\n            const videoId = datum['id']['videoId'];\r\n            return (\r\n              <div key={videoId} className=\"col-3\">\r\n                  <div>\r\n                    <a href={`https://www.youtube.com/watch?v=${videoId}`} target=\"_blank\" rel=\"noreferrer\">\r\n                      <img src={datum['snippet']['thumbnails']['medium']['url']} alt={`tmb_${i}`} />\r\n                    </a>\r\n                  </div>\r\n                <div>{datum['snippet']['title']}</div>\r\n                <div className=\"text-end\">\r\n                  <span className=\"text-danger selectable tooltip\" onClick={e => {\r\n                    var nBannedChannels = (searchInfo['bannedChannels']) \r\n                      ? datum['snippet']['channelTitle'] + ','  + searchInfo['bannedChannels']\r\n                      : datum['snippet']['channelTitle']\r\n                    setSearchInfo({...searchInfo, bannedChannels: nBannedChannels})\r\n                  }}>\r\n                    {datum['snippet']['channelTitle']}\r\n                    <span className=\"tooltiptext\">Ban this Channel</span>\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-gray-500 text-end\" style={{fontSize: `${8}px`}}>\r\n                  {moment(datum['snippet']['publishTime']).format('YY.MM.DD HH:mm')}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n          \r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default VYoutubeSearch;","import React from \"react\";\r\nimport { CartesianGrid, LabelList, Legend, Line, Area, ComposedChart, ReferenceArea, ReferenceLine, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { UtilCommon, UtilConverter } from \"../../../utils\";\r\n\r\nconst _colors_map = {\r\n  \"KOSPI\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"NASDAQ\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"S&P200\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"return_of_asset\"    : \"#000\",\r\n  \"return_of_day_trade\": \"#F00\",\r\n  \"safety_asset_ratio\" : \"#5AA8\",\r\n};\r\n\r\nconst RechartAlpha = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_domain, setDomain] = React.useState({top: 'dataMax + 1', bottom: 'dataMin - 1'});\r\n  const [_refArea, setRefArea] = React.useState({left: '', right: ''});\r\n\r\n  const [_purified_data, setPurifiedData] = React.useState([]);  \r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let initial_values = {};\r\n\r\n    let purified_data = [];\r\n    let accumulation_of_return_of_asset = 0;\r\n    let initial_day_trade_return = 0;\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from) {\r\n        is_selected_range = true;\r\n        initial_values = {\r\n          'KOSPI' : datum['KOSPI'],\r\n          'S&P500': datum['S&P500'],\r\n          'NASDAQ': datum['NASDAQ'],\r\n        }\r\n        initial_day_trade_return = datum['day_trade'] || 0;\r\n      }\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n\r\n      accumulation_of_return_of_asset = (datum['date'] === from) ? 0 : parseFloat((accumulation_of_return_of_asset + datum['return_of_asset']).toFixed(2));\r\n      purified_data.push({\r\n        date: datum['date'],\r\n        'return_of_asset': accumulation_of_return_of_asset,\r\n        'return_of_day_trade': (datum['day_trade'] === void 0) ? 0 : parseFloat((datum['day_trade'] - initial_day_trade_return).toFixed(2)),\r\n        'KOSPI' : parseFloat(((datum['KOSPI' ] - initial_values['KOSPI' ]) * 100 / initial_values['KOSPI' ]).toFixed(2)),\r\n        'S&P500': parseFloat(((datum['S&P500'] - initial_values['S&P500']) * 100 / initial_values['S&P500']).toFixed(2)),\r\n        'NASDAQ': parseFloat(((datum['NASDAQ'] - initial_values['NASDAQ']) * 100 / initial_values['NASDAQ']).toFixed(2)),\r\n        'safety_asset_ratio': datum['safety_asset_ratio'],\r\n      });\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n  \r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n  \r\n\r\n  function getAxisYDomain(from, to, data) {\r\n    let [bottom, top] = [data[0]['return_of_asset'], data[0]['return_of_asset']];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      if (datum['return_of_asset'] > top) top = datum['return_of_asset'];\r\n      if (datum['return_of_asset'] < bottom) bottom = datum['return_of_asset'];\r\n\r\n      if (datum['S&P500'] > top) top = datum['S&P500'];\r\n      if (datum['S&P500'] < bottom) bottom = datum['S&P500'];\r\n\r\n      if (datum['NASDAQ'] > top) top = datum['NASDAQ'];\r\n      if (datum['NASDAQ'] < bottom) bottom = datum['NASDAQ'];\r\n\r\n      if (datum['KOSPI'] > top) top = datum['KOSPI'];\r\n      if (datum['KOSPI'] < bottom) bottom = datum['KOSPI'];\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n    return [(Math.floor(bottom - 1) | 0), (Math.ceil(top + 1) | 0)];\r\n  };\r\n  \r\n  function _zoom() {\r\n    let { left, right } = _refArea;\r\n\r\n    if (left === right || right === '') {\r\n      setRefArea({\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    // yAxis domain\r\n    const [bottom, top] = getAxisYDomain(left, right, purified_data);\r\n\r\n    setRefArea({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    setDomain({\r\n      bottom,\r\n      top\r\n    });\r\n\r\n    setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    setRefArea({left: '', right: ''});\r\n    setDomain({top: 'dataMax + 1', bottom: 'dataMin - 1'});\r\n    setPurifiedData(purified_data);\r\n  }\r\n  \r\n\r\n\r\n\r\n  const AlphaTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n\r\n    const payload_return_of_asset = payload.filter(payload => payload['name'] === 'Return of Asset')[0];\r\n    // const date = moment(label).format('YY.MM.DD');    \r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload_return_of_asset && (\r\n              <tr>\r\n                <td><p style={{ color: payload_return_of_asset['color'] }}>{`${payload_return_of_asset['name']}`}</p></td>\r\n                <td><p style={{ color: payload_return_of_asset['color'] }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_return_of_asset['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_return_of_asset['value']).padStart(8, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload.map((payload, i) => {\r\n              if (payload['name'] === 'Return of Asset')\r\n                return null;\r\n\r\n              return (\r\n                <tr key={payload['name']}>\r\n                  <td><p style={{ color: payload['color'] }}>{`${payload['name']}`}</p></td>\r\n                  <td><p style={{ color: payload['color'] }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload['value']).padStart(8, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              );\r\n            })}            \r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return ( \r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={800}>\r\n          <ComposedChart\r\n            width={800}\r\n            height={800}\r\n            data={_purified_data}\r\n            onMouseDown={(e) => e && (_refArea.left !== e.activeLabel) && setRefArea({ left: e.activeLabel, right: _refArea['right'] })}\r\n            onMouseMove={(e) => e && _refArea.left && (_refArea.right !== e.activeLabel) && setRefArea({ right: e.activeLabel, left: _refArea['left'] })}\r\n            onMouseUp={e => {\r\n              if (_refArea['left'] !== '' && _refArea['right'] === '')\r\n                _zoomOut();\r\n              else\r\n                _zoom();\r\n            }}\r\n            margin={{\r\n              top: 40,\r\n              right: 30,\r\n              left: 30,\r\n              bottom: 50,\r\n            }}\r\n          >\r\n            <CartesianGrid strokeDasharray=\"3 3\" />\r\n            <Tooltip content={<AlphaTooltip />} />\r\n            <Legend align=\"left\" verticalAlign=\"top\" iconSize={20} wrapperStyle={{top: 0}} />\r\n            <XAxis\r\n              allowDataOverflow\r\n              dataKey=\"date\"\r\n              fontSize={10}\r\n              angle={-40}\r\n              textAnchor=\"end\"\r\n              // verticalAnchor=\"middle\"\r\n              tickSize={4}\r\n              tickMargin={8}\r\n              padding={{ left: 50, right: 50 }}\r\n              // tickFormatter={(date) => {\r\n              //   if (date instanceof Date)\r\n              //     return moment(date).format('YY.MM.DD');\r\n              //   return date;\r\n              // }} \r\n            />\r\n            <YAxis\r\n              yAxisId=\"left\"\r\n              allowDataOverflow \r\n              domain={[_domain['bottom'], _domain['top'  ]]}\r\n              // padding={{ bottom: 50, top: 50 }}\r\n              tickFormatter={(value) => {\r\n                return parseFloat(value.toFixed(2));\r\n              }}\r\n            />\r\n            <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: '%', position: 'center' }} fontSize={10} domain={[0, 100]} ticks={[0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]} />\r\n            <Line\r\n              yAxisId=\"left\"\r\n              type=\"natural\" dataKey={'return_of_asset'} name=\"Return of Asset\"\r\n              stroke={_colors_map['return_of_asset']} strokeWidth={2}\r\n              animationDuration={300}\r\n            >\r\n              <LabelList dataKey={'return_of_asset'} offset={10} position=\"top\" fontWeight=\"bold\" />\r\n            </Line>\r\n            \r\n            <Line\r\n              yAxisId=\"left\"\r\n              type=\"natural\" dataKey={'return_of_day_trade'} name=\"Return of DayTrade\"\r\n              stroke={_colors_map['return_of_day_trade']} strokeWidth={2}\r\n              animationDuration={300}\r\n            >\r\n              <LabelList dataKey={'return_of_day_trade'} offset={10} position=\"top\" fontWeight=\"bold\" color={_colors_map['return_of_day_trade']} />\r\n            </Line>\r\n            \r\n            <Line yAxisId=\"left\" type=\"natural\" name={'KOSPI' } dataKey={'KOSPI' } stroke={_colors_map['KOSPI' ]} animationDuration={300} dot={false} />\r\n            <Line yAxisId=\"left\" type=\"natural\" name={'S&P500'} dataKey={'S&P500'} stroke={_colors_map['S&P500']} animationDuration={300} dot={false} />\r\n            <Line yAxisId=\"left\" type=\"natural\" name={'NASDAQ'} dataKey={'NASDAQ'} stroke={_colors_map['NASDAQ']} animationDuration={300} dot={false} />\r\n            \r\n\r\n            <defs>\r\n              <linearGradient id=\"colorSafetyAssetRatio\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                <stop offset=\"20%\" stopColor={_colors_map['safety_asset_ratio']} stopOpacity={0.8}/>\r\n                <stop offset=\"75%\" stopColor={_colors_map['safety_asset_ratio']} stopOpacity={0}/>\r\n              </linearGradient>\r\n            </defs>\r\n            <Area yAxisId=\"right\" type=\"monotone\" name={'Safety Asset Ratio'} dataKey={'safety_asset_ratio'} stroke={_colors_map['safety_asset_ratio']} fillOpacity={1} fill=\"url(#colorSafetyAssetRatio)\">\r\n              <LabelList dataKey={'safety_asset_ratio'} offset={10} position=\"top\" fontSize={10} />\r\n            </Area>\r\n            \r\n            <ReferenceLine yAxisId=\"left\" y={0} stroke=\"#888\" />\r\n\r\n            {_refArea['left'] && _refArea['right'] ? (\r\n              <ReferenceArea yAxisId=\"left\" x1={_refArea['left']} x2={_refArea['right']} strokeOpacity={0.3} />\r\n            ) : null}\r\n          </ComposedChart>\r\n        </ResponsiveContainer>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default RechartAlpha;","import React from \"react\";\r\nimport { Bar, CartesianGrid, ComposedChart, Legend, Line, ReferenceArea, ReferenceLine, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { UtilCommon, UtilConverter } from \"../../../utils\";\r\n\r\n\r\nconst _colors_map = {\r\n  \"KOSPI\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Won\"       : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Dollar\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"LUXUARY\"   : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"NASDAQ\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Reits\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"S&P500\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Stocks-KR\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"Stocks-US\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n  \"T-bond_I\"  : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -20),\r\n};\r\n\r\n\r\nconst RechartArbitrage = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    let offset = 0;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from) {\r\n        is_selected_range = true;\r\n        offset = datum['accumulation'] - datum['total'];\r\n      }\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push({\r\n        ...datum,\r\n        accumulation: datum['accumulation'] - offset\r\n      });\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  // set min, max trade volume, count\r\n  let min_traded_volume = data[0]['buy_volume'] || 0,\r\n      max_trade_volume = data[0]['buy_volume'] || 0,\r\n      min_count = data[0]['count'] || 0,\r\n      max_count = data[0]['count'] || 0;\r\n\r\n  data.forEach((datum) => {\r\n    if (datum['buy_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['sell_volume'];\r\n    if (datum['buy_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['sell_volume'];\r\n    if (datum['count'] < min_count)\r\n      min_count = datum['count'];\r\n    if (datum['count'] > max_count)\r\n      max_count = datum['count'];\r\n  });\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n\r\n  const ArbitrageTooltip = ({ active, payload: payloads, label }) => {\r\n    if (!active || !payloads || !payloads.length)\r\n      return null;\r\n    \r\n    const full_payload = payloads[0]['payload'];\r\n    const total_arbitrage = full_payload['total'];\r\n    const total_color = '#555';\r\n\r\n    const payload_accumulation = payloads.filter(payload => payload['name'] === 'Accumulation')[0];\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payloads.map((payload, i) => {\r\n              if (payload['name'] === 'Accumulation')\r\n                return null;\r\n\r\n              return (\r\n                <tr key={payload['name']}>\r\n                  <td><p style={{ color: payload['color'] }}>{`${payload['name']}`}</p></td>\r\n                  <td><p style={{ color: payload['color'] }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              )\r\n            })}\r\n            \r\n            \r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr> \r\n            <tr>\r\n              <td><p style={{ color: total_color }}>{`Total`}</p></td>\r\n              <td><p style={{ color: total_color }}>{` :  `}</p></td>\r\n              <td><code className=\"w-100\" style={{ color: total_color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                {`${UtilConverter.number2commadStringWithIntl(total_arbitrage).padStart(14, ' ')}`}\r\n              </code></td>\r\n            </tr>\r\n            {payload_accumulation && (\r\n              <tr>\r\n                <td><p style={{ color: payload_accumulation['color'] }}>{`${payload_accumulation['name']}`}</p></td>\r\n                <td><p style={{ color: payload_accumulation['color'] }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_accumulation['color'], textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_accumulation['value']).padStart(14, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={400}>\r\n        <ComposedChart\r\n          width={500}\r\n          height={300}\r\n          data={_purified_data}\r\n          // stackOffset=\"sign\"\r\n          margin={{\r\n            top: 30,\r\n            right: 30,\r\n            left: 30,\r\n            bottom: 20,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >          \r\n          <Legend align=\"left\" verticalAlign=\"top\" wrapperStyle={{top: 0}} />\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis\r\n            dataKey=\"date\"\r\n            domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            angle={-40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            // tickFormatter={(unixTime) => moment(unixTime).format('YY.MM.DD')}\r\n          />\r\n          <YAxis yAxisId=\"left\" fontSize={10} tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)} />\r\n          <YAxis yAxisId=\"right\" orientation=\"right\" fontSize={10} tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)} />\r\n          <Tooltip content={<ArbitrageTooltip />}/>\r\n          <ReferenceLine yAxisId=\"left\" y={0} stroke=\"#000\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"KOSPI\"   fill={_colors_map[\"KOSPI\"  ]} stackId=\"stack\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"S&P500\"  fill={_colors_map[\"S&P500\" ]} stackId=\"stack\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"NASDAQ\"  fill={_colors_map[\"NASDAQ\" ]} stackId=\"stack\" />\r\n          <Bar yAxisId=\"left\" dataKey=\"LUXUARY\" fill={_colors_map[\"LUXUARY\"]} stackId=\"stack\" />\r\n          \r\n          <Line yAxisId=\"right\" type=\"natural\" name=\"Accumulation\" dataKey=\"accumulation\" stroke=\"#D44\" strokeWidth={2} />\r\n          \r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea x1={_viewPort['left']} x2={_viewPort['right']} yAxisId=\"left\" strokeOpacity={0.3} />\r\n          ) : null}\r\n        </ComposedChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default RechartArbitrage;","// import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { CartesianGrid, ComposedChart, Legend, Line, ReferenceArea, ResponsiveContainer, Scatter, Tooltip, XAxis, YAxis, ZAxis } from \"recharts\";\r\nimport { UtilConverter } from \"../../../utils\";\r\n\r\nconst RechartDayTrade = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push(datum);\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  // set min, max trade volume, count\r\n  let min_traded_volume = data[0]['buy_volume'] || 0,\r\n      max_trade_volume = data[0]['buy_volume'] || 0,\r\n      min_count = data[0]['count'] || 0,\r\n      max_count = data[0]['count'] || 0;\r\n\r\n  data.forEach((datum) => {\r\n    if (datum['buy_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['sell_volume'];\r\n    if (datum['buy_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['sell_volume'];\r\n    if (datum['count'] < min_count)\r\n      min_count = datum['count'];\r\n    if (datum['count'] > max_count)\r\n      max_count = datum['count'];\r\n  });\r\n\r\n\r\n  const AssetRatioTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n    \r\n    const full_payload = payload[0]['payload'];\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n\r\n    let payload_price,\r\n        payload_avg_price,\r\n        payload_buy,\r\n        payload_sell;\r\n\r\n    payload.forEach(datum => {\r\n      switch (datum['name']) {\r\n        case 'price':\r\n          payload_price = datum;\r\n          break;      \r\n        case 'average price':\r\n          payload_avg_price = datum;\r\n          break;      \r\n        case 'buy':\r\n          payload_buy = datum;\r\n          break;      \r\n        case 'sell':\r\n          payload_sell = datum;\r\n          break;      \r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    if (payload_buy)\r\n      payload_buy['buy_volume'] = full_payload['buy_volume'];\r\n    if (payload_sell)\r\n      payload_sell['sell_volume'] = full_payload['sell_volume'];\r\n    if (payload_avg_price)\r\n      payload_avg_price['count'] = full_payload['count'];\r\n\r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload_price && payload_price['value'] && (\r\n              <tr key={payload_price['name']}>\r\n                <td><p style={{ color: payload_price.color }}>{`${payload_price.name}`}</p></td>\r\n                <td><p style={{ color: payload_price.color }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_price.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_price['value']).padStart(14, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n            {payload_avg_price && payload_avg_price['value'] && payload_avg_price['count'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_avg_price['name']}>\r\n                  <td><p style={{ color: payload_avg_price.color }}>{`${payload_avg_price.name}`}</p></td>\r\n                  <td><p style={{ color: payload_avg_price.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_avg_price.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_avg_price['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'count'}>\r\n                  <td><p style={{ color: payload_avg_price.color }}>{'count'}</p></td>\r\n                  <td><p style={{ color: payload_avg_price.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_avg_price.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_avg_price['count']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}\r\n            \r\n            {((payload_buy && payload_buy['value'] && payload_buy['buy_volume']) || (payload_sell && payload_sell['value'] && payload_sell['sell_volume'])) && (\r\n              <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            )}           \r\n\r\n            {payload_buy && payload_buy['value'] && payload_buy['buy_volume'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_buy['name']}>\r\n                  <td><p style={{ color: payload_buy.color }}>{'buy_price'}</p></td>\r\n                  <td><p style={{ color: payload_buy.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_buy.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_buy['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'buy_volume'}>\r\n                  <td><p style={{ color: payload_buy.color }}>{'buy_volume'}</p></td>\r\n                  <td><p style={{ color: payload_buy.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_buy.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_buy['buy_volume']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {payload_sell && payload_sell['value'] && payload_sell['sell_volume'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_sell['name']}>\r\n                  <td><p style={{ color: payload_sell.color }}>{'sell_price'}</p></td>\r\n                  <td><p style={{ color: payload_sell.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_sell.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_sell['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'sell_volume'}>\r\n                  <td><p style={{ color: payload_sell.color }}>{'sell_volume'}</p></td>\r\n                  <td><p style={{ color: payload_sell.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_sell.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_sell['sell_volume']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}            \r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n  const CountDot = (props) => {\r\n    const { cx, cy, stroke, payload /*, value*/ } = props;\r\n    let count = payload['count'];\r\n    if (count < 1)\r\n      return;\r\n\r\n    let size = count / max_count * 512;\r\n    \r\n    return (\r\n      <svg x={cx - 20} y={cy - 20} width={40} height={40} fill={stroke} fillOpacity={0.2} viewBox=\"0 0 1024 1024\">\r\n        <circle cx={512} cy={512} r={size} />\r\n      </svg>\r\n    );\r\n  };\r\n\r\n\r\n  return (  \r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={400}>\r\n        <ComposedChart\r\n          width={500}\r\n          height={400}\r\n          data={_purified_data}\r\n          margin={{\r\n            top: 10,\r\n            left: 30,\r\n            right: 30,\r\n            bottom: 20,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >\r\n          <CartesianGrid stroke=\"#DDD\" />\r\n          <Tooltip content={<AssetRatioTooltip />} />\r\n          <Legend align=\"left\" verticalAlign=\"top\" height={36} iconSize={12} />\r\n\r\n          <XAxis \r\n            dataKey=\"date\"\r\n            domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            angle={-40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            // tickFormatter={(unixTime) => moment(unixTime).format('YY.MM.DD')}\r\n            // label={{ value: 'DATE', position: 'insideBottomRight', offset: 0 }} \r\n            padding={{ left: 50, right: 50 }}\r\n          />\r\n          <YAxis\r\n            // dataKey=\"price\" \r\n            // domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            domain={[dataMin => parseInt(dataMin * 0.995), dataMax => parseInt(dataMax * 1.005)]}\r\n            // padding={{ top: 20, bottom: 20 }}\r\n            // unit=\"\"\r\n            // type=\"number\"\r\n            // label={{ value: 'WON', angle: -90, position: 'insideLeft' }}\r\n            tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)} \r\n          />\r\n          <ZAxis dataKey=\"sell_volume\" name=\"sell_volume\" domain={[min_traded_volume, max_trade_volume]} range={[50, 500]} unit=\"ea\" zAxisId=\"sell_vol\" />\r\n          <ZAxis dataKey=\"buy_volume\"  name=\"buy_volume\"  domain={[min_traded_volume, max_trade_volume]} range={[50, 500]} unit=\"ea\" zAxisId=\"buy_vol\" />\r\n          \r\n          {/* <Scatter name=\"red\" dataKey=\"red\" fill=\"red\" /> */}\r\n          <Line type=\"natural\" dataKey=\"price\" />\r\n          <Line type=\"natural\" name=\"average price\" dataKey=\"a_price\" stroke=\"#0A0\" dot={<CountDot />} />\r\n\r\n          <Scatter name=\"sell\" dataKey=\"sell_price\" shape=\"circle\" stroke=\"#00F\" fillOpacity={0.5} fill=\"#00F9\" legendType=\"circle\" zAxisId=\"sell_vol\" />\r\n          <Scatter name=\"buy\"  dataKey=\"buy_price\"  shape=\"circle\" stroke=\"#F00\" fillOpacity={0.5} fill=\"#F009\" legendType=\"circle\" zAxisId=\"buy_vol\"  />\r\n          \r\n          {/* <Line dataKey=\"redLine\" stroke=\"red\" dot={false} activeDot={false} legendType=\"none\" /> */}\r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea x1={_viewPort['left']} x2={_viewPort['right']} strokeOpacity={0.3} />\r\n          ) : null}\r\n        </ComposedChart>\r\n      </ResponsiveContainer>\r\n    </div>   \r\n  );\r\n}\r\n \r\nexport default RechartDayTrade;","import React from \"react\";\r\nimport { Area, AreaChart, CartesianGrid, LabelList, Legend, ReferenceArea, ResponsiveContainer, Tooltip, XAxis, YAxis } from \"recharts\";\r\nimport { UtilCommon, UtilConverter } from \"../../../utils\";\r\n\r\nconst _colors_map = {\r\n  \"KOSPI\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Won\"       : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Dollar\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Luxuary\"   : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"NASDAQ\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Reits\"     : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"S&P500\"    : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Stocks-KR\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"Stocks-US\" : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n  \"T-bond_I\"  : UtilCommon.lightenDarkenColor(UtilCommon.makeRandomColor(), -50),\r\n};\r\n\r\n\r\nconst RechartTotalAsstRatio = (props) => {\r\n  const { data }  = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push(datum);\r\n\r\n      if (datum['date'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date'], data[data.length - 1]['date']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  const AssetRatioTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload.map(datum => {\r\n              let percent = ((100 * datum['value']) / datum['payload']['Total']).toFixed(2).padStart(5, ' ');\r\n              return (\r\n                <tr key={datum['name']}>\r\n                  <td><p style={{ color: datum.color }}>{`${datum.name}`}</p></td>\r\n                  <td><p style={{ color: datum.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: datum.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(datum['value']).padStart(14, ' ')} (${percent}%)`}\r\n                  </code></td>\r\n                </tr>\r\n              );                  \r\n            }).reverse()}\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            <tr>\r\n              <td><p className=\"fw-bolder\" style={{ color: 'black' }}>{`Total`}</p></td>\r\n              <td><p style={{ color: 'black' }}>{` :  `}</p></td>\r\n              <td className=\"text-end\"><code className=\"text-dark fw-bolder\" style={{ textAlign: \"end\", fontSize: `${14}px` }}>\r\n                {`￦ ${UtilConverter.number2commadStringWithIntl(payload[0]['payload']['Total'])}`}\r\n              </code></td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return ( \r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={600}>\r\n        <AreaChart\r\n          width={500}\r\n          height={400}\r\n          data={_purified_data}\r\n          defaultShowTooltip={true}\r\n          margin={{\r\n            top: 20,\r\n            right: 30,\r\n            left: 30,\r\n            bottom: 50,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >\r\n          <CartesianGrid strokeDasharray=\"1 2\" />\r\n          <XAxis dataKey=\"date\"\r\n            fontSize={10}\r\n            angle={-40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            padding={{ left: 50, right: 50 }}\r\n            // tickFormatter={(date) => {\r\n            //   if (date instanceof Date)\r\n            //     return moment(date).format('YY.MM.DD');\r\n            //   return date;\r\n            // }}\r\n          />\r\n          <YAxis\r\n            allowDataOverflow \r\n            domain={[0, dataMax => parseInt(dataMax * 1.1)]}\r\n            fontSize={10} \r\n            tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)}\r\n          />\r\n          <Tooltip content={<AssetRatioTooltip />} />\r\n          <Legend align=\"left\" verticalAlign=\"top\" iconSize={20} wrapperStyle={{top: 0}} />\r\n          <Area type=\"monotone\" dataKey={\"Won\"      } stackId=\"1\" stroke={_colors_map[\"Won\"      ]} fill={_colors_map[\"Won\"      ]} animationDuration={300}><LabelList dataKey={\"PERCENT_Won\"      } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"Dollar\"   } stackId=\"1\" stroke={_colors_map[\"Dollar\"   ]} fill={_colors_map[\"Dollar\"   ]} animationDuration={300}><LabelList dataKey={\"PERCENT_Dollar\"   } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"KOSPI\"    } stackId=\"1\" stroke={_colors_map[\"KOSPI\"    ]} fill={_colors_map[\"KOSPI\"    ]} animationDuration={300}><LabelList dataKey={\"PERCENT_KOSPI\"    } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"S&P500\"   } stackId=\"1\" stroke={_colors_map[\"S&P500\"   ]} fill={_colors_map[\"S&P500\"   ]} animationDuration={300}><LabelList dataKey={\"PERCENT_S&P500\"   } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"NASDAQ\"   } stackId=\"1\" stroke={_colors_map[\"NASDAQ\"   ]} fill={_colors_map[\"NASDAQ\"   ]} animationDuration={300}><LabelList dataKey={\"PERCENT_NASDAQ\"   } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"Luxuary\"  } stackId=\"1\" stroke={_colors_map[\"Luxuary\"  ]} fill={_colors_map[\"Luxuary\"  ]} animationDuration={300}><LabelList dataKey={\"PERCENT_Luxuary\"  } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"Stocks-KR\"} stackId=\"1\" stroke={_colors_map[\"Stocks-KR\"]} fill={_colors_map[\"Stocks-KR\"]} animationDuration={300}><LabelList dataKey={\"PERCENT_Stocks-KR\"} position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"Stocks-US\"} stackId=\"1\" stroke={_colors_map[\"Stocks-US\"]} fill={_colors_map[\"Stocks-US\"]} animationDuration={300}><LabelList dataKey={\"PERCENT_Stocks-US\"} position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"Reits\"    } stackId=\"1\" stroke={_colors_map[\"Reits\"    ]} fill={_colors_map[\"Reits\"    ]} animationDuration={300}><LabelList dataKey={\"PERCENT_Reits\"    } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/></Area>\r\n          <Area type=\"monotone\" dataKey={\"T-bond_I\" } stackId=\"1\" stroke={_colors_map[\"T-bond_I\" ]} fill={_colors_map[\"T-bond_I\" ]} animationDuration={300}><LabelList dataKey={\"PERCENT_T-bond_I\" } position=\"insideTopLeft\" offset={5} fontSize={10} formatter={(v) => { if (v > 2) return v.toFixed(2)}}/>\r\n            <LabelList dataKey={\"Total\"} position=\"top\" offset={14} fontSize={10} formatter={(datum) => {\r\n              return UtilConverter.number2commadStringWithIntl(datum);\r\n            }} />\r\n          </Area>\r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea x1={_viewPort['left']} x2={_viewPort['right']} strokeOpacity={0.3} />\r\n          ) : null}\r\n        </AreaChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default RechartTotalAsstRatio;","import moment from \"moment\";\r\nimport React from \"react\";\r\nimport xlsx from 'xlsx';\r\nimport { UtilSheet } from \"../../utils\";\r\nimport RechartAlpha from \"./recharts/rechart_alpha\";\r\nimport RechartArbitrage from \"./recharts/rechart_arbitrage\";\r\nimport RechartDayTrade from \"./recharts/rechart_day_trade\";\r\nimport RechartTotalAsstRatio from \"./recharts/rechart_total_asset\";\r\n\r\nconst VTradeHistory = () => {\r\n  const [_total_asset_data                  , setTotalAssetData                ] = React.useState([]);  \r\n  const [_algorithm_trade_data              , setAlgorithmTradeData            ] = React.useState({});\r\n  const [_alpha_data                        , setAlphaData                     ] = React.useState({});\r\n  const [_selected_algorithm_trade_data_name, setSelectedAlgorithmTradeDataName] = React.useState('KOSPI');\r\n  const [_arbitrage_data                    , setArbitrageData                 ] = React.useState([]);\r\n  \r\n  let _selected_algorithm_trade_data = _algorithm_trade_data[_selected_algorithm_trade_data_name] || [];\r\n\r\n  const _refPricesFileForm = React.useRef();\r\n\r\n  const _parseData = React.useCallback((data) => {\r\n    var total_asset_data = [];\r\n    var algorithm_trade_data = {};\r\n    let arbitrage_data_pre = {};\r\n    let arbitrage_data = [];\r\n\r\n    let alpha_data_pre = {};\r\n    let alpha_data = [];\r\n\r\n\r\n    Object.keys(data).forEach((sheetName) => {\r\n      if (sheetName === 'Total') {\r\n        data[sheetName].forEach((row) => {\r\n          var date = UtilSheet.serialDateToJSDate(row['일자']);\r\n          var date_string = moment(date).format('YY.MM.DD');\r\n          delete row['일자'];\r\n          \r\n          // for alpha_data_pre          \r\n          if (!alpha_data_pre[date_string])\r\n            alpha_data_pre[date_string] = {};\r\n          alpha_data_pre[date_string]['return_of_asset'] = parseFloat(row['day_return'].toFixed(2));\r\n\r\n          let safety_asset_ratio = parseFloat(((row['Won'] + row['Dollar'] + row['T-bond_I']) * 100 / row['Total']).toFixed(2));\r\n          alpha_data_pre[date_string]['safety_asset_ratio'] = safety_asset_ratio;\r\n\r\n\r\n          function getPercentage(key) {\r\n            return parseFloat(((100 * row[key]) / row['Total']).toFixed(2));\r\n          }\r\n          \r\n          var percentages = {};\r\n          [\r\n            \"Won\"      ,\r\n            \"Dollar\"   ,\r\n            \"KOSPI\"    , \r\n            \"S&P500\"   ,\r\n            \"NASDAQ\"   ,\r\n            \"Luxuary\"  ,\r\n            \"Reits\"    ,\r\n            \"Stocks-KR\",\r\n            \"Stocks-US\",\r\n            \"T-bond_I\" ,\r\n          ].forEach((key) => {\r\n            percentages[`PERCENT_${key}`] = getPercentage(key)\r\n          });\r\n\r\n          total_asset_data.push({\r\n            ...row,\r\n            ...percentages,\r\n            date: date_string,\r\n          });\r\n        });\r\n\r\n      } else if (sheetName === 'KOSPI' || sheetName === 'S&P500' || sheetName === 'NASDAQ' || sheetName === 'LUXUARY') {\r\n\r\n        algorithm_trade_data[sheetName] = data[sheetName].map((row) => {\r\n          var date = UtilSheet.serialDateToJSDate(row['일자']);\r\n          var date_string = moment(date).format('YY.MM.DD');\r\n\r\n          // for arbitrage_data_pre\r\n          if (!arbitrage_data_pre[date_string])\r\n           arbitrage_data_pre[date_string] = { 'total': 0 };\r\n          if (row['매수량'] && row['매도량']) {\r\n            let min_traded_volume = Math.min(row['매수량'], row['매도량']);\r\n            let arbitrage = (row['매도가격'] - row['매수가격']) * min_traded_volume;\r\n            arbitrage_data_pre[date_string][sheetName] = arbitrage;\r\n            arbitrage_data_pre[date_string]['total'] += arbitrage;\r\n          }\r\n\r\n          // for alpha_data_pre          \r\n          if (sheetName === 'KOSPI' || sheetName === 'S&P500' || sheetName === 'NASDAQ') {\r\n            if (!alpha_data_pre[date_string])\r\n              alpha_data_pre[date_string] = {};\r\n            alpha_data_pre[date_string][sheetName] = row['x1']; // multiple x1 prices\r\n          }\r\n\r\n          return {\r\n            date: date_string,\r\n            price: row['가격'],\r\n            buy_price: row['매수가격'],\r\n            sell_price: row['매도가격'],\r\n            buy_volume: row['매수량'],\r\n            sell_volume: row['매도량'],\r\n            a_price: row['평균단가'],\r\n            count: row['보유량'],\r\n          };\r\n        });\r\n      } else if (sheetName === 'day_trade') {\r\n        data[sheetName].forEach((row) => {\r\n          var date_string = moment(UtilSheet.serialDateToJSDate(row['date'])).format('YY.MM.DD');\r\n          // for alpha_data_pre\r\n          if (!alpha_data_pre[date_string])\r\n            alpha_data_pre[date_string] = {};\r\n          alpha_data_pre[date_string][sheetName] = parseFloat(row['return'].toFixed(2));\r\n        });\r\n      }\r\n    });\r\n\r\n\r\n    // arbitrage_data_pre => arbitrage_data\r\n    let accumulation = 0;\r\n    Object.keys(arbitrage_data_pre).forEach((date, i) => {\r\n      accumulation += arbitrage_data_pre[date]['total'];\r\n      arbitrage_data.push({\r\n        date,\r\n        ...arbitrage_data_pre[date],\r\n        accumulation\r\n      });\r\n    });\r\n\r\n    // alpha_data_pre => alpha_data\r\n    Object.keys(alpha_data_pre).forEach((date, i) => {\r\n      alpha_data.push({\r\n        date,\r\n        ...alpha_data_pre[date]\r\n      });\r\n    });\r\n\r\n    return {\r\n      total_asset_data,\r\n      algorithm_trade_data,\r\n      arbitrage_data,\r\n      alpha_data,\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    let local_data = localStorage.getItem('last_finance_data');\r\n    if (!local_data) \r\n      return;\r\n\r\n    var data = JSON.parse(local_data);\r\n    const { total_asset_data, algorithm_trade_data, arbitrage_data, alpha_data } = _parseData(data);\r\n    setTotalAssetData(total_asset_data);\r\n    setAlgorithmTradeData(algorithm_trade_data);\r\n    setArbitrageData(arbitrage_data);\r\n    setAlphaData(alpha_data);\r\n  }, [_parseData]);\r\n\r\n\r\n  /** CSV parse example ───────────────────────────────────── */\r\n  // function _setPrices(e) {   \r\n  //   var reader = new FileReader();\r\n  //   reader.onload = function(e) {\r\n  //     // Use reader.result\r\n  //     parseCSV(reader.result, {}, function (err, output) {\r\n  //       console.log(output);\r\n  //     });\r\n  //   }\r\n  //   reader.readAsText(e.target.files[0]);\r\n  // }\r\n  /** ───────────────────────────────────────────────────────── */\r\n\r\n  function uploadSheet(event) {\r\n    var input = event.target; \r\n    var reader = new FileReader();\r\n    reader.onload = function() { \r\n      var fdata = reader.result; \r\n      var read_buffer = xlsx.read(fdata, {type : 'binary'}); \r\n\r\n      let data = {};\r\n      read_buffer.SheetNames.forEach(function(sheetName) {\r\n        var data_rows = xlsx.utils.sheet_to_json(read_buffer.Sheets[sheetName]); \r\n        data[sheetName] = data_rows;\r\n      });\r\n      \r\n      _refPricesFileForm.current.reset();      \r\n      localStorage.setItem('last_finance_data', JSON.stringify(data));\r\n      const { total_asset_data, algorithm_trade_data, arbitrage_data, alpha_data } = _parseData(data);\r\n      setTotalAssetData(total_asset_data);\r\n      setAlgorithmTradeData(algorithm_trade_data);\r\n      setArbitrageData(arbitrage_data);\r\n      setAlphaData(alpha_data);\r\n    }; \r\n    reader.readAsBinaryString(input.files[0]); \r\n  }\r\n\r\n  return ( \r\n    <div>\r\n      <div className=\"text-start fw-bold my-5 px-4\" style={{fontSize: `calc(${2}rem + ${2}vw)`}}>\r\n        TRADE HISTORY\r\n      </div>\r\n      <div className=\"mt-5 d-flex justify-content-center\">\r\n        <div className=\"pe-2\">\r\n          <label type=\"button\" className=\"btn btn-secondary\">DOWNLOAD SAMPLE</label>\r\n        </div>\r\n        <div>\r\n          <form ref={_refPricesFileForm}>\r\n            <input type=\"file\" accept=\".xlsx\" id=\"pricesFileInput\"\r\n              className=\"d-none\"\r\n              onClick={e => e.target.key = 'prices' + new Date().getMilliseconds()}\r\n              // name=\"pricesFile\" onChange={_setPrices}\r\n              name=\"pricesFile\" onChange={uploadSheet}\r\n            />\r\n          </form>\r\n          <label type=\"button\" htmlFor=\"pricesFileInput\" className=\"btn btn-danger\">UPLOAD XLSX</label>\r\n        </div>\r\n      </div>\r\n\r\n   \r\n      <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n        <h1><b>ALGORITHM TRADE</b></h1>\r\n      </div>   \r\n      <div className=\"mt-5 px-3 fw-bold\">Select data</div>\r\n      <div className=\"px-3 d-flex flex-wrap\">\r\n        {Object.keys(_algorithm_trade_data).map((key, i) => {\r\n          return (\r\n            <div key={i} className=\"form-check px-3 py-2\">\r\n              <input\r\n                className=\"form-check-input\" type=\"radio\" name={`radio_${key}`} id={`radio_${key}`}\r\n                checked={_selected_algorithm_trade_data_name === key} onChange={e => setSelectedAlgorithmTradeDataName(key)}\r\n              />\r\n              <label className=\"form-check-label\" htmlFor={`radio_${key}`}>\r\n                {key}\r\n              </label>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"mt-4\">\r\n        <RechartDayTrade data={_selected_algorithm_trade_data} />\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <RechartArbitrage data={_arbitrage_data} />\r\n      </div>\r\n\r\n      <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n        <h1><b>TOTAL ASSET RATIO</b></h1>\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <RechartTotalAsstRatio data={_total_asset_data} />\r\n      </div>\r\n\r\n      <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n        <h1><b>ALPHA</b></h1>\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <RechartAlpha data={_alpha_data} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default VTradeHistory;","// import moment from \"moment\";\r\nimport React from \"react\";\r\nimport { CartesianGrid, ComposedChart, Legend, Line, ReferenceArea, ReferenceLine, ResponsiveContainer, Scatter, Tooltip, XAxis, YAxis, ZAxis } from \"recharts\";\r\nimport { UtilConverter } from \"../../../utils\";\r\n\r\nconst RechartDayTrade3min = (props) => {\r\n  const { data } = props;\r\n\r\n  const [_viewPort, _setViewPort] = React.useState({left: '', right: ''});\r\n  const [_purified_data, _setPurifiedData] = React.useState(data);\r\n\r\n  const _reviseData = React.useCallback((from, to) => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    let purified_data = [];\r\n\r\n    let is_selected_range = false;\r\n    for (let datum of data) {\r\n      if (datum['date_time'] === from)\r\n        is_selected_range = true;\r\n\r\n      if (!is_selected_range)\r\n        continue;\r\n      \r\n      purified_data.push(datum);\r\n\r\n      if (datum['date_time'] === to)\r\n        break;\r\n    }\r\n\r\n    return purified_data;\r\n  }, [data]);\r\n\r\n  React.useEffect(() => {\r\n    if (!data || !data.length)\r\n      return;\r\n\r\n    const purified_data = _reviseData(data[0]['date_time'], data[data.length - 1]['date_time']);\r\n    _setPurifiedData(purified_data);\r\n  }, [data, _reviseData]);\r\n\r\n\r\n  if (!_purified_data || !_purified_data.length)\r\n    return (\r\n      <div className=\"text-center py-4 text-light\" style={{background: '#EDD'}}>\r\n        <h2>NO DATA</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  function _zoom() {\r\n    let { left, right } = _viewPort;\r\n\r\n    if (left === right || right === '') {\r\n      _setViewPort({\r\n        ..._viewPort,\r\n        left: '',\r\n        right: '',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // xAxis domain\r\n    if (left > right) [left, right] = [right, left];\r\n    \r\n    const purified_data = _reviseData(left, right);\r\n\r\n    _setViewPort({\r\n      left: '',\r\n      right: '',\r\n    });\r\n\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  function _zoomOut() {\r\n    const purified_data = _reviseData(data[0]['date_time'], data[data.length - 1]['date_time']);\r\n    _setViewPort({\r\n      left: '',\r\n      right: ''\r\n    });\r\n    _setPurifiedData(purified_data);\r\n  }\r\n\r\n  // set min, max trade volume, count\r\n  let min_traded_volume = data[0]['buy_volume'] || 0,\r\n      max_trade_volume = data[0]['buy_volume'] || 0;\r\n\r\n  for (let datum of data) {\r\n    if (!datum['buy_volume'] && !datum['sell_volume'])\r\n      continue;\r\n      \r\n    if (datum['buy_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] < min_traded_volume)\r\n      min_traded_volume = datum['sell_volume'];\r\n    if (datum['buy_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['buy_volume'];\r\n    if (datum['sell_volume'] > max_trade_volume)\r\n      max_trade_volume = datum['sell_volume'];\r\n  }\r\n\r\n\r\n  const AssetRatioTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length)\r\n      return null;\r\n    \r\n    const full_payload = payload[0]['payload'];\r\n\r\n    // const date = moment(label).format('YY.MM.DD');\r\n\r\n    let payload_price,\r\n        payload_buy,\r\n        payload_sell,\r\n        payload_rsi;\r\n\r\n    payload.forEach(datum => {\r\n      switch (datum['name']) {\r\n        case 'price':\r\n          payload_price = datum;\r\n          break;\r\n        case 'buy':\r\n          payload_buy = datum;\r\n          break;      \r\n        case 'sell':\r\n          payload_sell = datum;\r\n          break;\r\n        case 'rsi':\r\n          payload_rsi = datum;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    if (payload_buy)\r\n      payload_buy['buy_volume'] = full_payload['buy_volume'];\r\n    if (payload_sell)\r\n      payload_sell['sell_volume'] = full_payload['sell_volume'];\r\n\r\n    return (\r\n      <div className=\"bg-light p-2 border rounded\" style={{fontSize: `${12}px`, whiteSpace: \"pre\"}}>\r\n        <p className=\"fs-5 fw-bold text-center\">{label}</p>\r\n        <table>\r\n          <tbody>\r\n            <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            {payload_price && payload_price['value'] && (\r\n              <tr key={payload_price['name']}>\r\n                <td><p style={{ color: payload_price.color }}>{`${payload_price.name}`}</p></td>\r\n                <td><p style={{ color: payload_price.color }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_price.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_price['value']).padStart(14, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n\r\n            {payload_rsi && payload_rsi['value'] && (\r\n              <tr key={payload_rsi['name']}>\r\n                <td><p style={{ color: payload_rsi.color }}>{`${payload_rsi.name}`}</p></td>\r\n                <td><p style={{ color: payload_rsi.color }}>{` :  `}</p></td>\r\n                <td><code className=\"w-100\" style={{ color: payload_rsi.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                  {`${UtilConverter.number2commadStringWithIntl(payload_rsi['value']).padStart(14, ' ')}`}\r\n                </code></td>\r\n              </tr>\r\n            )}\r\n            \r\n            {((payload_buy && payload_buy['value'] && payload_buy['buy_volume']) || (payload_sell && payload_sell['value'] && payload_sell['sell_volume'])) && (\r\n              <tr><td colSpan={3}><hr className=\"my-2\" /></td></tr>\r\n            )}           \r\n\r\n            {payload_buy && payload_buy['value'] && payload_buy['buy_volume'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_buy['name']}>\r\n                  <td><p style={{ color: payload_buy.color }}>{'buy_price'}</p></td>\r\n                  <td><p style={{ color: payload_buy.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_buy.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_buy['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'buy_volume'}>\r\n                  <td><p style={{ color: payload_buy.color }}>{'buy_volume'}</p></td>\r\n                  <td><p style={{ color: payload_buy.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_buy.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_buy['buy_volume']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}\r\n\r\n            {payload_sell && payload_sell['value'] && payload_sell['sell_volume'] && (\r\n              <React.Fragment>\r\n                <tr key={payload_sell['name']}>\r\n                  <td><p style={{ color: payload_sell.color }}>{'sell_price'}</p></td>\r\n                  <td><p style={{ color: payload_sell.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_sell.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_sell['value']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n                <tr key={'sell_volume'}>\r\n                  <td><p style={{ color: payload_sell.color }}>{'sell_volume'}</p></td>\r\n                  <td><p style={{ color: payload_sell.color }}>{` :  `}</p></td>\r\n                  <td><code className=\"w-100\" style={{ color: payload_sell.color, textAlign: \"end\", fontSize: `${14}px` }}>\r\n                    {`${UtilConverter.number2commadStringWithIntl(payload_sell['sell_volume']).padStart(14, ' ')}`}\r\n                  </code></td>\r\n                </tr>\r\n              </React.Fragment>\r\n            )}            \r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (  \r\n    <div style={{ userSelect: 'none' }}>\r\n      <ResponsiveContainer width=\"100%\" height={400}>\r\n        <ComposedChart\r\n          width={500}\r\n          height={400}\r\n          data={_purified_data}\r\n          margin={{\r\n            top: 10,\r\n            left: 30,\r\n            right: 30,\r\n            bottom: 20,\r\n          }}\r\n          onMouseDown={(e) => e && (_viewPort.left !== e.activeLabel) && _setViewPort({ ..._viewPort, left: e.activeLabel })}\r\n          onMouseMove={(e) => e && _viewPort.left && (_viewPort.right !== e.activeLabel) && _setViewPort({ ..._viewPort, right: e.activeLabel })}\r\n          onMouseUp={e => {\r\n            if (_viewPort['left'] !== '' && _viewPort['right'] === '')\r\n              _zoomOut();\r\n            else\r\n              _zoom();\r\n          }}\r\n        >\r\n          <CartesianGrid stroke=\"#DDD\" />\r\n          <Tooltip content={<AssetRatioTooltip />} />\r\n          <Legend align=\"left\" verticalAlign=\"top\" height={36} iconSize={12} />\r\n\r\n          <XAxis \r\n            dataKey=\"date_time\"\r\n            domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            angle={-40}\r\n            height={40}\r\n            textAnchor=\"end\"\r\n            // verticalAnchor=\"middle\"\r\n            tickSize={4}\r\n            tickMargin={8}\r\n            // tickFormatter={(unixTime) => moment(unixTime).format('YY.MM.DD')}\r\n            // label={{ value: 'DATE', position: 'insideBottomRight', offset: 0 }} \r\n            padding={{ left: 50, right: 50 }}\r\n          />\r\n          <YAxis\r\n            yAxisId=\"left\"\r\n            // dataKey=\"price\" \r\n            // domain={['auto', 'auto']}\r\n            fontSize={10}\r\n            domain={[dataMin => parseInt(dataMin * 0.995), dataMax => parseInt(dataMax * 1.005)]}\r\n            // padding={{ top: 20, bottom: 20 }}\r\n            // unit=\"\"\r\n            // type=\"number\"\r\n            // label={{ value: 'WON', angle: -90, position: 'insideLeft' }}\r\n            tickFormatter={(price) => UtilConverter.number2commadStringWithIntl(price)} \r\n          />\r\n          <YAxis yAxisId=\"right\" orientation=\"right\" label={{ value: '%', position: 'center' }} fontSize={10} domain={[0, 100]} ticks={[0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]} />\r\n          <ZAxis dataKey=\"sell_volume\" name=\"sell_volume\" domain={[min_traded_volume, max_trade_volume]} range={[0, 100]} unit=\"ea\" zAxisId=\"sell_vol\" />\r\n          <ZAxis dataKey=\"buy_volume\"  name=\"buy_volume\"  domain={[min_traded_volume, max_trade_volume]} range={[0, 100]} unit=\"ea\" zAxisId=\"buy_vol\" />\r\n          \r\n          {/* <Scatter name=\"red\" dataKey=\"red\" fill=\"red\" /> */}\r\n          <Line yAxisId=\"left\"  type=\"monotone\" dataKey=\"price\" dot={null} isAnimationActive={false} />\r\n          <Line yAxisId=\"right\" type=\"natural\"  dataKey=\"rsi\"   dot={null} stroke={\"#CCC\"} isAnimationActive={false} />\r\n\r\n          <Scatter yAxisId=\"left\" name=\"sell\" dataKey=\"sell_price\" shape=\"circle\" stroke=\"#00F\" fillOpacity={0.5} fill=\"#00F9\" legendType=\"circle\" zAxisId=\"sell_vol\" isAnimationActive={false} />\r\n          <Scatter yAxisId=\"left\" name=\"buy\"  dataKey=\"buy_price\"  shape=\"circle\" stroke=\"#F00\" fillOpacity={0.5} fill=\"#F009\" legendType=\"circle\" zAxisId=\"buy_vol\"  isAnimationActive={false} />\r\n          \r\n          {/* <Line dataKey=\"redLine\" stroke=\"red\" dot={false} activeDot={false} legendType=\"none\" /> */}\r\n          {_viewPort['left'] && _viewPort['right'] ? (\r\n            <ReferenceArea yAxisId=\"left\" x1={_viewPort['left']} x2={_viewPort['right']} strokeOpacity={0.3} />\r\n          ) : null}\r\n          \r\n          <ReferenceLine yAxisId=\"right\" y={70} stroke=\"#F00\" />          \r\n          <ReferenceLine yAxisId=\"right\" y={30} stroke=\"#00F\" />\r\n        </ComposedChart>\r\n      </ResponsiveContainer>\r\n    </div>   \r\n  );\r\n}\r\n \r\nexport default RechartDayTrade3min;","import React from 'react';\r\nimport moment from 'moment';\r\nimport xlsx from 'xlsx';\r\nimport { UtilSheet } from '../../utils';\r\nimport RechartDayTrade3min from './recharts/rechart_day_trade_3min';\r\n\r\n\r\nconst VDayTrades = () => {\r\n  const [_data, _setData] = React.useState({});\r\n  const _refDayTradeFileForm = React.useRef();\r\n\r\n  const _parseData = React.useCallback((raw_data) => {\r\n    var data = {};\r\n    var data_pre = {};\r\n\r\n    Object.keys(raw_data).forEach((sheetName) => {      \r\n      if (\r\n        sheetName === 'KODEX 레버리지' || \r\n        sheetName === '신한 레버리지 S&P500 선물 ETN' || \r\n        sheetName === 'TRUE 레버리지 나스닥 100 ETN' || \r\n        sheetName === 'HANARO 글로벌럭셔리S&P(합성)'\r\n      ) {\r\n        raw_data[sheetName].forEach((row) => {\r\n          let date = new Date(row['일자']);\r\n          if (date.getMinutes() % 3 > 0)\r\n            date.setMinutes(date.getMinutes() - date.getMinutes() % 3);          \r\n          let date_string = moment(date).format('YY.MM.DD HH:mm');\r\n          let name = sheetName;\r\n\r\n          if (!data_pre[date_string])\r\n            data_pre[date_string] = {};\r\n\r\n          if (!data_pre[date_string][name])\r\n            data_pre[date_string][name] = {};\r\n\r\n          data_pre[date_string][name]['price'] = row['종가'];\r\n          data_pre[date_string][name]['rsi'] = parseFloat((row['RSI'] * 100).toFixed(2));\r\n        });\r\n      } else if (sheetName === '거래내역') {\r\n        raw_data[sheetName].forEach((row) => {\r\n          let date = UtilSheet.serialDateToJSDate(row['일자'], row['주문시각']);          \r\n          if (date.getMinutes() % 3 > 0)\r\n            date.setMinutes(date.getMinutes() - date.getMinutes() % 3);          \r\n          let date_string = moment(date).format('YY.MM.DD HH:mm');\r\n          let name = row['종목명'];\r\n\r\n          if (!data_pre[date_string])\r\n            data_pre[date_string] = {};\r\n\r\n          if (!data_pre[date_string][name])\r\n            data_pre[date_string][name] = {};\r\n\r\n          if (row['주문구분'] === '현금매도') {\r\n            data_pre[date_string][name]['sell_price' ] = row['주문단가'];\r\n            data_pre[date_string][name]['sell_volume'] = row['주문수량'];\r\n          } else if (row['주문구분'] === '현금매수') {\r\n            data_pre[date_string][name]['buy_price' ] = row['주문단가'];\r\n            data_pre[date_string][name]['buy_volume'] = row['주문수량'];\r\n          }\r\n        })\r\n      }\r\n    });\r\n    \r\n    let date_keys = Object.keys(data_pre);\r\n    date_keys.sort();\r\n\r\n    date_keys.forEach((date_key, i, arr) => {\r\n      let names = Object.keys(data_pre[date_key]);\r\n      names.forEach((name) => {\r\n        if (!data[name])\r\n          data[name] = [];\r\n\r\n        data[name].push({\r\n          date_time: date_key,\r\n          ...data_pre[date_key][name],\r\n        });\r\n      });\r\n    });\r\n\r\n    Object.keys(data).forEach((name) => {\r\n      var last_price = 0;\r\n      var last_rsi = 0;\r\n      data[name] = data[name].map((datum, i, arr) => {\r\n        let price = datum['price'] || last_price;\r\n        let rsi = datum['rsi'] || last_rsi;\r\n        last_price = price;\r\n        last_rsi = rsi;\r\n  \r\n        return {\r\n          ...datum,\r\n          price,\r\n          rsi,\r\n        };\r\n      });\r\n    });\r\n\r\n    return data;\r\n  }, []);\r\n\r\n  \r\n  function uploadSheet(event) {\r\n    var input = event.target; \r\n    var reader = new FileReader();\r\n    reader.onload = function() { \r\n      var fdata = reader.result; \r\n      var read_buffer = xlsx.read(fdata, {type : 'binary'}); \r\n\r\n      let data = {};\r\n      read_buffer.SheetNames.forEach(function(sheetName) {\r\n        var data_rows = xlsx.utils.sheet_to_json(read_buffer.Sheets[sheetName]); \r\n        data[sheetName] = data_rows;\r\n      });\r\n      \r\n      _refDayTradeFileForm.current.reset();      \r\n      localStorage.setItem('day_trade_data', JSON.stringify(data));\r\n      \r\n      _setData(_parseData(data));\r\n    }; \r\n    reader.readAsBinaryString(input.files[0]); \r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"text-start fw-bold my-5 px-4\" style={{fontSize: `calc(${2}rem + ${2}vw)`}}>\r\n        DAY TRADES\r\n      </div>\r\n\r\n      <div className=\"mt-5 d-flex justify-content-center\">\r\n        <div className=\"pe-2\">\r\n          <label type=\"button\" className=\"btn btn-secondary\">DOWNLOAD SAMPLE</label>\r\n        </div>\r\n        <div>\r\n          <form ref={_refDayTradeFileForm}>\r\n            <input type=\"file\" accept=\".xlsx\" id=\"pricesFileInput\"\r\n              className=\"d-none\"\r\n              onClick={e => e.target.key = 'prices' + new Date().getMilliseconds()}\r\n              // name=\"pricesFile\" onChange={_setPrices}\r\n              name=\"pricesFile\" onChange={uploadSheet}\r\n            />\r\n          </form>\r\n          <label type=\"button\" htmlFor=\"pricesFileInput\" className=\"btn btn-danger\">UPLOAD XLSX</label>\r\n        </div>\r\n      </div>\r\n\r\n      {/* {Object.keys(_data).map((name) => { */}\r\n      { [\r\n          'KODEX 레버리지',\r\n          '신한 레버리지 S&P500 선물 ETN',\r\n          'TRUE 레버리지 나스닥 100 ETN',\r\n          'HANARO 글로벌럭셔리S&P(합성)',\r\n        ].map((name) => {\r\n        return (\r\n          <React.Fragment key={name}>\r\n            <div className=\"mt-5 mb-3 px-4 py-5 bg-dark text-light\">\r\n              <h1><b>{name}</b></h1>\r\n            </div>\r\n\r\n            <div className=\"mt-4\">\r\n              <RechartDayTrade3min data={_data[name]} />\r\n            </div>\r\n          </React.Fragment>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VDayTrades;","import React from 'react';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport { VLogin, VMain, VRegister, VBubbles, VYoutubeSearch, VTradeHistory, VDayTrades } from '../views';\r\n\r\n\r\nconst MainRoutes = (props) => {\r\n  return ( \r\n    <Switch>\r\n      <Route path=\"/auth/register\"  render={(props) => <VRegister      {...props}/>}/>\r\n      <Route path=\"/auth/login\"     render={(props) => <VLogin         {...props}/>}/>\r\n      <Route path=\"/d3/bubbles\"     render={(props) => <VBubbles       {...props}/>}/>\r\n      <Route path=\"/youtube-search\" render={(props) => <VYoutubeSearch {...props}/>}/>\r\n      <Route path=\"/trade-history\"  render={(props) => <VTradeHistory  {...props}/>}/>\r\n      <Route path=\"/day-trades\"     render={(props) => <VDayTrades     {...props}/>}/>\r\n      <Route exact path=\"/\"         render={(props) => <VMain          {...props}/>}/>\r\n      <Route                        render={(props) => <Redirect to=\"/\" />}/>\r\n    </Switch>\r\n  );\r\n}\r\n \r\nexport default MainRoutes;","import React from 'react';\r\nimport { BrowserRouter, NavLink } from 'react-router-dom';\r\nimport { UtilCommon } from '../utils';\r\nimport { AppState, app_state_default } from './contexts';\r\nimport MainRoutes from './routers/main_routes';\r\nimport { ModalWrapper } from './modals';\r\n\r\nimport api from '../api/api';\r\n\r\nfunction App() {\r\n  const reducer = (prev_state, new_state) => ({ ...prev_state, ...new_state });\r\n  const [state, setState] = React.useReducer(reducer, app_state_default);\r\n  const [message_modals, setMessageModals] = React.useState([\r\n    // <ModalAlert />\r\n  ]);\r\n  const [isServerOn, setIsServerOn] = React.useState(false);\r\n\r\n  async function checkServer() {\r\n    try {\r\n      await api.get('/util/check')\r\n\r\n      setIsServerOn(true);\r\n    } catch (e) {\r\n      console.log('App.checkServer', e);\r\n      setIsServerOn(false);\r\n    }\r\n  }\r\n\r\n\r\n  React.useEffect(() => {\r\n    checkServer();\r\n  }, []);\r\n\r\n\r\n  // Functions for message_modals >>>>>>>>>>>>>>>>>>\r\n  async function closeMessageModal(e) {\r\n    setMessageModals(p_message_modals => {\r\n      if (!p_message_modals.length)\r\n        return p_message_modals;\r\n\r\n      let n_message_modals = p_message_modals.slice();\r\n      n_message_modals.shift();      \r\n      return n_message_modals;  \r\n    });\r\n\r\n    if (!message_modals.length) {\r\n      await UtilCommon.delay(200); // close animation time\r\n      (document.getElementsByTagName('body')[0]).classList.remove('overflow-hidden');\r\n    }\r\n  }\r\n\r\n  async function pushMessageModal({Modal, props = {}, onConfirm = () => {}, onCancel = () => {}}) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!message_modals.length) {\r\n        const body = document.getElementsByTagName('body')[0];\r\n        body.classList.add('overflow-hidden');\r\n      }\r\n\r\n      setMessageModals(p_message_modals => {\r\n        let n_message_modals = p_message_modals.slice();\r\n        n_message_modals.push((\r\n          <Modal\r\n            {...props}\r\n            onConfirm={async e => {\r\n              await onConfirm();\r\n              await closeMessageModal();\r\n              resolve(true);\r\n            }}\r\n            onCancel={async e => {\r\n              await onCancel();\r\n              await closeMessageModal();\r\n              resolve(false);\r\n            }}\r\n          />\r\n        ));\r\n        return n_message_modals;\r\n      });\r\n    });    \r\n  }\r\n  // <<<<<<<<<<<<<<<< Functions for message_modals\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <AppState.Provider value={Object.assign({}, state, {      \r\n        setState,\r\n        pushMessageModal,\r\n      })}>\r\n        <React.Fragment>\r\n          <ModalWrapper modals={message_modals} closeCurrentModal={closeMessageModal} />\r\n            <nav className=\"d-block d-sm-none position-fixed w-100\">\r\n              <div className=\"navbar navbar-dark bg-dark\">\r\n                <div className=\"container-fluid\">\r\n                  <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarToggleExternalContent\" aria-controls=\"navbarToggleExternalContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                    <span className=\"navbar-toggler-icon\"></span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"collapse bg-dark\" id=\"navbarToggleExternalContent\">\r\n                <ul className=\"nav nav-pills flex-column mb-auto fw-bold\" style={{ minHeight: `${100}vh` }}>\r\n                  {isServerOn && (\r\n                    <React.Fragment>\r\n                      <li><NavLink to=\"/auth/login\" className=\"nav-link fw-bold\">로그인</NavLink></li>\r\n                      <li><NavLink to=\"/auth/register\" className=\"nav-link fw-bold\">회원가입</NavLink></li>\r\n                    </React.Fragment>\r\n                  )}\r\n                  \r\n                    <li><NavLink to=\"/d3/bubbles\" className=\"nav-link fw-bold\">D3</NavLink></li>\r\n                  <li className=\"ps-2\"><NavLink to=\"/d3/bubbles\" className=\"nav-link fw-bold\" style={{ fontSize: `${0.875}rem`}}>Bubbles</NavLink></li>\r\n                  <li><NavLink to=\"/youtube-search\" className=\"nav-link fw-bold\">Youtube Search</NavLink></li>\r\n                  <li><NavLink to=\"/trade-history\" className=\"nav-link fw-bold\">Trade History</NavLink></li>\r\n                  <li><NavLink to=\"/day-trades\" className=\"nav-link fw-bold\">Day Trades</NavLink></li>\r\n                  <li><NavLink to=\"/\" className=\"nav-link fw-bold\">TEST</NavLink></li>\r\n                </ul>\r\n              </div>\r\n            </nav>\r\n            <div className=\"d-block d-sm-none\" style={{ height: `${48.5}px` }}></div>\r\n\r\n            <div className=\"d-flex\">\r\n              <aside className=\"flex-shrink-0 d-none d-sm-block overflow-auto bg-dark\" style={{ width: `${16}em`, height: `${100}vh` }}>\r\n                <nav>\r\n                  <ul className=\"nav nav-pills flex-column mb-auto fw-bold\">\r\n                    {isServerOn && (\r\n                      <React.Fragment>\r\n                        <li><NavLink to=\"/auth/login\" className=\"nav-link fw-bold\">로그인</NavLink></li>\r\n                        <li><NavLink to=\"/auth/register\" className=\"nav-link fw-bold\">회원가입</NavLink></li>                  \r\n                      </React.Fragment>\r\n                    )}                    \r\n                    <li><NavLink to=\"/d3/bubbles\" className=\"nav-link fw-bold\">D3</NavLink></li>\r\n                    <li><NavLink to=\"/d3/bubbles\" className=\"nav-link fw-bold ps-4\" style={{ fontSize: `${0.875}rem`}}>Bubbles</NavLink></li>\r\n                    <li><NavLink to=\"/youtube-search\" className=\"nav-link fw-bold\">Youtube Search</NavLink></li>\r\n                    <li><NavLink to=\"/trade-history\" className=\"nav-link fw-bold\">Trade History</NavLink></li>\r\n                    <li><NavLink to=\"/day-trades\" className=\"nav-link fw-bold\">Day Trades</NavLink></li>\r\n                    <li><NavLink exact to=\"/\" className=\"nav-link fw-bold\">TEST</NavLink></li>\r\n                  </ul>\r\n                </nav>\r\n              </aside>\r\n              <main id=\"main\" className=\"flex-fill overflow-auto\" style={{ height: `${100}vh` }}>\r\n                <MainRoutes />\r\n                <div style={{ height: `${20}vh`}}/>\r\n              </main>\r\n            </div>\r\n        </React.Fragment>\r\n      </AppState.Provider>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\n// bootstrap dependency\nimport '@popperjs/core';\nimport 'bootstrap/dist/js/bootstrap.js';\n// style\nimport './styles/_styles.scss';\n// components\nimport App from './components/app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}